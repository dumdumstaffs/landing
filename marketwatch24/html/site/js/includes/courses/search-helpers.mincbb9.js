(()=>{window.removeURLParameter=function(e,t){var a=e.split("?");if(a.length>=2){for(var n=encodeURIComponent(t)+"=",i=a[1].split(/[&;]/g),r=i.length;r-- >0;)(-1!==i[r].lastIndexOf(n,0)||void 0!==i[r][0]&&i[r][0].indexOf(",")>-1)&&i.splice(r,1);return e=a[0]+"?"+(i.length>0?""+i.join("&"):"")}return e},window.returnURLParameter=function(e,t,a){var n=t;return(void 0===a?window.location.href:a).replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(t,a,i){a===e&&(n=i)})),n},window.socialShareLink=function(e,t,a){return"facebook"===e?"https://www.facebook.com/sharer/sharer.php?u="+t+"%3futm_campaign=social_share%26utm_source=Facebook%26utm_medium=social":"twitter"===e?"https://twitter.com/intent/tweet?url="+t+"%3Futm_campaign=social_share%26utm_source=Twitter%26utm_medium=social&text="+(a||""):"http://www.linkedin.com/shareArticle?url="+t+"%3futm_campaign=social_share%26utm_source=LinkedIn%26utm_medium=social&mini=true"},window.createGoogleAd=function(e,t,a){var n='<ins class="adsbygoogle"style="display:block"data-ad-client="ca-pub-4877892089121284"data-ad-slot="'+t+'"data-ad-format="'+e+'"';return void 0!==a&&(n+=' data-ad-layout-key="'+a+'"'),n+=' data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});<\/script>'},window.generatePagination=function(e,t,a,n){var i=window.location.href;-1!==(i=removeURLParameter(i,"page")).indexOf("?")?i+=(-1!==i.indexOf("=")?"&":"")+"page=":i+="?page=",$(".js-pagination").pagination({items:t,itemsOnPage:e||20,pages:Math.ceil(t/e),cssStyle:"light-theme",currentPage:a,hrefTextPrefix:i,onPageClick:function(e,t){t.preventDefault(),n(e)}})},window.displayApiResults=function(e,t){if(void 0===t)t={categoryAd:{adType:"default",active:!1}};var a=e.total<6;if(0===$(".blank:not(.ad)").length&&0!==e.total||$(".fullwidth-search").length>0){var n=$(".fullwidth-search").attr("data-amount")||20,i=course.createBlanks(n),r=insertAds(i);$(".search-items").html(r.innerHTML)}0!==e.total&&displayResponse(e.result,".search-items",!a,t),void 0!==e.related&&e.total<6?(i=course.createBlanks(30),r=insertAds(i),$(".related-search-list").html(r.innerHTML).parent().show(),displayResponse(e.related,".related-search-list",a,t)):$(".related-search").hide().find(".related-search-list").html("")},window.displayResponse=function(e,t,a,n){for(var i=0;i<e.length;i++)if(void 0!==e[i].name){var r=course.buildCourseItem(e[i]);$(t).find(".blank:not(.ad)").first().parent().replaceWith(r),function(){var e=r;setTimeout((function(){e.style.opacity=1}),200)}();var o=$(r).next().find(".ad");$(r).next().find(".ad").length>0&&(o.removeClass("blank"),"default"===n.categoryAd.adType&&(adsbygoogle=window.adsbygoogle||[]).push({}))}0===$(".search-results-wrapper--index").length&&$.each($(".leaderboard:visible, .search-ad-mobile:visible"),(function(){setTimeout((function(){(adsbygoogle=window.adsbygoogle||[]).push({})}),700)})),$(".blank").parent().remove(),".related-search-list"!==t&&addStructuredData(e),!0===n.categoryAd.active&&$(".ad.course-block").each((function(e){var t=n.categoryAd.adType;$(this).html(createGoogleAd("fluid",n[t]["inline-"+e],"-6t+ed+2i-1n-4w"))})),void 0!==a&&a&&(console.log("Optimize ready"),dataLayer.push({event:"optimize.activate"}))},window.addStructuredData=function(e){var t,a=$('script[async="true"][type="application/ld+json"]'),n=[];if(e.length>0)for(var i=0;i<e.length;i++)n.push({"@type":"ListItem",position:i+1,url:"https://alison.com/course/"+e[i].slug});if(t=JSON.stringify({"@context":"http://schema.org","@type":"ItemList",itemListElement:n}),0===a.length){var r=document.createElement("script");r.type="application/ld+json",r.async="true",r.text=t,$("head").append(r)}else a.text(t)},window.insertAds=function(e){var t=6,a=document.createElement("ul"),n=["3285035941","4311957408","6335485514","5960791435","3242418311"],i=0;if($(".fullwidth-search").length>0&&$(window).width()>=1897&&(t=5),a.innerHTML=e,""!==$("#search").attr("data-ads-enabled"))for(var r=1;r<=a.childNodes.length;r++){if(!($(".fullwidth-search").length>0&&$(window).width()>=1897&&4===i&&0===$(".certs-diploma").length))if(r%t==0){var o='<div class="ad course-block blank match-height" style=""><div><ins class="adsbygoogle" style="display:block" data-ad-format="fluid" data-ad-layout="image-top" data-ad-client="ca-pub-4877892089121284" data-ad-slot="'+n[i]+'"></ins></div></div>';a.childNodes[r-1].outerHTML="<li>"+o+"</li>"+a.childNodes[r-1].outerHTML,i++,$(".certs-diploma").length>0&&(i=0)}}return a},window.updateHeading=function(e,t,a){e=parseInt((e+"").split("&")[0]);var n=parseInt(t>e?e:t),i=(parseInt(page)-1)*e,r=i+1+" - "+(i+parseInt(e));1===parseInt(page)?($(".index-title").html(a),$(".top-category-count").text(n)):$(".index-title").html($(".index-title").attr("data-cat")+" "+r)};var e="";window.intialiseCategorySearch=function t(a){void 0===$("#search").attr("data-param")&&($("#search").attr("data-param",a),$('[name="type-sorting"], [name="sorting"], [name="lang-sorting"]').change((function(){page=1,"lang-sorting"===$(this)[0].name&&(e=$(this).prop("selectedIndex")>0?$(this).children("option:selected").val():""),t($("#search").attr("data-param"))}))),contactCoursesApi(page,a,(function(e){var t=a.split("size=")[1]||20;displayApiResults(e),void 0!==e.result&&updateHeading(t,e.result.length,defaultTitle)}),e)},window.contactCoursesApi=function e(t,a,n,i){void 0===i&&(i=null);var r=$(".search-filters-order select").val(),o=void 0!==$(".search-filters-type select").val()?$(".search-filters-type select").val():"",l=$(".search-filters-language select").val(),s="";a.indexOf("type=certificate")>-1||a.indexOf("type=diploma")>-1?($(".search-filters-type").hide(),$(".search-filters-language").removeClass("wide"),a.indexOf(o)>-1&&(s=$("#search").attr("data-endpoint")+"/search?locale="+language+"&language="+l+"&order="+r+"&"+a+"&page="+t)):s=a.indexOf("category=")>-1?$("#search").attr("data-endpoint")+"/search?locale="+language+"&language="+l+"&order="+r+"&"+a+"&"+("default"===o?"":"type="+o+"&")+"page="+t:$("#search").attr("data-endpoint")+"/search?locale="+language+"&language="+l+"&order="+r+"&"+a+"&page="+t,$.ajax({url:s,type:"GET",contentType:"application/json",success:function(t){if(t.total>0){n(t),$(".no-results").hide(),(void 0!==t.aggregations||$(".learning-path-active").length<1)&&populateLanguageDropdown(t.aggregations.language,i);var r=a.split("size=")[1]||20;window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,(function(e,t,a){"size"===t&&(r=a)})),generatePagination(r,t.total,page,(function(t){page=t,$(window).scrollTop($(".category-meta").offset().top+$(".category-meta").height());var n=window.location.href,i="Free Online Diploma and Certificate Level Training Courses | Market Watch 24",o=removeURLParameter(n,"page");-1!==o.indexOf("?")?o+=(-1!==o.indexOf("=")?"&":"")+"page="+t:o="?page="+t,window.history.pushState({},i,o),document.title=i,e(t,a,(function(e){displayApiResults(e),updateHeading(r,e.result.length,defaultTitle)}))}))}else(void 0!==t.aggregations||$(".learning-path-active").length<1)&&populateLanguageDropdown(t.aggregations.language,i),$(".index-title").text("Sorry, we found no results for your search"),$(".no-results").show(),$(".search-items").html(""),$(".simple-pagination").hide("")}})},window.languages=null,window.getLanguages=function(){$.ajax({type:"get",url:$("#search").attr("data-endpoint")+"/language/list",dataType:"json",async:!1,success:function(e){languages=e.result},error:function(e){console.log(e),console.warn("error fetching languages list",e)}})},$(".learning-path-active").length<1&&getLanguages(),window.populateLanguageDropdown=function(e,t){if(void 0!==e&&0!=e.length){$(".search-filters-language select").find("option:gt(0)").remove(),t||($(".search-filters-language select option").removeAttr("selected"),$(".search-filters-language select option:nth(0)").attr("selected","selected"));for(var a=0;a<e.length;a++)for(var n=0;n<languages.length;n++)e[a].key==languages[n].code&&(e[a].name=languages[n].defaultName);e=customSorter(e,"language"),$.each(e,(function(e,a){a.key==t?$(".search-filters-language select").append($("<option>",{value:a.key,text:a.name+" ("+a.value+")",selected:!0})):$(".search-filters-language select").append($("<option>",{value:a.key,text:a.name+" ("+a.value+")"}))}))}else $(".search-filters-language").hide()},window.customSorter=function(e,t){if("course_type"===t&&e.sort(i("name",t)),"duration"===t&&e.sort(i("key",t)),"course_level"===t&&e.sort(i("key-numeric",t)),"category"===t&&e.sort(i("selected",t)),"tag"===t&&(e.sort(i("value-numeric",t)),e.sort(i("selected",t))),"language"===t){var a=null;e.sort(i("name",t)),e.sort(i("selected",t));for(var n=0;n<e.length;n++)"en"==e[n].key&&(a=e.splice(n,1));null!=a&&(e=a.concat(e))}function i(e,t){return function(a,n){var i,r=null;"key"===e&&("duration"!==t?(i=a.key.toUpperCase(),r=n.key.toUpperCase()):(i=parseInt(a.key.replace("+","").split("-")[0]),r=parseInt(n.key.replace("+","").split("-")[0]))),"name"===e&&(i=a.name.toUpperCase(),r=n.name.toUpperCase()),"key-numeric"===e&&(i=a.key,r=n.key),"value-numeric"===e&&(i=n.value,r=a.value),"selected"===e&&(i=n.selected,r=a.selected);var o=0;return i>r?o=1:i<r&&(o=-1),o}}return e},Handlebars.registerHelper("encodeChars",(function(e){return encodeURIComponent(e)}))})();