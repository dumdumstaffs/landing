<!DOCTYPE html>
    <html dir="ltr" lang="en" data-branch="3"  data-start="31/10/2023 00:36:07" class="www2 branch-3 suggested-branch-3 com-host country-ng locale-en access-from-outside">
    
<!-- Mirrored from www.icmarkets.com/global/en/help-resources/forex-calculators by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Oct 2023 18:13:07 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
        
            <title id="cryptoHide">Forex Trading Calculator | Forex Value Market</title>
        
        
        <script crossorigin="anonymous" src="https://polyfill.io/v3/polyfill.min.js?features=es5%2Ces6%2Ces7"></script>
        


    <link rel="alternate" href="forex-calculators.html" hreflang="x-default" />
    
        
        <link rel="alternate" href="forex-calculators.html" hreflang="en" />
        
    
        
        <link rel="alternate" href="#/cn/help-resources/forex-calculators" hreflang="zh-hans" />
        
    
        
        <link rel="alternate" href="#/th/help-resources/forex-calculators" hreflang="th" />
        
    
        
        <link rel="alternate" href="#/id/help-resources/forex-calculators" hreflang="id" />
        
    
        
        <link rel="alternate" href="#/ko/help-resources/forex-calculators" hreflang="ko" />
        
    
        
        <link rel="alternate" href="#/de/help-resources/forex-calculators" hreflang="de" />
        
    
        
        <link rel="alternate" href="#/fr/help-resources/forex-calculators" hreflang="fr" />
        
    
        
        <link rel="alternate" href="#/pt/help-resources/forex-calculators" hreflang="pt" />
        
    
        
        <link rel="alternate" href="#/es/recursos-ayuda/calculadora-forex" hreflang="es" />
        
    
        
        <link rel="alternate" href="#/vn/help-resources/forex-calculators" hreflang="vi" />
        
    
        
        <link rel="alternate" href="#/ru/help-resources/forex-calculators" hreflang="ru" />
        
    
        
        <link rel="alternate" href="#/ar/help-resources/forex-calculators" hreflang="ar" />
        
    
        
        <link rel="alternate" href="#/cz/help-resources/forex-calculators" hreflang="cs" />
        
    
        
        <link rel="alternate" href="#/my/help-resources/forex-calculators" hreflang="my" />
        
    
        
        <link rel="alternate" href="#/it/risorse/calcolatore-pips" hreflang="it" />
        
    
        
        <link rel="alternate" href="#/bg/help-resources/forex-calculators" hreflang="bg" />
        
    
        
        <link rel="alternate" href="#/hr/help-resources/forex-calculators" hreflang="hr" />
        
    
        
        <link rel="alternate" href="#/tw/help-resources/forex-calculators" hreflang="zh-hant" />
        
    
        
        <link rel="alternate" href="#/jp/help-resources/forex-calculators" hreflang="ja" />
        
    
        
        <link rel="alternate" href="https://www.icmarkets.com.au/en/help-resources/forex-calculators" hreflang="en-AU" />
        
    
        
        <link rel="alternate" href="https://www.icmarkets.com.au/cn/help-resources/forex-calculators" hreflang="zh-hans-AU" />
        
    
        
        <link rel="alternate" href="https://www.icmarkets.com.au/pt/help-resources/forex-calculators" hreflang="pt-AU" />
        
    
        
        <link rel="alternate" href="https://www.icmarkets.com.au/es/help-resources/forex-calculators" hreflang="es-AU" />
        
    
        
        <link rel="alternate" href="https://www.icmarkets.com.au/tw/help-resources/forex-calculators" hreflang="zh-hant-AU" />
        
    





    <link rel="canonical" href="forex-calculators.html" />

        
            <link rel="stylesheet" href="https://www.icmarkets.com/assets/css/style.css">
        
        
            <link rel="icon" href="/assets/logo.png">
        
        <meta data-n-head="true" charset="utf-8">
        <meta data-n-head="true" name="viewport" content="width=device-width,minimum-scale=1,initial-scale=1">
        <meta name="facebook-domain-verification" content="2ejcewkk85kbs8asynzohmdkiw0nt1" />
        
            <meta name="google-site-verification" content="RszAZq7M0h883aDAE-Z3RbPlL0TeWZEilLUIXrED71Y" />
        
        <meta name="description" content="Forex trading calculators – Calculate current pip values in your account currency across Forex Value Market range of products.. Click for more!">
        
        
            <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js' ></script>
        
        <script type="text/javascript">
            var ICMBranchID = '3';
            var ICMLocale = 'en';
            var ICMCountry = 'ng';
            var LOCALES = JSON.parse('[{"id":1,"code":"en","name":"English"},{"id":2,"code":"cn","name":"简体中文"},{"id":3,"code":"th","name":"ไทย"},{"id":4,"code":"id","name":"Indonesia"},{"id":5,"code":"ko","name":"한국어"},{"id":6,"code":"de","name":"Deutsch"},{"id":7,"code":"fr","name":"Français"},{"id":8,"code":"pt","name":"Português"},{"id":9,"code":"es","name":"Español"},{"id":10,"code":"vn","name":"Tiếng Việt"},{"id":11,"code":"ru","name":"Русский"},{"id":12,"code":"ar","name":"عربى"},{"id":13,"code":"cz","name":"Česky"},{"id":14,"code":"my","name":"Melayu"},{"id":15,"code":"it","name":"Italiano"},{"id":16,"code":"bg","name":"Български"},{"id":17,"code":"hr","name":"Hrvatski"},{"id":18,"code":"tw","name":"繁體中文"},{"id":19,"code":"jp","name":"日本語"}]')
        </script>
        
        
            <!-- Taboola Pixel Code -->
                <script type='text/javascript'>window._tfa = window._tfa || []; window._tfa.push({notify: 'event', name: 'page_view', id: 1231667}); !function (t, f, a, x) { if (!document.getElementById(x)) { t.async = 1;t.src = a;t.id=x;f.parentNode.insertBefore(t, f); }}(document.createElement('script'), document.getElementsByTagName('script')[0], 'http://cdn.taboola.com/libtrc/unip/1231667/tfa.js', 'tb_tfa_script');</script>
                <noscript><img src='http://trc.taboola.com/1231667/log/3/unip?en=page_view' width='0' height='0' style='display:none'/></noscript>
            <!-- End of Taboola Pixel Code -->
        
        <!-- Facebook Pixel Code -->
        <script>
            !function (f, b, e, v, n, t, s) {
                if (f.fbq) return; n = f.fbq = function () {
                    n.callMethod ?
                    n.callMethod.apply(n, arguments) : n.queue.push(arguments)
                };
                if (!f._fbq) f._fbq = n; n.push = n; n.loaded = !0; n.version = '2.0';
                n.queue = []; t = b.createElement(e); t.async = !0;
                t.src = v; s = b.getElementsByTagName(e)[0];
                s.parentNode.insertBefore(t, s)
            }(window, document, 'script',
                'https://connect.facebook.net/en_US/fbevents.js');
            fbq('init', '241371791216223');
            fbq('track', 'PageView');
        </script>
        <noscript>
            <img height="1" width="1" style="display:none"
                src="https://www.facebook.com/tr?id=241371791216223&amp;ev=PageView&amp;noscript=1" />
        </noscript>
        <!-- End Facebook Pixel Code -->
        <!-- DCMN -->
        <script type="text/javascript">
            !function(n,t,e,r){var o,i,a="script",u="_dcmnTrackingSdk";n[u]=n[u]||r,n[r]=n[n[u]]||function(){(n[r].q=n[r].q||[]).push(arguments)},n[r].t=n[r].t||1*new Date,o=t.getElementsByTagName(a)[0],(i=t.createElement(a)).async=!0,i.src=e,o.parentNode.insertBefore(i,o)}(window, document, "https://sdk.dcmn.io/sdk.js", "_dcmn");
            _dcmn("create", "fyr9k189kmdy");
        </script>
        <script type="text/javascript">
            _dcmn("trackPageView");
        </script>
    </head>
    <body>
        
<div class="icm-navbar affix-top" data-spy="affix" data-offset-top="100">
    

    <div class="mobile-app-box">
        <div class="mobile-app-bar">
              <div class="m-app-logo">
                <a href="javascript:" class="app-bar-close">
                    <i></i>
                </a>
                <span class="m-logo-icon">
                    <img src="https://www.icmarkets.com/assets/images/icsocial-logo.webp" alt="" class="img-fluid" />
                </span>
                <div class="m-logo-txt">
                    <h5>IC Social</h5>
                    <h6>Download the App to enhance your trading experience.</h6>
                </div>
              </div>
            <a class="mobile-app-link" target="_blank" href="#">
                <span>INSTALL</span>
            </a>
        </div>
    </div>




    <div class="topbar">
        <div class="container">
            <div class="row">
                <div class="col-5">
                    <div class="top-left-bar">
                        <ul>
                            
                                <li>
                                    <a href="#" class="current">CLIENT</a>
                                </li>
                                
                                    <li>
                                        <a href="#" target="_blank" class="to-go">PARTNERS</a>
                                    </li>
                                
                                <li>
                                    <a id="navigation_blog" href="#" target="_blank" class="to-go">BLOG</a>
                                </li>
                            
                        </ul>
                    </div>
                </div>
                <div class="col-7">
                    <div class="top-right-bar"> 
                        <ul>
                            
                                <li>
                                    <a id="top_socialapp" href="#" class="top-item"><span class="new">NEW</span>IC Social</a>
                                </li>
                            
                            
                            
                                <li>
                                    <a id="top_webtrader" href="https://app.forexvaluemarket.com/dashboard" target="_blank" class="top-item">WebTrader</a>
                                </li>
                            
                            
                            <li>
                                <a id="top_live_registration" href="https://app.forexvaluemarket.com/account/register" class="top-item">Start Trading</a>
                            </li>
                            <li>
                                <a id="top_demo_registration" href="https://app.forexvaluemarket.com/account/register" class="top-item">Try a Free Demo</a>
                            </li>
                            <li>
                                <a id="top_contact_us" href="../company/contact-us.html" class="top-item">Contact Us</a>
                            </li>
                            
                            <li class="lang-list d-block">
                                <div class="language-select language-select--style ">
                                    
  <div class="lang_selector dropdown navbar-list__item--style navbar-list__item--locale">
    <a href="#" id="lang_selector_dropdown" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" data-hover="dropdown" data-delay="0" data-close-others="true">
      <span class="lang_display">
        <svg viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M0 7.52856C0 11.5103 3.25991 14.7916 7.27848 14.7916C11.2375 14.7916 14.5 11.5103 14.5 7.52856C14.5 3.4869 11.2375 0.208252 7.27848 0.208252C3.25991 0.208252 0 3.4869 0 7.52856ZM7.27848 1.26294C8.26758 1.26294 8.90972 3.42961 9.08321 4.24992H5.41419C5.59026 3.42961 6.22982 1.26294 7.27848 1.26294ZM9.43276 7.52856C9.43276 8.23169 9.37579 8.9921 9.31624 9.69523H5.24071C5.12419 8.9921 5.06723 8.23169 5.06723 7.52856C5.06723 6.76815 5.12419 6.06502 5.24071 5.302H9.31624C9.37579 6.06502 9.43276 6.76815 9.43276 7.52856ZM13.1018 5.42179C13.3918 6.06502 13.5083 6.76815 13.5083 7.53117C13.5083 8.29419 13.3348 8.93742 13.1018 9.69783H10.3053C10.4219 8.99471 10.4788 8.23429 10.4788 7.53117C10.4788 6.77075 10.4219 6.06763 10.3053 5.30461H13.1018V5.42179ZM7.27848 13.7968C6.22982 13.7968 5.59026 11.5702 5.41419 10.7499H9.08321C8.90972 11.5702 8.27017 13.7968 7.27848 13.7968ZM4.19205 9.69523H1.39821V9.57804C1.16518 8.93481 1.04866 8.23169 1.04866 7.52856C1.04866 6.70825 1.16518 6.06502 1.39821 5.302H4.19205C4.07553 6.06242 4.01857 6.76554 4.01857 7.52856C4.01857 8.23169 4.07553 8.99471 4.19205 9.69523ZM1.92125 10.7499H4.36812C4.60116 11.8046 4.83419 12.5077 5.35723 13.5025C3.72598 12.8593 2.91035 12.2135 1.92125 10.7499ZM10.1319 10.7499H12.5787L12.4622 10.9843C11.5896 12.2734 10.5979 12.9166 9.19972 13.5025C9.66579 12.5077 9.89883 11.8046 10.1319 10.7499ZM12.5787 4.24992H10.1319C9.89883 3.19523 9.66579 2.49211 9.19972 1.55721C10.774 2.20044 11.6466 2.78638 12.5787 4.24992ZM4.36812 4.24992H1.92125C2.85339 2.78638 3.72598 2.20044 5.35723 1.55721C4.83419 2.43481 4.60116 3.25252 4.36812 4.24992Z"/>
        </svg>          
        <span>en</span>
      </span>
    </a>
    <div class="dropdown-menu dropdown-menu--locale" role="menu">
      <ul class="dropdown-list-container___list">
        
          
        
          
        
          
            
              
                <li id="lang_selector_option_en" class="dropdown-list-container__list-item" onclick="window.location='forex-calculators.html'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/en.webp" />
                  <span>English</span> 
                </li>
              
            
              
                <li id="lang_selector_option_cn" class="dropdown-list-container__list-item" onclick="window.location='#/cn/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/cn.webp" />
                  <span>简体中文</span> 
                </li>
              
            
              
                <li id="lang_selector_option_th" class="dropdown-list-container__list-item" onclick="window.location='#/th/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/th.webp" />
                  <span>ไทย</span> 
                </li>
              
            
              
                <li id="lang_selector_option_id" class="dropdown-list-container__list-item" onclick="window.location='#/id/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/id.webp" />
                  <span>Indonesia</span> 
                </li>
              
            
              
                <li id="lang_selector_option_ko" class="dropdown-list-container__list-item" onclick="window.location='#/ko/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/ko.webp" />
                  <span>한국어</span> 
                </li>
              
            
              
                <li id="lang_selector_option_de" class="dropdown-list-container__list-item" onclick="window.location='#/de/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/de.webp" />
                  <span>Deutsch</span> 
                </li>
              
            
              
                <li id="lang_selector_option_fr" class="dropdown-list-container__list-item" onclick="window.location='#/fr/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/fr.webp" />
                  <span>Français</span> 
                </li>
              
            
              
                <li id="lang_selector_option_pt" class="dropdown-list-container__list-item" onclick="window.location='#/pt/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/pt.webp" />
                  <span>Português</span> 
                </li>
              
            
              
                <li id="lang_selector_option_es" class="dropdown-list-container__list-item" onclick="window.location='#/es/recursos-ayuda/calculadora-forex'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/es.webp" />
                  <span>Español</span> 
                </li>
              
            
              
                <li id="lang_selector_option_vn" class="dropdown-list-container__list-item" onclick="window.location='#/vn/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/vn.webp" />
                  <span>Tiếng Việt</span> 
                </li>
              
            
              
                <li id="lang_selector_option_ru" class="dropdown-list-container__list-item" onclick="window.location='#/ru/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/ru.webp" />
                  <span>Русский</span> 
                </li>
              
            
              
                <li id="lang_selector_option_ar" class="dropdown-list-container__list-item" onclick="window.location='#/ar/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/ar.webp" />
                  <span>عربى</span> 
                </li>
              
            
              
            
              
            
              
                <li id="lang_selector_option_it" class="dropdown-list-container__list-item" onclick="window.location='#/it/risorse/calcolatore-pips'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/it.webp" />
                  <span>Italiano</span> 
                </li>
              
            
              
                <li id="lang_selector_option_bg" class="dropdown-list-container__list-item" onclick="window.location='#/bg/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/bg.webp" />
                  <span>Български</span> 
                </li>
              
            
              
                <li id="lang_selector_option_hr" class="dropdown-list-container__list-item" onclick="window.location='#/hr/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/hr.webp" />
                  <span>Hrvatski</span> 
                </li>
              
            
              
                <li id="lang_selector_option_tw" class="dropdown-list-container__list-item" onclick="window.location='#/tw/help-resources/forex-calculators'" data-toggle="collapse" data-target=".navbar-collapse.in">
                  <img src="https://www.icmarkets.com/assets/images/flags/tw.webp" />
                  <span>繁體中文</span> 
                </li>
              
            
              
            
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      </ul>
    </div>
  </div>


                                </div>
                            </li>
                            <li class="ms-4 d-block d-md-none">
                                <div class="menubar">
                                    <span></span>
                                    <span></span>
                                    <span></span>
                                </div>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


    
    <div class="header">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <nav class="navbar navbar-default position-static">
                        <div id="navbar" class="d-flex navbar-collapse navbar-collapse--style justify-content-between">
                            <div class="logo">
                                <a style="text-decoration: none;" id="navigation_regulator_2" href="/">
                                    <p style="font-weight: bold; font-size: 28px;">Forex<span style="color:white">Value</span>Market</p>
                                </a>
                            </div>
                            <div class="header-nav nav navbar-nav scroll-menu navbar-list">
                                <div class="d-flex d-md-none nav-tag">
                                    <a style="text-decoration: none;" id="navigation_regulator_2" href="/">
                                        <p style="font-weight: bold; font-size: 18px;">Forex<span style="color:white">Value</span>Market</p>
                                    </a>
                                    <div class="menubar">
                                        <span></span>
                                        <span></span>
                                        <span></span>
                                    </div>
                                </div>
                                <ul>
                                    <li class="dropdown navbar-list__item--style">
                                        <a id="navigation_quickstart_2" href="#"
                                            class="dropdown-toggle"
                                            data-toggle="dropdown"
                                            role="button"
                                            aria-haspopup="true"
                                            aria-expanded="false"
                                            data-hover="dropdown"
                                            data-delay="0" data-close-others="false">
                                            Quickstart
                                        </a>
                                        <div class="expand-arrow d-block d-md-none">
                                            <span></span>
                                            <span></span>
                                        </div>
                                        <div class="dropdown-list-container dropdown-menu dropdown-menu--style">
                                            <div class="container">
                                                <div class="row icm-navbar-dropdown-container">
                                                    <div class="col-md-4 col-lg-4 d-none d-md-block">
                                                        
<div class="navbar-cta-block pt-5">
     <h3 class="navbar-cta-block__heading">Trade with a high-performance trading platform </h3> 
    <div class="d-flex">
        
            <a class="btn btn-primary-md me-3" id="navbar_cta_live_registration" href="https://app.forexvaluemarket.com/account/register">
                Start Trading
            </a>
            <a class="btn btn-outline-primary-md c-white" id="navbar_demo_registration" href="https://app.forexvaluemarket.com/account/register">
                Try Free Demo
            </a>
        
    </div>

</div>

                                                    </div>
                                                    <div class="col-xs-12 col-md-8 col-lg-8">
                                                        <div class="row">
                                                            <div class="col-xs-12 col-md-4">
                                                                <h5 class="dropdown-heading"> Introduction</h5>
                                                                <ul class="dropdown-list-container___list">
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_why_us" href="../company/why-us.html">
                                                                                Why Forex Value Market <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_markets_range_of_markets" href="../trading-markets/range-of-markets.html">
                                                                            What you can trade <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_pricing_spreads_2" href="../trading-pricing/spreads.html">
                                                                            Simple Pricing <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_introduction_forex_trading" href="../introduction/forex-trading.html">
                                                                                Forex Trading <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_raw_trader_plus" href="../introduction/raw-trader-plus.html">
                                                                                Raw Trader Plus <span class="new">NEW</span><span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                </ul>
                                                            </div>
                                                            <div class="col-xs-12 col-md-4">
                                                                <h5 class="dropdown-heading">Your Account</h5>
                                                                <ul class="dropdown-list-container___list">
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_live_registration" href="https://app.forexvaluemarket.com/account/register">
                                                                            Live Accounts <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_demo_registration" href="https://app.forexvaluemarket.com/account/register">
                                                                            Demo Accounts <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_accounts_funding" href="../trading-accounts/funding.html">
                                                                            How to deposit <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_accounts_withdrawal" href="../trading-accounts/withdrawal.html">
                                                                            How to withdraw <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a href="../introduction/icmarkets-mobile-app.html">
                                                                                Forex Value Market Mobile App <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                </ul>
                                                            </div>
                                                            <div class="col-xs-12 col-md-4">
                                                                <h5 class="dropdown-heading">Trading Platform</h5>
                                                                <ul class="dropdown-list-container___list">
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_webtrader" href="https://app.forexvaluemarket.com/dashboard" target="_blank">WebTrader</a>
                                                                        </li>
                                                                    
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_metatrader4" href="../forex-trading-platform-metatrader/metatrader-4.html">
                                                                            MetaTrader <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_ctrader_windows" href="../forex-trading-platform-ctrader/ctrader-windows.html">
                                                                                cTrader <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_social_trading" href="#">
                                                                            IC Social <span class="new">NEW</span> <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    
                                                                        
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_myfxbook_autotrade" href="../forex-trading-platform/signal-start.html">
                                                                                Signal Start <span class="new">NEW</span> <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        
                                                                        
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_zulutrade" href="../zulutrade.html">
                                                                                    ZuluTrade <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                        
                                                                    
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="dropdown navbar-list__item--style">
                                        <a id="navigation_trading_2"
                                            href="#"
                                            class="dropdown-toggle"
                                            data-toggle="dropdown"
                                            role="button"
                                            aria-haspopup="true"
                                            aria-expanded="false"
                                            data-hover="dropdown"
                                            data-delay="0"
                                            data-close-others="false">
                                            Trading
                                        </a>
                                        <div class="expand-arrow d-block d-md-none">
                                            <span></span>
                                            <span></span>
                                        </div>
                                        <div class="dropdown-list-container dropdown-menu dropdown-menu--style">
                                            <div class="container">
                                                <div class="row icm-navbar-dropdown-container">
                                                    <div class="col-md-4 col-lg-4 d-none d-md-block">
                                                        
<div class="navbar-cta-block pt-5">
     <h3 class="navbar-cta-block__heading">Access Global Markets with a Multi-Asset Trading Platform&nbsp;&nbsp;</h3> 
    <div class="d-flex">
        
            <a class="btn btn-primary-md me-3" id="navbar_cta_live_registration" href="https://app.forexvaluemarket.com/account/register">
                Start Trading
            </a>
            <a class="btn btn-outline-primary-md c-white" id="navbar_demo_registration" href="https://app.forexvaluemarket.com/account/register">
                Try Free Demo
            </a>
        
    </div>

</div>

                                                    </div>
                                                    <div class="col-xs-12 col-md-8 col-lg-8">
                                                        <div class="row">
                                                            <div class="col-xs-12 col-md-4">
                                                                <h5 class="dropdown-heading"> Trading Accounts</h5>
                                                                <ul class="dropdown-list-container___list">
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_accounts_overview" href="../trading-accounts/overview.html">
                                                                            Accounts Overview <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_accounts_raw_spread_account" href="../trading-accounts/raw-spread-account.html">
                                                                            Raw Spread <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_trading_ctrader_raw" href="../trading-accounts/ctrader-raw.html">
                                                                                cTrader Raw Spread <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_accounts_standard_account" href="../trading-accounts/standard-account.html">
                                                                            Standard <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_trading_accounts_islamic" href="../trading-accounts/islamic-account.html">
                                                                                Islamic <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_accounts_funding_2" href="../trading-accounts/funding.html">
                                                                            How to deposit <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_accounts_withdrawal_2" href="../trading-accounts/withdrawal.html">
                                                                            How to withdraw <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="col-xs-12 col-md-4">
                                                                <h5 class="dropdown-heading">Products</h5>
                                                                <ul class="dropdown-list-container___list">
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_markets_range_of_markets_2" href="../trading-markets/range-of-markets.html">
                                                                            Range of Products <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_markets_forex" href="../trading-markets/forex.html">
                                                                            Forex CFDs <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_markets_commodities" href="../trading-markets/commodities.html">
                                                                                Commodities CFDs <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_markets_indices" href="../trading-markets/indices.html">
                                                                            Indices CFDs <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_markets_bonds" href="../trading-markets/bonds.html">
                                                                            Bonds CFDs <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_trading_markets_digitalcurrency" href="../trading-markets/digitalcurrency.html">
                                                                                Digital currencies <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_trading_markets_stocks" href="../trading-markets/stocks.html">
                                                                                Stocks CFDs <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_markets_futures" href="../trading-markets/futures.html">
                                                                            Futures CFDs <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="col-xs-12 col-md-4">
                                                                <h5 class="dropdown-heading">Pricing</h5>
                                                                <ul class="dropdown-list-container___list">
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_trading_pricing_trading_conditions" href="../trading-pricing/trading-conditions.html">
                                                                                Trading Conditions <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_pricing_spreads_3" href="../trading-pricing/spreads.html">
                                                                            Spreads <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_hours" href="../trading-pricing/trading-hours.html">
                                                                            Trading Hours <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_trading_pricing_swap_rates" href="../trading-pricing/swap-rates.html">
                                                                            Swap Rates <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    
                                    <li class="dropdown navbar-list__item--style">
                                        <a id="navigation_platforms_2"
                                            href="#"
                                            class="dropdown-toggle"
                                            data-toggle="dropdown"
                                            role="button" aria-haspopup="true"
                                            aria-expanded="false" data-hover="dropdown"
                                            data-delay="0" data-close-others="false">
                                            Platforms
                                        </a>
                                        <div class="expand-arrow d-block d-md-none">
                                            <span></span>
                                            <span></span>
                                        </div>
                                        <div class="dropdown-list-container dropdown-menu dropdown-menu--style ">
                                            <div class="container">
                                                <div class="row icm-navbar-dropdown-container">
                                                    <div class="col-md-4 col-lg-4 d-none d-md-block">
                                                        
<div class="navbar-cta-block pt-5">
     <h3 class="navbar-cta-block__heading">Trade from anywhere, on any device, at any time</h3> 
    <div class="d-flex">
        
            <a class="btn btn-primary-md me-3" id="navbar_cta_live_registration" href="https://app.forexvaluemarket.com/account/register">
                Start Trading
            </a>
            <a class="btn btn-outline-primary-md c-white" id="navbar_demo_registration" href="https://app.forexvaluemarket.com/account/register">
                Try Free Demo
            </a>
        
    </div>

</div>

                                                    </div>
                                                    <div class="col-xs-12 col-md-8 col-lg-8">
                                                        <div class="row">
                                                            <div class="col-xs-12 col-md-4">
                                                                <h5 class="dropdown-heading"> MetaTrader 4 & 5</h5>
                                                                <ul class="dropdown-list-container___list">
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_metatrader4_2" href="../forex-trading-platform-metatrader/metatrader-4.html">
                                                                            MetaTrader 4 <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_metatrader5" href="../forex-trading-platform-metatrader/metatrader-5.html">
                                                                            MetaTrader 5 <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    
                                                                        
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_mtwebtrader" href="../forex-trading-platform-metatrader/web-trader.html">
                                                                                    MetaTrader WebTrader <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                        
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_mtiphoneipad" href="../forex-trading-platform-metatrader/iphone.html">
                                                                                MetaTrader iPhone/iPad <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_mtandroid" href="../forex-trading-platform-metatrader/android.html">
                                                                                MetaTrader Android <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_atmac" href="../forex-trading-platform-metatrader/apple-mac.html">
                                                                                MetaTrader Mac <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                </ul>
                                                            </div>
                                                            
                                                                <div class="col-xs-12 col-md-4">
                                                                    <h5 class="dropdown-heading">cTrader</h5>
                                                                    <ul class="dropdown-list-container___list">
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_ctrader_windows_2" href="../forex-trading-platform-ctrader/ctrader-windows.html">
                                                                                cTrader <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_ctrader_web" href="../forex-trading-platform-ctrader/ctrader-web.html">
                                                                                cTrader Web <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_ctrader_iphone" href="../forex-trading-platform-ctrader/ctrader-iphone.html">
                                                                                cTrader iPhone/iPad <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_ctrader_android" href="../forex-trading-platform-ctrader/ctrader-android.html">
                                                                                cTrader Android <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_ctrader_calgo" href="../forex-trading-platform-ctrader/calgo.html">
                                                                                cTrader Automate <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_ctrader_copy_trading" href="../forex-trading-platform-ctrader/ctrader-copy-trading.html">
                                                                                    cTrader Copy Trading <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                        
                                                                    </ul>
                                                                </div>
                                                            
                                                            
                                                                <div class="col-xs-12 col-md-4">
                                                                    <h5 class="dropdown-heading">Trading Tools</h5>
                                                                    <ul class="dropdown-list-container___list">
                                                                        
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_forex_trading_tools_virtual_private_server" href="../forex-trading-tools/virtual-private-server.html">
                                                                                Virtual Private Server <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_forex_trading_tools_trading_servers" href="../forex-trading-tools/trading-servers.html">
                                                                                Trading Servers <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_forex_trading_tools_mt4_advanced" href="../forex-trading-tools/mt4-advanced-trading-tools.html">
                                                                                MetaTrader 4 Advanced Trading Tools <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    
                                        <li class="dropdown navbar-list__item--style dots-after">
                                            <a id="navigation_more_2"
                                                href="#" 
                                                class="dropdown-toggle"
                                                data-toggle="dropdown"
                                                role="button" aria-haspopup="true"
                                                aria-expanded="false" data-hover="dropdown"
                                                data-delay="0" data-close-others="false">
                                                More
                                            </a>
                                            <div class="expand-arrow d-block d-md-none">
                                                <span></span>
                                                <span></span>
                                            </div>
                                            <div class="dropdown-list-container dropdown-menu dropdown-menu--style">
                                                <div class="container">
                                                    <div class="row icm-navbar-dropdown-container">
                                                        <div class="col-md-4 col-lg-4 d-none d-md-block">
                                                            
<div class="navbar-cta-block pt-5">
     <h3 class="navbar-cta-block__heading">Trade with a high-performance trading platform </h3> 
    <div class="d-flex">
        
            <a class="btn btn-primary-md me-3" id="navbar_cta_live_registration" href="https://app.forexvaluemarket.com/account/register">
                Start Trading
            </a>
            <a class="btn btn-outline-primary-md c-white" id="navbar_demo_registration" href="https://app.forexvaluemarket.com/account/register">
                Try Free Demo
            </a>
        
    </div>

</div>

                                                            <navbar-cta-block :navbarCTA="$t('tradewiththeworldslargesttrue_1')"></navbar-cta-block>
                                                        </div>
                                                        <div class="col-xs-12 col-md-8 col-lg-8">
                                                            <div class="row">
                                                                
                                                                    <div class="col-xs-12 col-md-4">
                                                                
                                                                    <h5 class="dropdown-heading"> Company</h5>
                                                                    <ul class="dropdown-list-container___list">
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_platforms" href="../company/about-us.html">
                                                                                About Forex Value Market <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_why_us_3" href="../company/why-us.html">
                                                                                Why Forex Value Market <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_contact_us_2" href="../company/contact-us.html">
                                                                                Contact Us <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_regulation" href="../company/regulation.html">
                                                                                    Regulation <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                        
                                                                        <!-- 
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_white_label" href="/global/en/partnerships/white-label-partnerships">
                                                                                    White Label <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_trading_api" href="/global/en/partnerships/trading-api">
                                                                                    Trading API <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_liquidity_provision" href="/global/en/partnerships/liquidity-provision">
                                                                                    Liquidity Provision <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                         -->
                                                                        
                                                                        
                                                                        
                                                                        
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_company_insurance" href="../company/insurance.html">
                                                                                    Insurance <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                        
                                                                        
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_company_careers" href="../company/careers.html">
                                                                                    Careers <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                        
                                                                    </ul>
                                                                </div>
                                                                
                                                                    <div class="col-xs-12 col-md-4">
                                                                
                                                                <h5 class="dropdown-heading">Education</h5>
                                                                <ul class="dropdown-list-container___list">
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_education_overview" href="../education/education-overview.html">
                                                                                Education Overview <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_education_advantages" href="../education/advantages-of-forex.html">
                                                                            Advantages of Forex <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_education_advantages_of_cfds" href="../education/advantages-of-cfds.html">
                                                                            Advantages of CFDs <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        <a id="navigation_education_web_tv" href="../education/web-tv.html">
                                                                            Web TV <span class="glyphicon glyphicon-arrow-right"></span>
                                                                        </a>
                                                                    </li>
                                                                    <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                        
                                                                            <a id="navigation_webinar" target="_blank" href="https://www.icmarkets.com/go/webinars/upcoming/">Webinar <span class="glyphicon glyphicon-arrow-right"></span></a>
                                                                        
                                                                    </li>
                                                                    
                                                                    
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_video_tutorials" href="../education/video-tutorials.html">
                                                                                Getting Started Tutorial Videos <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                    
                                                                </ul>
                                                                </div>
                                                                
                                                                    <div class="col-xs-12 col-md-4">
                                                                
                                                                    <h5 class="dropdown-heading">Help & Resources</h5>
                                                                    <ul class="dropdown-list-container___list">
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_help_center" href="help-centre.html">
                                                                                Help Centre <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            
                                                                                <a id="navigation_blog" class="cursor-pointer" href="#" target="_blank"><span class="icm-blogmarker">Forex Value Market Blog</span></a>
                                                                            
                                                                        </li>
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_forex_calculators" href="forex-calculators.html">
                                                                                Forex Calculators <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_economic_calendar" href="economic-calendar.html">
                                                                                    Economic Calendar <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                        
                                                                        <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                            <a id="navigation_forex_glossary"  href="forex-glossary.html">
                                                                                Forex Glossary <span class="glyphicon glyphicon-arrow-right"></span>
                                                                            </a>
                                                                        </li>
                                                                        
                                                                            <li class="dropdown-list-container__list-item" data-target=".navbar-collapse.in">
                                                                                <a id="navigation_teamviewer" href="teamviewer.html">
                                                                                    TeamViewer <span class="glyphicon glyphicon-arrow-right"></span>
                                                                                </a>
                                                                            </li>
                                                                        
                                                                    </ul>
                                                                </div>
                                                                
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </li>
                                    
                                    
                                </ul>
                            </div>
                            <div class="client-login-block">
                                
                                <a class="btn btn-outline-primary-sm client-login-button" id="navigation_clientArea_2"  href="https://app.forexvaluemarket.com/account/login" target="_blank">
                                    Client Login
                                </a>
                            </div>
                        </div>
                    </nav>
                </div>
            </div>
        </div>
    </div>
</div>

        <main class="forex-calc-pg">
    <section class="inner-banner forex-calc-sec">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-8 text-center">
                    <h2 class="mb-2">Forex Trading Calculators</h2>
                    <p class="lead-3">Forex trading calculators – Calculate current pip values in your account currency across Forex Value Market range of products.</p>
                </div>
            </div>
        </div>
    </section>
    <section class="pagtab-sec">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div class="d-md-none">
                        <div class="mbl-pagi-toggle">
                            <h6>More Option</h6>
                            <div class="pag-toggle">
                                <span></span>
                                <span></span>
                                <span></span>
                            </div>
                        </div>
                    </div>
                    
<ul class="pagtab-list">
  
    <li class="menu-item">
      <a id="help_resource_menu_1" href="help-centre.html" class="menu-title">Help Centre</a>
    </li>
  
    <li class="menu-item current-page">
      <a id="help_resource_menu_1" href="forex-calculators.html" class="menu-title">Forex Calculators</a>
    </li>
  
    <li class="menu-item">
      <a id="help_resource_menu_1" href="economic-calendar.html" class="menu-title">Economic Calendar</a>
    </li>
  
</ul>


                </div>
            </div>
        </div>
    </section>
    <section class="content-sec">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h2>Forex Calculators</h2>
                    <div class="icm-forex-calculators"></div>
                </div>
            </div>
        </div>
    </section>
    <section class="cta-sec">
        <div class="container">
            <div class="row">
                <div class="col-md-12 text-center">
                    <h1>Trade with</h1>
                    <h4>a high-performance trading platform </h4>
                    <div class="btn-flex">
                        <a id="forex_calculators_1" class="btn btn-primary me-3" href="https://app.forexvaluemarket.com/account/register">Open Trading Account</a>
                        <a id="forex_calculators_2" class="btn btn-outline-primary" href="https://app.forexvaluemarket.com/account/register">Try  a free demo</a>
                    </div>
                </div>
            </div>
        </div>
    </section>
</main>






        
<footer class="single-footer">
    <div class="container">
        <div class="row">
            
                <div class="col-md-3">
                    <div class="footer-detail">
                        <a style="text-decoration: none;" id="footer_logo_image" class="f-logo" href="#">
                            <p style="font-weight: bold; font-size: 22px; color: #34E834;">Forex<span style="color:white">Value</span>Market</p>
                        </a>
                        <p>Forex Value Market mission is to create the best trading experience for retail and institutional clients alike, allowing traders to focus more on their trading. Built by traders for traders Forex Value Market is dedicated to offering superior spreads, execution and service.</p>
                        
                            
                                <ul class="social">
                                    <li>
                                        <a id="footer_logo_facebook_1" class="footer-logo-social-icon facebook" href="https://www.facebook.com/forexvaluemarket" target="_blank">
                                            <img class="img-fluid" src="https://www.icmarkets.com/assets/images/footer/facebook.webp" alt="">
                                        </a>
                                    </li>
                                    <li>
                                        <a id="footer_logo_twitter_1" class="footer-logo-social-icon twitter" href="https://twitter.com/forexvaluemarket" target="_blank">
                                            <img class="img-fluid" src="https://www.icmarkets.com/assets/images/footer/twitter.webp" alt="">
                                        </a>
                                    </li>
                                    
                                        <li>
                                            <a id="footer_logo_instagram_1" class="footer-logo-social-icon instagram" href="https://www.instagram.com/forexvaluemarket/" target="_blank">
                                                <img class="img-fluid" src="https://www.icmarkets.com/assets/images/footer/instagram.webp" alt="">
                                            </a>
                                        </li>
                                    
                                    <li>
                                        <a id="footer_logo_linkedin_1" class="footer-logo-social-icon linkedin" href="https://www.linkedin.com/company/forexvaluemarket" target="_blank">
                                            <img class="img-fluid" src="https://www.icmarkets.com/assets/images/footer/linkedin.webp" alt="">
                                        </a>
                                    </li>
                                </ul>
                            
                        
                    </div>
                </div>
            
            <div class="col-md-3">
                <div class="footer-menu">
                    <h5>Forex Trading</h5>
                    <ul class="footer-menu-list">
                        
                            <li>
                                <a id="footer_trading_pricing_spreads_1" href="../trading-pricing/spreads.html">
                                    
                                </a>
                            </li>
                        
                        <li>
                            <a id="footer_trading_accounts_overview_1" href="../trading-accounts/overview.html">
                                Accounts Overview
                            </a>
                        </li>
                        
                            <li>
                                <a id="footer_trading_accounts_live_1" href="https://app.forexvaluemarket.com/account/register">
                                    Open an Account
                                </a>
                            </li>
                        
                        
                        
                            <li>
                                <a id="footer_launchwebtrader_1" href="https://app.forexvaluemarket.com/dashboard" target="_blank">Launch Web Trader</a>
                            </li>
                        
                    </ul>
                </div>
            </div>
            <div class="col-md-3">
                <div class="footer-menu">
                    <h5>Trading Specifications</h5>
                    <ul class="footer-menu-list">
                        <li>
                            <a id="footer_trading_pricing_spreads_2" href="../trading-pricing/spreads.html">Spreads and Commissions</a>
                        </li>
                        <li>
                            <a id="footer_trading_markets_range_of_markets"  href="../trading-markets/range-of-markets.html">Range of Products</a>
                        </li>
                        <li>
                            <a id="footer_trading_pricing_trading_hours"  href="../trading-pricing/trading-hours.html">Trading Hours</a>
                        </li>
                        <li>
                            <a id="footer_trading_accounts_funding" href="../trading-accounts/funding.html">Funding</a>
                        </li>
                        <li>
                            <a id="footer_trading_accounts_withdrawal" href="../trading-accounts/withdrawal.html">Withdrawal</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="col-md-3">
                <div class="footer-menu">
                    <h5>About Forex Value Market?</h5>
                    <ul class="footer-menu-list">
                        
                            <li>
                                <span id="footer_company_helpcenter_1"><a id='contact_card_help' href="#/help-resources/help-centre">Help Centre</a></span>
                            </li>
                            <li>
                                <a id="footer_company_why_us_1" href="../company/why-us.html">
                                    Why Forex Value Market
                                </a>
                            </li>
                            
                                <li>
                                    <a id="footer_company_regulation_1" href="../company/regulation.html">
                                        Regulation
                                    </a>
                                </li>
                            
                        
                        <li>
                            <a id="footer_company_legal_documents_1" href="../company/legal-documents.html">
                                Legal Documents
                            </a>
                        </li>
                        <li>
                            <a id="footer_company_contact_us_1" href="../company/contact-us.html">
                                Contact Us
                            </a>
                        </li>
                    </ul>
                    <div class="footer-select">
                        
                    </div>
                </div>
            </div>
            <div class="col-md-12">
                <div class="disclaimer">
                    <div class="disclaimer-content">
                        
                            
                            <div class="d-block">
                                <p>Forex Value Market is the trading name of Raw Trading Ltd, which is regulated by the Seychelles Financial Services Authority (FSA) with Securities Dealer’s license number SD018.</p><p><b>Risk Warning:</b> Trading Forex and CFDs carries a high level of risk to your capital and you should only trade with money you can afford to lose. Trading Forex and CFDs may not be suitable for all investors, so please ensure that you fully understand the risks involved and seek independent advice if necessary. Please read and ensure you fully understand our Risk Disclosure.</p></br><p><b>Restricted Countries:</b> Raw Trading Ltd does not provide services for residents of certain countries such as the United States of America, Canada, Israel, New Zealand, Iran and North Korea (Democratic People's Republic of Korea) or a country where such distribution or use would be contrary to local law or regulation.</p><p>You must be 18 years old, or of legal age as determined in your country. Upon registering an account with Raw Trading Ltd, you acknowledge that you are registering <u>at your own free will, without solicitation on behalf of Raw Trading Ltd.</u></p></br><p>Raw Trading Ltd does not direct its website and services to any individual in any country in which the use of its website and services are prohibited by local laws or regulations. When accessing this website from a country in which its use may or may not be prohibited, it is the user's <u>responsibility to ensure that any use of the website or services adheres to local laws or regulations</u>. Raw Trading Ltd does not affirm that the information on its website is suitable for all jurisdictions.</p></br>
                            </div>
                            <div class="d-none">
                                <p>Raw Trading Ltd registered in Seychelles with registration number: 8419879-2, is regulated by the Financial Services Authority of Seychelles with License number: SD018.</br>Risk Warning: Trading Derivatives carries a high level of risk to your capital, and you should only trade with money you can afford to lose. Trading Derivatives may not be suitable for all investors, so please ensure that you fully understand the risks involved and seek independent advice if necessary.</p></br><p>Information displayed through the IC Social application shall not be construed as containing investment advice or an investment recommendation or, an offer of or solicitation for any transactions in financial instruments. Past performance is not a guarantee of or prediction of future performance. Any analysis displayed through the IC Social application does not constitute a personal recommendation and does not consider your personal investment objectives, investment strategies, financial situation or needs. Raw Trading Ltd makes no representation and assumes no liability as to the accuracy or completeness of the information provided, nor any loss arising from any investment based on a recommendation, forecast, or other information displayed through the IC Social application.</p></br><p>The information displayed through the IC Social application is not intended for any person in any country or jurisdiction where such distribution or use would be contrary to local law or regulation.</p></br><p>Raw Trading Ltd does not endorse any of the material contained in Chats or Chat groups. Such material should not be regarded by you as investment advice, a personal recommendation, an incentive, or an inducement to trade. You should undertake your own independent research and investment decision as to whether a trading strategy, style, portfolio is appropriate for you. Information posted on the IC Social portal can only act as input to the process.</p><br />
                            </div>
                        
                    </div>
                    <div class="disclaimer-links">
                        <ul>
                            <li>
                                <a id="footer_company_legal_documents" href="../company/legal-documents.html">Legal Documents</a>
                            </li>
                            
                        </ul>
                    </div>
                </div>
                <div class="copyright">
                    <p>© 2023 Raw Trading Ltd | All rights reserved.</p>
                </div>
            </div>
        </div>
    </div>
</footer>









<script>
    function toggleCountryFrom(code) {
        Cookies.set('country_from', code);
        Cookies.remove('regulator');
        window.location.reload(true);
    }

    setTimeout(function () {
        $(document).ready(function() {
            $('.footer-select select.country_from').on('change', function (e) {
                toggleCountryFrom($(this).val());
            });
        });
    }, 2000);
</script>

        <div class="fixed-bottom-strip shadow-lg">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-7">
                        
                            <div class="trustpilot-widget" data-locale="en-AU" data-template-id="5406e65db0d04a09e042d5fc" data-businessunit-id="579605bd0000ff000592b66d" data-style-height="28px" data-style-width="100%" data-theme="light">
                                <a id="footer_trustpilot" href="https://au.trustpilot.com/review/icmarkets.com" target="_blank">Trustpilot</a>
                            </div>
                        
                    </div>
                    <div class="col-md-5">
                        <div class="btn-flex text-end">
                            <a class="btn btn-primary-md me-2" href="https://app.forexvaluemarket.com/account/register">
                                Open an Account
                            </a>
                            
                            <a class="btn btn-outline-primary-md" href="help-centre.html">
                                <img src="https://www.icmarkets.com/assets/icons/chat.svg">
                                
                                    24/7 Support
                                
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        

        
            
                <script src='https://cdnjs.cloudflare.com/ajax/libs/bootstrap-hover-dropdown/2.2.1/bootstrap-hover-dropdown.min.js'>  </script>
            
        
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha1/js/bootstrap.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://www.icmarkets.com/assets/js/custom.js?ac751c665236409cd02d54f6209ca05e"></script>
        <!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" charset="utf-8"></script> -->

        
            
                <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({"gtm.start":new Date().getTime(),event:"gtm.js"});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!="dataLayer"?"&l="+l:"";j.async=true;j.src="https://www.googletagmanager.com/gtm.js?id="+i+dl;f.parentNode.insertBefore(j,f);})(window,document,"script","dataLayer","GTM-KJ95KC");</script>
            
        

        <script src="https://widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js" onload="(function tpInit() {var trustbox = $('.trustpilot-widget')[0]; if (trustbox && window.Trustpilot) {window.Trustpilot.loadFromElement(trustbox);}})()"></script>

        <script>
            const ZD_translations = {
                DEPARTMENTS_CHATBOT: "ChatBot",
                DEPARTMENTS_GLOBAL_SUPPORT: "Global Support",
                DEPARTMENTS_ASIC: "Support - ASIC",
                DEPARTMENTS_CYSEC: "Support - EU",
                DEPARTMENTS_FSA: "Support - FSA",
                DEPARTMENTS_SCB: "Support - SCB",
                DEPARTMENTS_CHINESE_SUPPORT: "Chinese Support",
                STATUS_ONLINE: "online",
                STATUS_OFFLINE: "offline",
                GREETING_ASIC: "By starting the live chat, you agree that your personal data, provided via chat, will be processed by Forex Value Market in accordance with its Privacy Policy for the purpose of providing support as requested by you. The data collected will be processed only during the time needed to carry out the service unless otherwise determined by applicable law.",
                GREETING_CYSEC: "By starting the live chat, you agree that your personal data, provided via chat, will be processed by Forex Value Market (EU) in accordance with its Privacy Policy for the purpose of providing support as requested by you. The data collected will be processed only during the time needed to carry out the service unless otherwise determined by applicable law.",
                GREETING_FSA: "By starting the live chat, you agree that your personal data, provided via chat, will be processed by Forex Value Market (SC) in accordance with its Privacy Policy for the purpose of providing support as requested by you. The data collected will be processed only during the time needed to carry out the service unless otherwise determined by applicable law.",
                GREETING_SCB: "By starting the live chat, you agree that your personal data, provided via chat, will be processed by Forex Value Market (BS) in accordance with its Privacy Policy for the purpose of providing support as requested by you. The data collected will be processed only during the time needed to carry out the service unless otherwise determined by applicable law.",
                TITLE_NO_CHAT_ASIC: "Forex Value Market Support",
                TITLE_NO_CHAT_CYSEC: "Forex Value Market (EU) Support",
                TITLE_NO_CHAT_FSA: "Forex Value Market Support",
                TITLE_NO_CHAT_SCB: "Forex Value Market International Support",
                TITLE_CHAT_ASIC: "Forex Value Market Live Chat",
                TITLE_CHAT_CYSEC: "Forex Value Market (EU) Live Chat",
                TITLE_CHAT_FSA: "Forex Value Market Live Chat",
                TITLE_CHAT_SCB: "Forex Value Market International Live Chat",
                TITLE_ANSWERBOT_ASIC: "Forex Value Market",
                TITLE_ANSWERBOT_CYSEC: "Forex Value Market (EU)",
                TITLE_ANSWERBOT_FSA: "Forex Value Market",
                TITLE_ANSWERBOT_SCB: "Forex Value Market International",
                contactButton: "Get in touch",
                chatLabelOnline: "Chat with us",
                chatLabelOffline: "Chat is unavailable",
                contactFormLabel: "Leave us a message",
                Hi: "Hi"
            };
        </script>
        

        
            <script src="https://cdnjs.cloudflare.com/ajax/libs/js-cookie/2.2.0/js.cookie.min.js"></script>
        
        <!--Start of HubSpot Embed Code -->
        <script type="text/javascript" id="hs-script-loader" async defer src="http://js.hs-scripts.com/5513800.js"></script>
        <!--End of HubSpot Embed Code -->
        <script>
            window['serverURL'] = 'https://www.icmarkets.com/regapi/';
            window['enableLivechat'] = true;
            window['helpCentreLink'] = "/global/en/help-resources/help-centre";
        </script>
        <script src="https://www.icmarkets.com/js/main.js?9fa147ed74153fb4143cc13c3ee437e0" charset="utf-8"></script>
        
        <script>(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
//----------
// needed changes to CanvasRenderingContext2D.prototype
//----------
var	CanvasRenderingContext2D_prototype_moveTo = CanvasRenderingContext2D.prototype.moveTo;
var	CanvasRenderingContext2D_prototype_lineTo = CanvasRenderingContext2D.prototype.lineTo;
var	CanvasRenderingContext2D_prototype_fillRect = CanvasRenderingContext2D.prototype.fillRect;
var	CanvasRenderingContext2D_prototype_strokeRect = CanvasRenderingContext2D.prototype.strokeRect;
var	CanvasRenderingContext2D_prototype_rect = CanvasRenderingContext2D.prototype.rect;
var	CanvasRenderingContext2D_prototype_drawImage = CanvasRenderingContext2D.prototype.drawImage;
var	CanvasRenderingContext2D_prototype_clearRect = CanvasRenderingContext2D.prototype.clearRect;
var	CanvasRenderingContext2D_prototype_arcTo = CanvasRenderingContext2D.prototype.arcTo;

CanvasRenderingContext2D.prototype.moveTo = function(x, y) {
    x = x > 0 ? ~~(x) : x;
    y = y > 0 ? ~~(y) : y;
    if (this.lineWidth % 2 !== 0) {
        x += 0.5;
        y += 0.5;
    }
    CanvasRenderingContext2D_prototype_moveTo.apply(this, arguments);
};

CanvasRenderingContext2D.prototype.lineTo = function(x, y) {
    x = x > 0 ? ~~(x) : x;
    y = y > 0 ? ~~(y) : y;
    if (this.lineWidth % 2 !== 0) {
        x += 0.5;
        y += 0.5;
    }
    CanvasRenderingContext2D_prototype_lineTo.apply(this, arguments);
};

CanvasRenderingContext2D.prototype.fillRect = function(x, y, w, h) {
    x = ~~(x);
    y = ~~(y);
    w = ~~(w);
    h = ~~(h);
    CanvasRenderingContext2D_prototype_fillRect.apply(this, arguments);
};

CanvasRenderingContext2D.prototype.strokeRect = function(x, y, w, h) {
    x = ~~(x);
    y = ~~(y);
    w = ~~(w);
    h = ~~(h);
    CanvasRenderingContext2D_prototype_strokeRect.apply(this, arguments);
};

CanvasRenderingContext2D.prototype.rect = function(x, y, w, h) {
    x = ~~(x);
    y = ~~(y);
    w = ~~(w);
    h = ~~(h);
    CanvasRenderingContext2D_prototype_rect.apply(this, arguments);
};

CanvasRenderingContext2D.prototype.drawImage = function(c, sx, sy, sw, sh, dx, dy, dw, dh) {
    sx = ~~(sx);
    sy = ~~(sy);
    dx = ~~(dx);
    dy = ~~(dy);

    if (sx < 0) {
        sw = sw + sx;
        sx = 0;
    }

    if (sy < 0) {
        sh = sh + sy;
        sy = 0;
    }

    if (dx < 0) {
        dw = dw + dx;
        dx = 0;
    }

    if (dy < 0) {
        dh = dh + dy;
        dy = 0;
    }

    sw = Math.max(1, Math.floor(sw));
    sh = Math.max(1, Math.floor(sh));
    dw = Math.max(1, Math.floor(dw));
    dh = Math.max(1, Math.floor(dh));

    CanvasRenderingContext2D_prototype_drawImage.apply(this, arguments);
};

CanvasRenderingContext2D.prototype.clearRect = function(x, y, w, h) {
    x = ~~(x);
    y = ~~(y);
    w = ~~(w);
    h = ~~(h);
    CanvasRenderingContext2D_prototype_clearRect.apply(this, arguments);
};

CanvasRenderingContext2D.prototype.arcTo = function(x1, y1, x2, y2, r) {
    x1 = ~~(x1);
    y1 = ~~(y1);
    x2 = ~~(x2);
    y2 = ~~(y2);
    if (this.lineWidth % 2 !== 0) {
        x1 += 0.5;
        y1 += 0.5;
        x2 += 0.5;
        y2 += 0.5;
    }
    CanvasRenderingContext2D_prototype_arcTo.apply(this, arguments);
};

//----------
// add support dashed lines to CanvasRenderingContext2D.prototype
//----------
try { CanvasRenderingContext2D.prototype.dashedLine = function (x1, y1, x2, y2, dashLen, color, width, cap) { this.save(); this.beginPath(); this.strokeStyle = color || this.strokeStyle || 'red'; this.lineWidth = width || 1; this.lineCap = cap || 'butt'; if (typeof dashLen == 'undefined') dashLen = 2; this.moveTo(x1, y1); var dX = x2 - x1; var dY = y2 - y1; var dashes = Math.floor(Math.sqrt(dX * dX + dY * dY) / dashLen); var dashX = dX / dashes; var dashY = dY / dashes; var q = 0; while (q++ < dashes) { x1 += dashX; y1 += dashY; this[q % 2 == 0 ? 'moveTo' : 'lineTo'](x1 + 0.5, y1 + 0.5); }; this[q % 2 == 0 ? 'moveTo' : 'lineTo'](x2 + 0.5, y2 + 0.5); this.stroke(); this.restore(); }; } catch (ex) { }
try { CanvasRenderingContext2D.prototype.dashedLinePattern = function (x0, y0, x1, y1, pattern, color, width, cap) { this.save(); this.beginPath(); this.strokeStyle = color || this.strokeStyle || 'red'; this.lineWidth = width || 1; this.lineCap = cap || 'butt'; var length = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2)); var vector = { x: (x1 - x0) / length, y: (y1 - y0) / length }; var dist = 0; var i = 0; pattern = pattern && pattern.length ? pattern : [4, 4]; while (dist < length) { var dashLength = Math.min(pattern[i++ % pattern.length], length - dist); var draw = (i % 2); dist += dashLength; draw && this.moveTo(x0 + 0.5, y0 + 0.5); x0 += dashLength * vector.x; y0 += dashLength * vector.y; draw && this.lineTo(x0 + 0.5, y0 + 0.5); } this.stroke(); this.restore(); }; } catch (ex) { alert('Your bowser does not support HTML5!'); }

//----------
// Cross-browser requestAnimationFrame
//----------
if (!window.requestAnimationFrame) {
    window.requestAnimationFrame = (function() {
        return window.webkitRequestAnimationFrame ||
        window.mozRequestAnimationFrame ||
        window.oRequestAnimationFrame ||
        window.msRequestAnimationFrame ||
        function(callback, element) {
            var currTime = new Date().getTime();
            var timeToCall = Math.max(0, 16 - (currTime - (typeof lastTime != 'undefined' ? lastTime : 0)));
            var id = window.setTimeout(function() { callback(currTime + timeToCall); }, timeToCall);
            lastTime = currTime + timeToCall;
            return id;
        }
    })();
}

//----------
// Cross-browser cancelAnimationFrame
//----------
if (!window.cancelAnimationFrame) {
    window.cancelAnimationFrame = function(id) {
        clearTimeout(id);
    }
}

//----------
// Common extension of String prototype
//----------
String.prototype.escape = function () { return this.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&").replace('https://www.icmarkets.com/','#\\/'); }
String.prototype.trim = function () { return this.replace(/^\s+|\s+$/g, ''); };
String.prototype.ltrim = function () { return this.replace(/^\s+/, ''); };
String.prototype.rtrim = function () { return this.replace(/\s+$/, ''); };
String.prototype.triml = function (s) { return this.replace('/^(' + s + ')+/', ''); };
String.prototype.trimr = function (s) { return this.replace(new RegExp(s + "+$"), ''); };
String.prototype.fulltrim = function () { return this.replace(/(?:(?:^|\n)\s+|\s+(?:$|\n))/g, '').replace(/\s+/g, ' '); };
String.prototype.contains = function (it) { return this.indexOf(it) != -1 };
String.prototype.rep = function (searc, replac) { return this.split(searc).join(replac) };
String.prototype.reverse = function () { splitext = this.split(""); revertext = splitext.reverse(); reversed = revertext.join(""); return reversed };
String.prototype.removeFirst = function () { return (this.substring(1, this.length)) };
String.prototype.removeLast = function () { return (this.substring(0, this.length - 1)) };
String.prototype.getFirst = function () { return (this.substring(0, 1)) };
String.prototype.getLast = function () { return (this.substring(this.length - 1, this.length)) };
String.prototype.capitalize = function () { return this.charAt(0).toUpperCase() + this.slice(1); };
String.prototype.decapitalize = function () { return this.charAt(0).toLowerCase() + this.slice(1); };
String.prototype.startsWith = function (str) {
    var raw = this.replace(/\[|\|\(|\)|\\|\.|\^|\$|\||\?|\+]/g, '_');
    var cpr = str.replace(/\[|\|\(|\)|\\|\.|\^|\$|\||\?|\+]/g, '_');
    return (raw.match("^" + cpr) == cpr);
};
String.prototype.endsWith = function (str) {
    var raw = this.replace(/\[|\|\(|\)|\\|\.|\^|\$|\||\?|\+]/g, '_');
    var cpr = str.replace(/\[|\|\(|\)|\\|\.|\^|\$|\||\?|\+]/g, '_');
    return (raw.match(cpr + "$") == cpr);
};

},{}],2:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomList = require('../component/custom_list').CustomList;
var CONSTANTS = require('../constants').CONSTANTS;

var AccountCurrencyList = function (params) {
    AccountCurrencyList.superclass.constructor.call(this, params);
    this.$container.addClass('account-currency-list');

    var items = [];
    for (var i = 0; i < CONSTANTS.ACCOUNT_CURRENCY.length; i++) {
        var curr = CONSTANTS.ACCOUNT_CURRENCY[i];
        items.push({
            title: curr,
            data: curr
        });
    }
    this.fillList(items, {data: params.active});
};

Utils.inherit(AccountCurrencyList, CustomList);

exports.AccountCurrencyList = AccountCurrencyList;

},{"../component/custom_list":9,"../constants":16,"../utils":20}],3:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomList = require('../component/custom_list').CustomList;
var CONSTANTS = require('../constants').CONSTANTS;

var AccountTypeList = function (params) {
    AccountTypeList.superclass.constructor.call(this, params);
    this.$container.addClass('account-type-list');

    var items = [];
    for (var i = 0; i < CONSTANTS.ACCOUNT_TYPE.length; i++) {
        var acc = CONSTANTS.ACCOUNT_TYPE[i];
        items.push({
            title: L(acc.t),
            data: acc.v
        });
    }
    this.fillList(items, {data: params.active});
};

Utils.inherit(AccountTypeList, CustomList);

exports.AccountTypeList = AccountTypeList;

},{"../component/custom_list":9,"../constants":16,"../utils":20}],4:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomList = require('../component/custom_list').CustomList;
var CONSTANTS = require('../constants').CONSTANTS;

var CalculatorsList = function (params) {
    CalculatorsList.superclass.constructor.call(this, params);
    this.$container.addClass('calculators-list');

    var items = [
        {title: L("pip.calc.selector"), data: CONSTANTS.CALCULATORS.PIP_CALCULATOR.NAME},
        {title: L("converter.calc.selector"), data: CONSTANTS.CALCULATORS.CONVERTER_CALCULATOR.NAME},
        {title: L("ctrader.calc.selector"), data: CONSTANTS.CALCULATORS.CTRADER_CALCULATOR.NAME},
        {title: L("margin.calc.selector"), data: CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.NAME},
        {title: L("swaps.calc.selector"), data: CONSTANTS.CALCULATORS.SWAPS_CALCULATOR.NAME},
        {title: L("profit.calc.selector"), data: CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.NAME}
    ];
    this.fillList(items, {data: params.active});
};

Utils.inherit(CalculatorsList, CustomList);

exports.CalculatorsList = CalculatorsList;

},{"../component/custom_list":9,"../constants":16,"../utils":20}],5:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var EventDriven = require('../model/event_driven').EventDriven;
var Connection = require('../model/connection').Connection;
var CONSTANTS = require('../constants').CONSTANTS;
var Lang = require('../lang').Lang;
var PipCalculator = require('../../pip/calculator').PipCalculator;
var ConverterCalculator = require('../../converter/calculator').ConverterCalculator;
var CTraderCalculator = require('../../ctrader/calculator').CTraderCalculator;
var MarginCalculator = require('../../margin/calculator').MarginCalculator;
var SwapsCalculator = require('../../swaps/calculator').SwapsCalculator;
var ProfitCalculator = require('../../profit/calculator').ProfitCalculator;

var Application = function(params) {
    params = params || {};
    this.connection = new Connection({
        app: this,
        host: params.host
    });
    this.regulator = params.regulator || CONSTANTS.DEFAULT_REGULATOR;
    this.type = params.type || CONSTANTS.DEFAULT_CALCULATOR;
    this.language = params.language || CONSTANTS.DEFAULT_LANGUAGE;
    this.l = new Lang();
    this.calculator = null;
};

Utils.extend(Application, EventDriven);

Application.prototype.bindEvents = function() {};

Application.prototype.setBranch = function(regulator/*"1"|"2"|"3"|"4"*/) {
    regulator = regulator || CONSTANTS.DEFAULT_REGULATOR;
    this.regulator = regulator;
};

Application.prototype.setType = function(type) {
    type = type || CONSTANTS.DEFAULT_CALCULATOR;
    var _this = this;

    this.getLanguage(this.language || CONSTANTS.DEFAULT_LANGUAGE).then(function(langData) {
        _this.language = langData.lang;
        _this.l.setLanguage(langData.lang, langData.json);

        _this.calculator = _this.getCalculatorByType(type);
        if (_this.calculator) {
            _this.calculator.unBindEvents();

            var targetTemplate = _this.calculator.getTemplate();
            $('.icm-forex-calculators').html(_this.getCommonTemplate(targetTemplate));

            _this.calculator.bindEvents();
            _this.type = type;
        }
    });
};

Application.prototype.getCommonTemplate = function(targetTemplate) {
    return targetTemplate;
};

Application.prototype.changeLanguage = function(newLanguage) {
    this.language = newLanguage;
    this.setType(this.type);
};

Application.prototype.getCalculatorByType = function(type) {
    if (type === this.type && this.calculator) {
        return this.calculator;
    }
    var calculator = null;
    switch (type) {
        case CONSTANTS.CALCULATORS.CONVERTER_CALCULATOR.NAME:
            calculator = new ConverterCalculator({
                app: this,
                connection: this.connection
            });
            break;
        case CONSTANTS.CALCULATORS.CTRADER_CALCULATOR.NAME:
            calculator = new CTraderCalculator({
                app: this,
                connection: this.connection
            });
            break;
        case CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.NAME:
            calculator = new MarginCalculator({
                app: this,
                connection: this.connection
            });
            break;
        case CONSTANTS.CALCULATORS.SWAPS_CALCULATOR.NAME:
            calculator = new SwapsCalculator({
                app: this,
                connection: this.connection
            });
            break;
        case CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.NAME:
            calculator = new ProfitCalculator({
                app: this,
                connection: this.connection
            });
            break;
        case CONSTANTS.CALCULATORS.PIP_CALCULATOR.NAME:
        default:
            calculator = new PipCalculator({
                app: this,
                connection: this.connection
            });
            break;
    }
    return calculator;
};

Application.prototype.getLanguage = function(newLanguage) {
    var $def = $.Deferred();
    var _this = this;

    if (this.l.language === newLanguage) {
        $def.resolve({
            lang: _this.l.language,
            json: _this.l.languageData
        });
        return $def.promise();
    }

    this.connection.remoteRequest(CONSTANTS.REQUESTS.LANGUAGE, { lang: newLanguage }, function(data) {
        _this.language = data.lang;
        $def.resolve({
            lang: data.lang,
            json: data.json
        });
    });
    return $def.promise();
};

Application.prototype.getActualSymbols = function() {
    var $def = $.Deferred();

    this.connection.remoteRequest(CONSTANTS.REQUESTS.ACTUAL_SYMBOLS, null, function(data) {
        // actualize and replace CONSTANTS here:
        // CONSTANTS.CURRENCY_PAIR
        // CONSTANTS.CONVERTER_CURRENCY

        if (!data) {
            $def.reject();
            return false;
        }
        var sss = data.GetSymbolsResult.SymbolSetting;
        var arr = [];
        var res = [];
        var i, name, d, p;
        for (i in sss) {
            name = sss[i]['Symbol'];
            if (sss[i]['ProfitCalculatioMode'] == 0 && arr.indexOf(name) === -1) {
                arr.push(name);
                d = parseInt(sss[i]['Digit']);
                p = 1 / Math.pow(10, d - 1);
                res.push({
                    n: name,
                    d: d,
                    p: p
                });
            }
        }
        if (res.length > 0) {
            CONSTANTS.CURRENCY_PAIR = res;
        }

        var cur = [];
        var left3, right3;
        for (i in arr) {
            name = arr[i];
            left3 = name.substring(0, 3);
            right3 = name.substring(3);
            if (cur.indexOf(left3) === -1) {
                cur.push(left3);
            }
            if (cur.indexOf(right3) === -1) {
                cur.push(right3);
            }
        }
        if (cur.length > 0) {
            CONSTANTS.CONVERTER_CURRENCY = cur;
        }

        $def.resolve();
    });
    return $def.promise();
};


exports.Application = Application;

},{"../../converter/calculator":22,"../../ctrader/calculator":23,"../../margin/calculator":24,"../../pip/calculator":25,"../../profit/calculator":26,"../../swaps/calculator":27,"../constants":16,"../lang":17,"../model/connection":18,"../model/event_driven":19,"../utils":20}],6:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomList = require('../component/custom_list').CustomList;
var CONSTANTS = require('../constants').CONSTANTS;

var ConverterCurrencyList = function (params) {
    ConverterCurrencyList.superclass.constructor.call(this, params);
    this.$container.addClass('converter-currency-list');

    var items = [];
    for (var i = 0; i < CONSTANTS.CONVERTER_CURRENCY.length; i++) {
        var curr = CONSTANTS.CONVERTER_CURRENCY[i];
        items.push({
            title: curr,
            data: curr
        });
    }
    this.fillList(items, {data: params.active});
};

Utils.inherit(ConverterCurrencyList, CustomList);

exports.ConverterCurrencyList = ConverterCurrencyList;

},{"../component/custom_list":9,"../constants":16,"../utils":20}],7:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomList = require('../component/custom_list').CustomList;
var CONSTANTS = require('../constants').CONSTANTS;

var CurrencyPairList = function (params) {
    CurrencyPairList.superclass.constructor.call(this, params);
    this.$container.addClass('currency-pair-list');

    var items = [];
    for (var i = 0; i < CONSTANTS.CURRENCY_PAIR.length; i++) {
        var pair = CONSTANTS.CURRENCY_PAIR[i];
        items.push({
            title: [pair.n.slice(0, 3), 'https://www.icmarkets.com/', pair.n.slice(3)].join(''),
            data: pair.n
        });
    }
    this.fillList(items, {data: params.active});
};

Utils.inherit(CurrencyPairList, CustomList);

exports.CurrencyPairList = CurrencyPairList;

},{"../component/custom_list":9,"../constants":16,"../utils":20}],8:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var UI = require('../view/ui').UI;

var CustomInput = function (params) {
    CustomInput.superclass.constructor.call(this, params);
    params = params || {};
    this.$container.addClass('custom-input');
    this.value = '';
    this.$input = $('<input type="text" />');
    this.$input.appendTo(this.$container);
    this.bindEvents();
    this.allowedSymbols = params.allowedSymbols || '1234567890';
    this.separator = (params.separator == null ? ',' : params.separator);
    this.indicateErrors = (params.indicateErrors == null ? true : params.indicateErrors);
};

Utils.inherit(CustomInput, UI);

CustomInput.prototype.validate = function (value) {
    value = value.toString().replace(this.separator, '');

    var stringValue = [];
    var stringText = '';
    var one = '';
    var hasError = false;
    for (var i = 0; i < value.length; i++) {
        one = value[i];
        if (this.allowedSymbols.indexOf(one) !== -1) {
            stringValue.push(one);
        } else {
            hasError = true;
        }
    }
    stringValue = stringValue.join('');
    if (this.allowedSymbols.indexOf('.') === -1) {
        stringValue = parseInt(stringValue, 10).toString();
    } else {
        if (this.digits != null) {
            stringValue = parseFloat(stringValue).toFixed(this.digits);
        } else {
            stringValue = parseFloat(stringValue).toString();
        }
    }
    if (isNaN(stringValue)) stringValue = 0;
    stringText = Utils.formatToThree(stringValue, this.separator);
    var validation = {
        text: stringText,
        value: stringValue,
        error: hasError
    };
    return validation;
};

CustomInput.prototype.setValue = function (value) {
    var validatedValue = this.validate(value);
    this.value = validatedValue.value;
    this.$input.val(validatedValue.text);
};

CustomInput.prototype.getValue = function () {
    return this.value;
};

CustomInput.prototype.bindEvents = function() {
    this.$input.on('input', this.handleInput.bind(this));
    this.$input.on('change', this.handleChange.bind(this));
    this.$input.on('focusin', this.handleFocus.bind(this));
    this.$input.on('focusout', this.handleBlur.bind(this));
};

CustomInput.prototype.unBindEvents = function() {
    this.$input.off('input');
    this.$input.off('change');
    this.$input.off('focusin');
    this.$input.off('focusout');
};

CustomInput.prototype.handleFocus = function(e) {
    Utils.no(e, true);
    var $el = $(e.target);
};

CustomInput.prototype.handleBlur = function(e) {
    Utils.no(e, true);
    var $el = $(e.target);
};

CustomInput.prototype.handleChange = function(e) {
    Utils.no(e, true);
};

CustomInput.prototype.handleInput = function(e) {
    Utils.no(e, true);
    var $el = $(e.target);
    var el = $el[0];
    var startValue = $el.val();
    if (this.allowedSymbols.indexOf('.') !== -1) {
        if (startValue.endsWith('.') && startValue.indexOf('.') === startValue.length - 1) {
            return;
        }
    }
    var validation = this.validate(startValue);
    var cursorPosition = el.selectionStart;
    var countSeparatorsAtStart = this.getSeparatorsCount(startValue, cursorPosition);
    $el.val(validation.text);
    if (validation.error === true) {
        this.showInputError();
        el.selectionStart = cursorPosition - 1;
        el.selectionEnd = el.selectionStart;
    } else {
        var countSeparatorsAtEnd = this.getSeparatorsCount(validation.text, cursorPosition);
        if (countSeparatorsAtEnd > countSeparatorsAtStart) {
            el.selectionStart = cursorPosition + (countSeparatorsAtEnd - countSeparatorsAtStart);
        } else {
            el.selectionStart = cursorPosition;
        }
        el.selectionEnd = el.selectionStart;
    }
    this.trigger('changed', validation.value);
};

CustomInput.prototype.getSeparatorsCount = function(value, position) {
    var left = value.substring(0, position);
    var arr = left.split(this.separator);
    var count = arr.length - 1;
    if (count < 0) count = 0;
    return count;
};

CustomInput.prototype.showInputError = function() {
    if (!this.indicateErrors) return;
    this.$container.parent().toggleClass('hasError', true);
    setTimeout(function () {
        this.$container.parent().toggleClass('hasError', false);
    }.bind(this), 200);
};

exports.CustomInput = CustomInput;

},{"../utils":20,"../view/ui":21}],9:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var UI = require('../view/ui').UI;

var CustomList = function (params) {
    CustomList.superclass.constructor.call(this, params);
    params = params || {};
    this.$container.addClass('custom-list');
    this.autoHideOnSelect = (params.autoHideOnSelect == null ? true : params.autoHideOnSelect);
    this.hideAfterCreate = (params.hideAfterCreate == null ? true : params.hideAfterCreate);
    this.$items = [];
    this.callbackOnHide = function () {};
    if (this.hideAfterCreate) {
        this.hide();
    }
};

Utils.inherit(CustomList, UI);

CustomList.prototype.bindEvents = function() {
    $('.calculators').on('click', this.handleClick.bind(this));
    $('.calculators').on('keydown', this.handleKeyDown.bind(this));
};

CustomList.prototype.unBindEvents = function() {
    $('.calculators').off('click keydown');
};

CustomList.prototype.getTitleByData = function(data) {
    for(var i = 0; i < this.$items.length; i++) {
        var $el = $(this.$items[i][0]);
        if ($el.attr('data-name') === data.toString()) {
            return $el.html();
        }
    }
};

CustomList.prototype.getActiveItem = function() {
    for(var i = 0; i < this.$items.length; i++) {
        var $el = $(this.$items[i][0]);
        if ($el.hasClass('active')) {
            return $el;
        }
    }
};

CustomList.prototype.getSelectedItem = function() {
    for(var i = 0; i < this.$items.length; i++) {
        var $el = $(this.$items[i][0]);
        if ($el.hasClass('selected')) {
            return $el;
        }
    }
};

CustomList.prototype.getItemByFirstLetter = function(letter) {
    for(var i = 0; i < this.$items.length; i++) {
        var $el = $(this.$items[i][0]);
        if ($el.text().startsWith(letter)) {
            return $el;
        }
    }
};

CustomList.prototype.activateUp = function() {
    var index = null;
    var $el = null;

    if (!this.getSelectedItem()) {
        this.getActiveItem().addClass('selected');
    }

    for(var i = 0; i < this.$items.length; i++) {
        $el = $(this.$items[i][0]);
        if ($el.hasClass('selected')) {
            $el.removeClass('selected');
            index = i - 1;
            if (index < 0) index = 0;
            $el = this.$items[index];
            break;
        }
    }

    if ($el) {
        $el.addClass('selected');
        this.$container.scrollTop(0);
        this.$container.scrollTop($el.offset().top - this.$container.offset().top - this.$container.height()/2 + $el.height()/2);
    }
};

CustomList.prototype.activateDown = function() {
    var index = null;
    var $el = null;
    if (!this.getSelectedItem()) {
        this.getActiveItem().addClass('selected');
    }

    for(var i = 0; i < this.$items.length; i++) {
        $el = $(this.$items[i][0]);
        if ($el.hasClass('selected')) {
            $el.removeClass('selected');
            index = i + 1;
            if (index >= this.$items.length) index = this.$items.length - 1;
            $el = this.$items[index];
            break;
        }
    }

    if ($el) {
        $el.addClass('selected');
        this.$container.scrollTop(0);
        this.$container.scrollTop($el.offset().top - this.$container.offset().top - this.$container.height()/2 + $el.height()/2);
    }
};

CustomList.prototype.handleClick = function(e) {
    Utils.no(e, true);
    var $item = $(e.target);
    if ($item.closest('.custom-list-item').length) {
        this.$container.find('.custom-list-item').removeClass('active selected');
        $item.addClass('active');
        this.trigger('selected', $item.attr('data-name'));
        if (this.autoHideOnSelect) {
            this.hide();
        }
    } else {
        this.hide();
    }
};

CustomList.prototype.handleKeyDown = function(e) {
    Utils.no(e, true);
    var $item = $(e.target);
    if (e.key === 'ArrowUp' || e.keyCode === 38) {
        this.activateUp();
    } else if (e.key === 'ArrowDown' || e.keyCode === 40) {
        this.activateDown();
    } else if (e.key === 'Enter' || e.keyCode === 13) {
        var $selected = this.getSelectedItem();
        if ($selected) {
            this.$container.find('.custom-list-item').removeClass('active');
            $selected.addClass('active');
            this.trigger('selected', this.getSelectedItem().attr('data-name'));
        }
        this.hide();
    } else if (e.key === 'Escape' || e.keyCode === 27) {
        this.hide();
    } else if (e.keyCode >= 65 && e.keyCode <= 90) {
        var $el = this.getItemByFirstLetter(String.fromCharCode(e.keyCode)); 
        if ($el.length) {
            this.$container.find('.custom-list-item').removeClass('selected');
            $el.addClass('selected');
            this.$container.scrollTop(0);
            this.$container.scrollTop($el.offset().top - this.$container.offset().top - this.$container.height()/2 + $el.height()/2);
        }
    }
};

CustomList.prototype.fillList = function(items, options) {
    if (items && items.length) {
        this.$items = [];
        for (var i = 0; i < items.length; i++) {
            var $item = $('<div class="custom-list-item"></div>');
            $item.attr('data-name', items[i].data);
            if (options && options.data != null && options.data === items[i].data) {
                $item.addClass('active');
            }
            $item.html(items[i].title);
            $item.appendTo(this.$container);
            this.$items.push($item);
        }
    }
};

CustomList.prototype.show = function(params) {
    CustomList.superclass.show.call(this, params);

    params = params || {};
    if (params.html) {
        this.$container.html(params.html);
    };
    if (params.callbackOnHide) {
        this.callbackOnHide = params.callbackOnHide;
    };

    var parentLeft = 0;
    var parentTop = 0;
    if (params.box && params.box.parent) {
        var parentBox = Utils.box(params.box.parent);
        parentLeft = parentBox.left;
        parentTop = parentBox.top;
    }
    Utils.box(this.$container, {
        left: params.box.left - parentLeft,
        top: params.box.top - parentTop,
        width: params.box.width || params.box.minWidth || 'auto' 
    });
    if (params.box.minWidth) {
        this.$container.css({
            minWidth: params.box.minWidth
        });
    }
    var $activeItem = this.getActiveItem();
    this.$container.find('.custom-list-item').removeClass('selected');
    if ($activeItem) {
        this.$container.scrollTop(0);
        this.$container.scrollTop($activeItem.offset().top - this.$container.offset().top - this.$container.height()/2 + $activeItem.height()/2);
    }

    var _this = this;
    setTimeout(function() {
        _this.bindEvents();
    }, 350);
};

CustomList.prototype.hide = function() {
    CustomList.superclass.hide.apply(this, arguments);
    this.unBindEvents();
    this.callbackOnHide();
};

exports.CustomList = CustomList;

},{"../utils":20,"../view/ui":21}],10:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomList = require('../component/custom_list').CustomList;
var CONSTANTS = require('../constants').CONSTANTS;

var LeverageList = function (params) {
    LeverageList.superclass.constructor.call(this, params);
    this.$container.addClass('leverage-list');

    var items = [];
    var regulator = params.regulator || CONSTANTS.DEFAULT_REGULATOR;
    var leverages = CONSTANTS.LEVERAGE_PER_BRANCH[regulator];
    if (leverages && leverages.length) {
        for (var i = 0; i < leverages.length; i++) {
            var leverage = leverages[i];
            items.push({
                title: leverage.t,
                data: leverage.v
            });
        }
    }
    this.fillList(items, {data: params.active});
};

Utils.inherit(LeverageList, CustomList);

exports.LeverageList = LeverageList;

},{"../component/custom_list":9,"../constants":16,"../utils":20}],11:[function(require,module,exports){
'use strict';

function log(text, params) {
    params = params || {};
    var dt = new Date();
    var ms = dt.getMilliseconds();
    var len = ms.toString().length;
    if (len === 1) {
        ms += '00';
    } else if (len === 2) {
        ms += '0';
    } 
    var dateLog = dateFormat(dt, 'DD-MM-YYYY');
    var timeLog = dt.toLocaleTimeString() + '.' + ms;
    var logString = dateLog + ' ' + timeLog + ' > ' + text; 

    console.log(logString);
};

function dateFormat(date, format) {
    var d = date.getDate();
    var m = date.getMonth();
    var y = date.getFullYear();
    format = format.replace("DD", (d < 10 ? '0' : '') + d);
    format = format.replace("MM", (m < 9 ? '0' : '') + (m + 1));
    format = format.replace("YYYY", y);

    return format;
};

exports.log = log;

},{}],12:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomInput = require('../component/custom_input').CustomInput;

var PeriodInput = function (params) {
    PeriodInput.superclass.constructor.call(this, params);
    
    this.allowedSymbols = '1234567890';
};

Utils.inherit(PeriodInput, CustomInput);

exports.PeriodInput = PeriodInput;

},{"../component/custom_input":8,"../utils":20}],13:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomInput = require('../component/custom_input').CustomInput;

var PriceInput = function (params) {
    PriceInput.superclass.constructor.call(this, params);
    
    this.allowedSymbols = '.1234567890';
    this.digits = 9;
};

Utils.inherit(PriceInput, CustomInput);

exports.PriceInput = PriceInput;

},{"../component/custom_input":8,"../utils":20}],14:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomList = require('../component/custom_list').CustomList;
var CONSTANTS = require('../constants').CONSTANTS;

var TradeSideList = function (params) {
    TradeSideList.superclass.constructor.call(this, params);
    this.$container.addClass('trade-side-list');

    var items = [];
    for (var i = 0; i < CONSTANTS.TRADE_SIDE.length; i++) {
        var side = CONSTANTS.TRADE_SIDE[i];
        items.push({
            title: L(side.t),
            data: side.v
        });
    }
    this.fillList(items, {data: params.active});
};

Utils.inherit(TradeSideList, CustomList);

exports.TradeSideList = TradeSideList;

},{"../component/custom_list":9,"../constants":16,"../utils":20}],15:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CustomInput = require('../component/custom_input').CustomInput;

var TradeSizeInput = function (params) {
    TradeSizeInput.superclass.constructor.call(this, params);
};

Utils.inherit(TradeSizeInput, CustomInput);

exports.TradeSizeInput = TradeSizeInput;

},{"../component/custom_input":8,"../utils":20}],16:[function(require,module,exports){
'use strict';

var CONSTANTS = {
    ACCOUNT_CURRENCY: ["AUD", "USD", "EUR", "CAD", "GBP", "SGD", "NZD", "JPY", "HKD", "CHF"],
    LEVERAGE: [
        {t: "1:500", v: 500},
        {t: "1:400", v: 400},
        {t: "1:300", v: 300},
        {t: "1:200", v: 200},
        {t: "1:100", v: 100},
        {t: "1:50", v: 50},
        {t: "1:25", v: 25},
        {t: "1:1", v: 1}
    ],
    LEVERAGE_PER_BRANCH: {
        "1": [
            {t: "1:30", v: 30},
            {t: "1:20", v: 20},
            {t: "1:10", v: 10},
            {t: "1:1", v: 1}
        ],
        "2": [
            {t: "1:30", v: 30},
            {t: "1:20", v: 20},
            {t: "1:10", v: 10},
            {t: "1:1", v: 1}
        ],
        "3": [
            {t: "1:500", v: 500},
            {t: "1:400", v: 400},
            {t: "1:300", v: 300},
            {t: "1:200", v: 200},
            {t: "1:100", v: 100},
            {t: "1:50", v: 50},
            {t: "1:25", v: 25},
            {t: "1:1", v: 1}
        ],
        "4": [
            {t: "1:200", v: 200},
            {t: "1:100", v: 100},
            {t: "1:50", v: 50},
            {t: "1:25", v: 25},
            {t: "1:1", v: 1}
        ]
    },
    TRADE_SIDE: [
        {t: "common.trade.side.buy", v: 0},
        {t: "common.trade.side.sell", v: 1}
    ],
    ACCOUNT_TYPE: [
        {t: "common.account.type.ecn", v: 0},
        {t: "common.account.type.standard", v: 1}
    ],
    COMMISSION_BY_ACCOUNT_TYPE: {
        AUD: [5, 0],
        USD: [5, 0],
        EUR: [5, 0],
        CAD: [5, 0],
        GBP: [5, 0],
        SGD: [5, 0],
        NZD: [5, 0],
        JPY: [5, 0],
        HKD: [5, 0],
        CHF: [5, 0]
    },
    CURRENCY_PAIR: [
        { n: "AUDCAD", d: 5, p: 0.0001 },
        { n: "AUDCHF", d: 5, p: 0.0001 },
        { n: "AUDJPY", d: 3, p: 0.01 },
        { n: "AUDNZD", d: 5, p: 0.0001 },
        { n: "AUDSGD", d: 5, p: 0.0001 },
        { n: "AUDUSD", d: 5, p: 0.0001 },
        { n: "CADCHF", d: 5, p: 0.0001 },
        { n: "CADJPY", d: 3, p: 0.01 },
        { n: "CHFJPY", d: 3, p: 0.01 },
        { n: "CHFSGD", d: 5, p: 0.0001 },
        { n: "EURAUD", d: 5, p: 0.0001 },
        { n: "EURCAD", d: 5, p: 0.0001 },
        { n: "EURCHF", d: 5, p: 0.0001 },
        { n: "EURDKK", d: 5, p: 0.0001 },
        { n: "EURGBP", d: 5, p: 0.0001 },
        { n: "EURHKD", d: 5, p: 0.0001 },
        { n: "EURJPY", d: 3, p: 0.01 },
        { n: "EURNOK", d: 5, p: 0.0001 },
        { n: "EURNZD", d: 5, p: 0.0001 },
        { n: "EURPLN", d: 5, p: 0.0001 },
        { n: "EURSEK", d: 5, p: 0.0001 },
        { n: "EURSGD", d: 5, p: 0.0001 },
        { n: "EURTRY", d: 5, p: 0.0001 },
        { n: "EURUSD", d: 5, p: 0.0001 },
        { n: "EURZAR", d: 5, p: 0.0001 },
        { n: "GBPAUD", d: 5, p: 0.0001 },
        { n: "GBPCAD", d: 5, p: 0.0001 },
        { n: "GBPCHF", d: 5, p: 0.0001 },
        { n: "GBPDKK", d: 5, p: 0.0001 },
        { n: "GBPJPY", d: 3, p: 0.01 },
        { n: "GBPNOK", d: 5, p: 0.0001 },
        { n: "GBPNZD", d: 5, p: 0.0001 },
        { n: "GBPSEK", d: 5, p: 0.0001 },
        { n: "GBPSGD", d: 5, p: 0.0001 },
        { n: "GBPUSD", d: 5, p: 0.0001 },
        { n: "NOKJPY", d: 3, p: 0.01 },
        { n: "NOKSEK", d: 5, p: 0.0001 },
        { n: "NZDCAD", d: 5, p: 0.0001 },
        { n: "NZDCHF", d: 5, p: 0.0001 },
        { n: "NZDJPY", d: 3, p: 0.01 },
        { n: "NZDUSD", d: 5, p: 0.0001 },
        { n: "SEKJPY", d: 3, p: 0.01 },
        { n: "SGDJPY", d: 3, p: 0.01 },
        { n: "USDCAD", d: 5, p: 0.0001 },
        { n: "USDCHF", d: 5, p: 0.0001 },
        { n: "USDCNH", d: 5, p: 0.0001 },
        { n: "USDCZK", d: 4, p: 0.001 },
        { n: "USDDKK", d: 5, p: 0.0001 },
        { n: "USDHKD", d: 5, p: 0.0001 },
        { n: "USDHUF", d: 3, p: 0.01 },
        { n: "USDJPY", d: 3, p: 0.01 },
        { n: "USDMXN", d: 5, p: 0.0001 },
        { n: "USDNOK", d: 5, p: 0.0001 },
        { n: "USDPLN", d: 5, p: 0.0001 },
        { n: "USDRUB", d: 5, p: 0.001 },
        { n: "USDSEK", d: 5, p: 0.0001 },
        { n: "USDSGD", d: 5, p: 0.0001 },
        { n: "USDTHB", d: 5, p: 0.0001 },
        { n: "USDTRY", d: 5, p: 0.0001 },
        { n: "USDZAR", d: 5, p: 0.0001 }
    ],
    CONVERTER_CURRENCY: [
        "AUD", "BRL", "CAD", "CHF", "DKK", "EUR", "GBP",
        "HKD", "HUF", "ILS", "JPY", "MXN", "NOK", "NZD",
        "PLN", "RUB", "SEK", "SGD", "TRY", "USD", "ZAR"
    ],
    DEFAULT_CALCULATOR: 'pip',
    DEFAULT_LANGUAGE: 'en',
    DEFAULT_REGULATOR: '3',
    REQUESTS: {
        LANGUAGE: '1000',
        ACTUAL_SYMBOLS: '888'
    },
    CALCULATORS: {
        PIP_CALCULATOR: {
            NAME: 'pip',
            DEFAULT_ACCOUNT_CURRENCY: 'AUD',
            DEFAULT_CURRENCY_PAIR: 'EURUSD',
            DEFAULT_TRADE_SIZE: 10000,
            REQ: {
                ON_ACCOUNT_CURRENCY_CHANGED: '1010',
                ON_CURRENCY_PAIR_CHANGED: '1020',
                ON_TRADE_SIZE_CHANGED: '1030'
            }
        },
        CONVERTER_CALCULATOR: {
            NAME: 'converter',
            DEFAULT_CURRENCY_FROM: 'AUD',
            DEFAULT_CURRENCY_TO: 'USD',
            DEFAULT_AMOUNT: 10000,
            REQ: {
                ON_CURRENCY_FROM_CHANGED: '1040',
                ON_CURRENCY_TO_CHANGED: '1050',
                ON_AMOUNT_CHANGED: '1060'
            }
        },
        CTRADER_CALCULATOR: {
            NAME: 'ctrader',
            DEFAULT_ACCOUNT_CURRENCY: 'AUD',
            DEFAULT_CURRENCY_PAIR: 'EURUSD',
            DEFAULT_TRADE_SIZE: 10000,
            REQ: {
                ON_ACCOUNT_CURRENCY_CHANGED: '1070',
                ON_CURRENCY_PAIR_CHANGED: '1080',
                ON_TRADE_SIZE_CHANGED: '1090'
            }
        },
        MARGIN_CALCULATOR: {
            NAME: 'margin',
            DEFAULT_ACCOUNT_CURRENCY: 'AUD',
            DEFAULT_CURRENCY_PAIR: 'EURUSD',
            DEFAULT_TRADE_SIZE: 10000,
            DEFAULT_LEVERAGE: 500,
            REQ: {
                ON_ACCOUNT_CURRENCY_CHANGED: '1110',
                ON_CURRENCY_PAIR_CHANGED: '1120',
                ON_LEVERAGE_CHANGED: '1130',
                ON_TRADE_SIZE_CHANGED: '1140'
            }
        },
        SWAPS_CALCULATOR: {
            NAME: 'swaps',
            DEFAULT_ACCOUNT_CURRENCY: 'AUD',
            DEFAULT_CURRENCY_PAIR: 'EURUSD',
            DEFAULT_TRADE_SIZE: 10000,
            REQ: {
                ON_ACCOUNT_CURRENCY_CHANGED: '1150',
                ON_CURRENCY_PAIR_CHANGED: '1160',
                ON_TRADE_SIZE_CHANGED: '1170'
            }
        },
        PROFIT_CALCULATOR: {
            NAME: 'profit',
            DEFAULT_ACCOUNT_CURRENCY: 'AUD',
            DEFAULT_CURRENCY_PAIR: 'EURUSD',
            DEFAULT_TRADE_SIZE: 10000,
            DEFAULT_ACCOUNT_TYPE: 0,
            DEFAULT_PERIOD: 0,
            DEFAULT_TRADE_SIDE: 0,
            REQ: {
                ON_ACCOUNT_CURRENCY_CHANGED: '1210',
                ON_CURRENCY_PAIR_CHANGED: '1220',
                ON_TRADE_SIZE_CHANGED: '1230'
            }
        }
    }
};

exports.CONSTANTS = CONSTANTS;

},{}],17:[function(require,module,exports){
'use strict';

var Lang = function () {
    this.language = null;
    this.languageData = null;
    var _this = this;
    window['L'] = function (key) {
        if (!_this.language || !_this.languageData) {
            _this.setLanguage('en', _this.en);
            console.warn('English language initialized');
        }
        var value = _this.languageData[key] || _this.en[key] || null;
        if (value === null) {
            console.error('Absent translation for key: ' + key);
            value = '---' + key + '---';
        } 
        return value;
    };
};

Lang.prototype.setLanguage = function (language, languageData) {
    if (language && languageData) {
        this.language = language;
        this.languageData = languageData;
    }
};

exports.Lang = Lang;

Lang.prototype.en = 
{
"pip.calc.selector": "Pip Calculator",
"pip.calc.currency.label": "Account Currency",
"pip.calc.volume.label": "Trade Size (In units)",
"pip.calc.pair.label": "Currency Pair",
"pip.calc.price.label": "Current Conversion Price ({0})",
"pip.calc.result": "Pip Value ({0}):  {1}",
"pip.bottom.citation": "Risk comes from not knowing what you're doing",
"pip.bottom.author": "Warren Buffett",
"pip.bottom.header": "How does it work?",
"pip.bottom.explain1": "Account currency: {0}",
"pip.bottom.explain2": "Currency Pair: {0}",
"pip.bottom.explain3": "Trade size (in units): {0}",
"pip.bottom.explain4": "One pip in decimals = {0}",
"pip.bottom.explain5": "Exchange Rate ({0}) = {1}",
"pip.bottom.explain6": "{0} * {1} / {2} = {3}",
"pip.bottom.footer": "Each pip is worth {0} (in {1})",

"converter.calc.selector": "Currency Converter",
"converter.calc.from.label": "Currency From",
"converter.calc.amount.label": "Amount",
"converter.calc.to.label": "Currency To",
"converter.calc.price.label": "Current Conversion Price ({0})",
"converter.calc.result": "Conversion Value ({0}):  {1}",
"converter.bottom.citation": "No profession requires more hard work, intelligence, patience, and mental discipline than successful speculation",
"converter.bottom.author": "Robert Rhea",
"converter.bottom.header": "How does it work?",
"converter.bottom.explain1": "From {0} to {1}",
"converter.bottom.explain2": "Amount = {0}",
"converter.bottom.explain3": "Exchange Rate ({0}) = {1}",
"converter.bottom.explain4": "{0} * {1} = {2}",
"converter.bottom.footer": "Conversion Value is {0} (in {1})",

"ctrader.calc.selector": "cTrader Commission",
"ctrader.calc.currency.label": "Account Currency",
"ctrader.calc.volume.label": "Position Size (In units)",
"ctrader.calc.pair.label": "Currency Pair",
"ctrader.calc.price.label": "Current Conversion Price ({0})",
"ctrader.calc.result": "cTrader Commission round trade ({0}):  {1}",
"ctrader.bottom.citation": "Volatility is greatest at turning points, diminishing as a new trend becomes established",
"ctrader.bottom.author": "George Soros",
"ctrader.bottom.header": "How does it work?",
"ctrader.bottom.explain1": "Account currency: {0}",
"ctrader.bottom.explain2": "Currency Pair: {0}",
"ctrader.bottom.explain3": "Forex Value Market cTrader commission: $3.00 per 100,000 units (1 lot)",
"ctrader.bottom.explain4": "Trade size (in units): {0}",
"ctrader.bottom.explain5": "Exchange Rate ({0}) = {1}",
"ctrader.bottom.explain6": "{0} * 0.00003 * {1} = {2}",
"ctrader.bottom.footer": "Commission each way is {0} (in {1})",

"margin.calc.selector": "Margin Calculator",
"margin.calc.currency.label": "Account Currency",
"margin.calc.volume.label": "Trade Size (In units)",
"margin.calc.pair.label": "Currency Pair",
"margin.calc.price.label": "Current Conversion Price ({0})",
"margin.calc.leverage.label": "Leverage",
"margin.calc.result": "Required Margin ({0}):  {1}",
"margin.bottom.citation": "Success consists of going from failure to failure without loss of enthusiasm",
"margin.bottom.author": "Winston Churchill",
"margin.bottom.header": "How does it work?",
"margin.bottom.explain1": "Account Currency: {0}",
"margin.bottom.explain2": "Leverage: {0}",
"margin.bottom.explain3": "Currency Pair: {0}",
"margin.bottom.explain4": "Trade Size: {0}",
"margin.bottom.explain5": "Exchange Rate ({0}) = {1}",
"margin.bottom.explain6": "{0} * {1} / {2} = {3}",
"margin.bottom.footer": "Required Margin is {0} (in {1})",

"swaps.calc.selector": "Swaps Calculator",
"swaps.calc.currency.label": "Account Currency",
"swaps.calc.volume.label": "Trade Size (In units)",
"swaps.calc.pair.label": "Currency Pair",
"swaps.calc.price.label": "Current Conversion Price ({0})",
"swaps.calc.long.label": "Swap Long:",
"swaps.calc.short.label": "Swap Short:",
"swaps.calc.result": "Swaps Values ({0}):  {1} (Long),  {2} (Short)",
"swaps.bottom.citation": "Risk comes from not knowing what you're doing",
"swaps.bottom.author": "Warren Buffett",
"swaps.bottom.header": "How does it work?",
"swaps.bottom.explain1": "Account currency: {0}",
"swaps.bottom.explain2": "Currency Pair: {0}",
"swaps.bottom.explain3": "Trade size (in units): {0}",
"swaps.bottom.explain4": "Pip Value = {0}",
"swaps.bottom.explain5": "Exchange Rate ({0}) = {1}",
"swaps.bottom.explain6": "{0} * {1} * 1 / 10 = {2}",
"swaps.bottom.footer": "Swaps (in {0}): Long = {1}, Short = {2}",

"profit.calc.selector": "Profit Calculator",
"profit.calc.currency.label": "Account Currency",
"profit.calc.pair.label": "Currency Pair",
"profit.calc.volume.label": "Position Size (In units)",
"profit.calc.open.label": "Open Price",
"profit.calc.close.label": "Close Price",
"profit.calc.side.label": "Trade Side",
"profit.calc.account.type.label": "Account Type",
"profit.calc.period.label": "Period in Days",
"profit.calc.long.label": "Swap Long:",
"profit.calc.short.label": "Swap Short:",
"profit.calc.result": "Profit ({0}):  {1}",
"profit.bottom.citation": "Risk comes from not knowing what you're doing",
"profit.bottom.author": "Warren Buffett",
"profit.bottom.header": "How does it work?",
"profit.bottom.explain1": "Account currency: {0}",
"profit.bottom.explain2": "Account Type: {0}",
"profit.bottom.explain3": "Currency Pair: {0}",
"profit.bottom.explain4": "Trade side: {0}",
"profit.bottom.explain5": "Position size (in units): {0}",
"profit.bottom.explain6": "Period (in days): {0}",
"profit.bottom.explain7": "Open Price: {0}",
"profit.bottom.explain8": "Close Price: {0}",
"profit.bottom.explain9": "({0} - {1}) * {2} * {3} ({4} rate) ± ({5} * {6}) = {7}",
"profit.bottom.footer": "Profit (in {0}): {1}",

"common.trade.side.buy": "BUY (Long)",
"common.trade.side.sell": "SELL (Short)",
"common.account.type.ecn": "True ECN",
"common.account.type.standard": "Standard"
};

},{}],18:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var CONSTANTS = require('../constants').CONSTANTS;
var EventDriven = require('../model/event_driven').EventDriven;

var Connection = function (params) {
    this.params = params || {};

    this.app = params.app;
	this.host = params.host;
};

Connection.prototype.remoteRequest = function (type, params, callback) {
    switch (type) {
        case CONSTANTS.REQUESTS.LANGUAGE:
            this.requestLanguage(params.lang, callback);
            break;
        default:
            this.request(type, params, callback);
    };
    return false;
};

Connection.prototype.requestLanguage = function (lang, callback) {
    var _self = this;
    $.get(this.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
        $.getJSON(_self.host + '/?getCalc=1&type=' + CONSTANTS.REQUESTS.LANGUAGE + '&lang=' + lang + '&sign=' + token).done(function (res) {
            callback(res);
        });
    });
};

Connection.prototype.request = function (type, params, callback) {
    var _self = this;
    $.get(this.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
        $.getJSON(_self.host + '/?getCalc=1&type=' + type + (params ? '&params=' + JSON.stringify(params) : '') + '&sign=' + token).done(function (res) {
            callback(res);
        });
    });
};

Utils.extend(Connection, EventDriven);

exports.Connection = Connection;

},{"../constants":16,"../model/event_driven":19,"../utils":20}],19:[function(require,module,exports){
'use strict';

var EventDriven = function EventDriven() {
    this._events = {};
    this._whatPlannedToTrigger = {};
    this._triggerPlanned = false;
    this.executeTimeout = null;
};

var EventDriven_calls;
var EventDriven_list;
var EventDriven_args;
var EventDriven_argsToSend;
var EventDriven_i;
var EventDriven_length;
var EventDriven_context;

EventDriven.prototype.on = function __method(eventName, data, callback, context) {
    var _callback_;

    if (typeof data === 'function') {
        context = callback;
        callback = data;
        data = undefined;
    }

    var calls = this._events || (this._events = {});
    var list = calls[eventName] || (calls[eventName] = []);

    list.push([ _callback_ || callback, context, data ]);
    return this;
};

EventDriven.prototype.off = function (eventName, context) {
    var calls = this._events || (this._events = {}),
        list = calls[eventName] || (calls[eventName] = []);

    calls[eventName] = list.filter(function (listItem) {
        return context !== undefined && listItem[1] !== context;
    });

    return this;
};

EventDriven.prototype.destroy = function () {
    this._events = {};
};

EventDriven.prototype.execute = function (eventName) {
    EventDriven_calls = this._events || (this._events = {});
    EventDriven_list = EventDriven_calls[eventName] || (EventDriven_calls[eventName] = []);
    EventDriven_args = Array.prototype.splice.call(arguments, 1);
    EventDriven_length = EventDriven_list.length;

    for (EventDriven_i = 0; EventDriven_i < EventDriven_length; EventDriven_i++) {
        EventDriven_context = EventDriven_list[EventDriven_i][1] || this;
        if (typeof EventDriven_list[EventDriven_i][2] !== 'undefined') {
            EventDriven_argsToSend = EventDriven_args.concat([EventDriven_list[EventDriven_i][2]]);
        } else {
            EventDriven_argsToSend = EventDriven_args;
        }
        EventDriven_list[EventDriven_i][0].apply(EventDriven_context, EventDriven_argsToSend);
    }
};

EventDriven.prototype.trigger = function (eventName) {
    this.execute.apply(this, arguments);
};

exports.EventDriven = EventDriven;

},{}],20:[function(require,module,exports){
'use strict';

exports.inherit = function (Child, Parent) {
    if (!Child) throw 'Inherit - child undefined!';
    if (!Parent) throw 'Inherit - parent undefined!';
    var childProto = Child.prototype, i, desc;
    Child.prototype = Object.create(Parent.prototype);
    var props = Object.getOwnPropertyNames(childProto);
    for (i = props.length; i--;) {
        if (childProto.hasOwnProperty(props[i])) {
            desc = Object.getOwnPropertyDescriptor(childProto, props[i]);
            Object.defineProperty(Child.prototype, props[i], desc);
        }
    }
    Child.prototype.constructor = Child;
    Child.superclass = Parent.prototype;
};

exports.extend = function extend (clazz, trait, isDirect) {
    if (!clazz) throw 'Extend - class undefined!';
    if (!trait) throw 'Extend - trait undefined!';
    var from = trait, to = isDirect ? clazz : clazz.prototype;
    if (trait.prototype) extend(clazz, trait.prototype, isDirect);
    for (var prop in from) {
        var descriptor = Object.getOwnPropertyDescriptor(from, prop);
        if (!descriptor/* || !to*/)  continue;
        Object.defineProperty(to, prop, descriptor);
    }
};

exports.getObjectClassName = function (instance) {
    var className = '';
    if (instance.constructor.name) {
        className = instance.constructor.name;
    } else {
        var constructorFuncString = /([^\.\s]+)\.superclass/.exec(instance.constructor.toString());
        className = constructorFuncString && constructorFuncString[1];
    }
    return className || '';
};

exports.formatToThree = function (num, separator) {
    separator = separator || ' ';
    var raw = num.toString().split('.');
    var left = raw[0];
    var right = raw[1];
    var str = ('' + left), result = '';
    for (var i = str.length - 1; i >= 0; i -= 3) {
        result = separator + (str[i - 2] || '') + (str[i - 1] || '') + (str[i] || '') + result;
    }
    result = result.removeFirst();
    if (right) {
        result = result + '.' + right;
    }
    return result;
};

exports.getDigitsAfterDot = function (number) {
    number = number || 0;
    return (String(number).split('.')[1] || '').length;
};

exports.expandNumber = function (str) {
    var mult = 1;
    if (str.length > 0) {
        switch (str[str.length - 1]) {
            case 'k':
                mult = 1000;
                break;
            case 'm':
                mult = 1000000;
                break;
        }
    }
    if (mult > 1) {
        return Number(str.substr(0, str.length - 1)) * mult;
    }
    return Number(str);
};

exports.collapseNumber = function (number, digits) {
    if (typeof number === 'string') number = Number(number);
    return exports.formatNumber(number, {digitsAfterDot: digits || 0});
};

exports.formatNumber = function (num, options) {
    if (num === undefined) return '-';

    options = options || {};
    options.spaceSplitters = options.spaceSplitters || true;
    options.digitsAfterDot = options.digitsAfterDot !== undefined ? options.digitsAfterDot : 2;

    num = Number(String(num).replace(/\s/g, ''));

    var integer = num > 0 ? Math.floor(num) : -Math.ceil(num), result = options.spaceSplitters ? exports.convertIntegerToSpacedString(integer) : '' + integer, fixed = num.toFixed(options.digitsAfterDot);

    if (options.digitsAfterDot > 0) result += '.' + fixed.split('.')[1];
    result = result.substring(1);
    return (fixed >= 0) ? result : '-' + result;
};

exports.getRequestAnimationFrameFunction = function () {
    return window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.msRequestAnimationFrame || setTimeout;
};

/**
 * Throttle the execution of the given function, drive the execution (sync with) RequestAnimationFrame.
 */
exports.makeLazy = function (func) { // TODO: needs a better name!
    var actionPending = false;
    var args = [], sThis;

    function lazyExecutor () {
        func.apply(sThis, args);
        args = [];
        actionPending = false;
    }

    return function lazyWrapper () {
        args = arguments;
        sThis = this;
        if (actionPending) { // already was a call
            return;
        }
        actionPending = true;
        (exports.getRequestAnimationFrameFunction())(lazyExecutor);
    };
};

exports.makeLazy.disable = function () {
    exports.makeLazy = function (f) {
        return f;
    };
};

/**
 * Clone the given object or array
 * @param obj the source object
 */
exports.clone = function (obj) {
    if (Array.isArray(obj)) {
        return obj.concat();
    } else {
        var clone = {};
        Object.keys(obj).forEach(function (key) {
            clone[key] = obj[key];
        });
        return clone;
    }
};

/**
 * Copy props only if they don't exists in target object
 * @param {Object} target
 * @returns {Object}
 */
exports.copySafe = function (target) {
    target = target || {};
    var sources = Array.prototype.slice.call(arguments, 1);
    sources.forEach(function (source) {
        Object.keys(source).forEach(function (k) {
            if (target[k] === undefined) {
                target[k] = source[k];
            }
        });
    });
    return target;
};

exports.update = function (target, source) {
    Object.keys(source).forEach(function (key) {
        target[key] = source[key];
    });
};

exports.seal = function (obj, konstructor) {
    if (exports.debugMode) {
        if (konstructor) {
            obj.constructor == konstructor && Object.seal(obj);
        } else {
            Object.seal(obj);
        }
    }
};

exports.freeze = function (obj) {
    if (exports.debugMode) Object.freeze(obj);
};

// LZW-compress a string
exports.lzwEncode = function (s) {
    var dict = {}, data = (s + '').split(''), out = [], phrase = data[0], code = 256, length = data.length, currChar, i;
    for (i = 1; i < length; i++) {
        currChar = data[i];
        if (dict[phrase + currChar] === undefined) {
            out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));
            dict[phrase + currChar] = code;
            ++code;
            phrase = currChar;
        } else {
            phrase += currChar;
        }
    }
    out.push(phrase.length > 1 ? dict[phrase] : phrase.charCodeAt(0));
    return String.fromCharCode.apply(String, out);
};

// Decompress an LZW-encoded string
exports.lzwDecode = function (s) {
    var dict = {}, data = (s + '').split(''), currChar = data[0], oldPhrase = currChar, out = [currChar], code = 256, length = data.length, phrase;
    for (var i = 1; i < length; i++) {
        var currCode = data[i].charCodeAt(0);
        phrase = currCode < 256 ? data[i] : dict[currCode] || oldPhrase + currChar;
        out.push(phrase);
        currChar = phrase.charAt(0);
        dict[code] = oldPhrase + currChar;
        ++code;
        oldPhrase = phrase;
    }
    return out.join('');
};

exports.hex2Rgba = function (color, opacity) {
    if (color[0] != '#') return color;

    var name = 'rgb', rgba = [];
    color = color.substr(1);
    if (color.length == 3) color += color;

    for (var c = 0; c < color.length; c += 2) {
        rgba.push(parseInt(color.substr(c, 2), 16));
    }
    if (typeof opacity == 'number') {
        name += 'a';
        rgba.push(opacity);
    }

    return name + '(' + rgba.join(',') + ')';
};

/**
 * Compare two plain objects
 */
exports.isEqualObjects = function isEqualObjects (obj1, obj2) {
    if (!(obj1 instanceof Object) || !(obj2 instanceof Object)) return obj1 === obj2;
    if (obj1.constructor !== obj2.constructor) return false;

    var keys1 = Object.keys(obj1).sort();
    var keys2 = Object.keys(obj2).sort();

    if (keys1.join('') != keys2.join('')) return false;

    for (var i = 0, len = keys1.length; i < len; i++) {
        var p = keys1[i];
        if (obj1[p] instanceof Object) {
            return isEqualObjects(obj1[p], obj2[p]);
        } else if (obj1[p] !== obj2[p]) return false;
    }

    return true;
};

//
// Interpolate strings 
// ex. sprintf('String {0}, {1}!', 26, 'not 27') will return string: 'String 26, not 27!' 
//
exports.sprintf = function () {
    var args = Array.prototype.slice.call(arguments);
    var str = args.shift();
    var len = args.length;
    var emptyIndices = [];

    // replace placeholders with existing arguments
    str = str.replace(/\{(\d+)}/g, function (str, index) {
        var empty = index >= len || args[index] == null;

        if (empty && emptyIndices.indexOf(index) === -1) {
            emptyIndices.push(index);
        }

        return empty ? str : args[index];
    });

    // rename non-replaced placeholders, e.g. "{3} {15} {5}" -> "{0} {2} {1}"
    if (emptyIndices.length) {
        emptyIndices.sort(function (a, b) {
            return a - b;
        });

        emptyIndices.forEach(function (index, i) {
            str = str.replace(new RegExp('\\{' + index + '\\}', 'g'), function () {
                return '{' + i + '}';
            });
        });
    }

    return str;
};

/**
 * Provide promise resolve/reject of which can be executed later
 * @returns {*|{}}
 */
exports.getWrappedPromise = function () {
    var wrappedPromise = {},
        promise = new Promise(function (resolve, reject) {
            wrappedPromise.resolve = resolve;
            wrappedPromise.reject = reject;
        });

    wrappedPromise.then = promise.then.bind(promise);
    wrappedPromise.catch = promise.catch.bind(promise);
    wrappedPromise.promise = promise;

    return wrappedPromise;
};

exports.no = function (e, bubbles) {
    if (typeof e.preventDefault !== 'undefined') e.preventDefault();
    if (typeof e.returnValue !== 'undefined') e.returnValue = false;
    if (bubbles === true) {
        if (typeof e.stopPropagation !== 'undefined') e.stopPropagation();
        if (typeof e.cancelBubble !== 'undefined') e.cancelBubble = true;
    }
};

exports.rnd = function (min, max) {
    min = parseInt(min, 10);
    max = parseInt(max, 10);
    return Math.floor(Math.random() * (max - min + 1)) + min;
};

exports.isDefined = function (obj) {
    return typeof obj != 'undefined';
};

var uniqueId = 0;
exports.uid = function () {
    return ++uniqueId;
};

















exports.getElement = function (el) {
    if (typeof el == 'undefined' || el == null) return null;
    if (typeof el == 'string') el = document.getElementById(el);
    if (typeof el === 'object') {
        if (typeof el.jquery != 'undefined' && typeof el.jquery == 'string') {
            return el.get(0);
        } else {
            return el;
        }
    }
    else
        return null;
}

exports.toJSON = function(obj) {
    /// <summary>Convert Object to JSON format (string)</summary>
    /// <param name="obj" type="object">object to covert</param>
    var res = null;
    if (typeof obj === 'object')
        if (typeof JSON != 'undefined' && typeof JSON.stringify != 'undefined')
            res = JSON.stringify(obj);
    return res;
}

exports.fromJSON = function(str) {
    /// <summary>Parse string from JSON format to new Object</summary>
    /// <param name="str" type="string">JSON string to parse</param>
    var res = null;
    if (typeof str === 'string') {
        if (typeof JSON != 'undefined' && typeof JSON.parse != 'undefined') {
            try {
                res = JSON.parse(str);
            } catch (ee) {
                res = eval(str);
            }
        } else {
            res = eval(str);
        }
    }
    return res;
}

exports.store = function (key, val, storage) {
    /// <summary>Set data to LOCAL or SESSION STORAGE</summary>
    /// <param name="key" type="string">key name</param>
    /// <param name="val" type="string">value of key</param>
    /// <param name="storage" type="boolean">true for Session Storage</param>
    if (typeof key != 'undefined') {
        if (typeof storage == 'undefined') {
            if (typeof window.localStorage != 'undefined' && typeof window.localStorage.setItem != 'undefined') {
                window.localStorage.setItem(key, val);
            }
        } else {
            if (typeof window.sessionStorage != 'undefined' && typeof window.sessionStorage.setItem != 'undefined') {
                window.sessionStorage.setItem(key, val);
            }
        }
        return true;
    }
    return false;
}

exports.restore = function (key, storage) {
    /// <summary>Get data from LOCAL or SESSION STORAGE</summary>
    /// <param name="key" type="string">key name</param>
    /// <param name="storage" type="boolean">true for Session Storage</param>
    var res;
    if (typeof key != 'undefined') {
        if (typeof storage == 'undefined') {
            if (typeof window.localStorage != 'undefined' && typeof window.localStorage.getItem != 'undefined') {
                res = window.localStorage.getItem(key);
            }
        } else {
            if (typeof window.sessionStorage != 'undefined' && typeof window.sessionStorage.getItem != 'undefined') {
                res = window.sessionStorage.getItem(key);
            }
        }
    }
    return res;
}

exports.unstore = function (key, storage) {
    /// <summary>Delete data from LOCAL STORAGE</summary>
    /// <param name="key" type="string">key name to delete (or empty to clear all)</param>
    /// <param name="storage" type="boolean">true for Session Storage</param>
    if (typeof storage == 'undefined') {
        if (typeof window.localStorage != 'undefined' && typeof window.localStorage.getItem != 'undefined') {
            if (typeof key != 'undefined') {
                return window.localStorage.removeItem(key);
            } else {
                return window.localStorage.clear();
            }
        }
    } else {
        if (typeof window.sessionStorage != 'undefined' && typeof window.sessionStorage.getItem != 'undefined') {
            if (typeof key != 'undefined') {
                return window.sessionStorage.removeItem(key);
            } else {
                return window.sessionStorage.clear();
            }
        }
    }
    return false;
}

exports.compare = function (a, b, reverse) {
    /// <summary>Compare two parameters (ex. use with [].sort)</summary>
    /// <param name="a" type="any">first parameter</param>
    /// <param name="b" type="any">second parameter</param>
    if (reverse) {
        if (a > b) { return -1 } else if (a < b) { return 1 } else { return 0 }
    } else {
        if (a > b) { return 1 } else if (a < b) { return -1 } else { return 0 }
    }
}

exports.cls = function (el, css_class_name) {
    /// <summary>Set|Get CSS class name (and return [el] after success Set)</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="css_class_name" type="string">CSS class name to set (if empty - return CSS class name as get)</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.className != 'undefined') {
        if (typeof css_class_name == 'undefined') {
            return el.className;
        } else {
            el.className = '' + css_class_name + "";
            return el;
        }
    }
    return false;
}

exports.style = function (el, css_rules) {
    /// <summary>Set|Get in-line CSS rules into|from [style] attribute (and return [el] after success Set)</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="class_rules" type="string">CSS rules to set (or empty to Get)</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined') {
        if (typeof css_rules == 'undefined') {
            return exports.attr(el, 'style');
        } else {
            exports.attr(el, 'style', '' + css_rules + "");
            return el;
        }
    }
    return false;
}

exports.hcls = function (el, class_style) {
    /// <summary>Has class style name</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="class_style" type="string">style class name to detect</param>
    if (typeof class_style == 'undefined') return false;
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.className != 'undefined') {
        return el.className.contains(class_style);
    }
    return false;
}

exports.acls = function (el, class_to_add) {
    /// <summary>Add style class (and return [el] after success add)</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="class_to_add" type="string">style class name to add</param>
    if (typeof class_to_add == 'undefined') return false;
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.className != 'undefined') {
        if (el.className.contains(class_to_add)) return false;
        el.className = (el.className + ' ' + class_to_add).trim();
        return el;
    }
    return false;
}

exports.rcls = function (el, class_to_remove) {
    /// <summary>Remove style class (and return [el] after success remove)</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="class_to_remove" type="string">style class name to remove (if absent - remove [class] attribute)</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.className != 'undefined') {
        if (typeof class_to_remove != 'undefined') {
            var cls = el.className;
            el.className = cls.replace(class_to_remove, '').trim();
            return el;
        } else {
            exports.rattr(el, 'class');
            return el;
        }
    }
    return false;
}

exports.even = function(number) {
    /// <summary>Is number Even</summary>
    /// <param name="number" type="number">return (number % 2 == 0)</param>
    return (number % 2 == 0);
}

exports.isarr = function (array) {
    /// <summary>Detect is it Array</summary>
    /// <param name="array" type="array[]">array (not object)</param>
    return Object.prototype.toString.apply(array) === '[object Array]';
}

exports.rifa = function (array, item) {
    /// <summary>Remove Item From Array</summary>
    /// <param name="array" type="array[]/object{}">array or object</param>
    /// <param name="item" type="array[]/object{}">first level keyName of item for remove it</param>
    var new_arr = [];
    for (var i in array) {
        if (array.hasOwnProperty(i)) {
            if (array[i] != item) {
                new_arr.push(array[i]);
            }
        }
    }
    array = new_arr;
    return array;
}

exports.dt = function(date, isTimeFirst, useLocalTimeZone, dateDelimiter, timeDelimiter, currentTimeZoneOffset, showMilliseconds, millisecondsDelimiter) {
    /// <summary>Get DATE and TIME (return: formated string)</summary>
    /// <param name="date" type="date|number|string">date</param>
    /// <param name="isTimeFirst" type="boolean">for return time first before date</param>
    /// <param name="useLocalTimeZone" type="boolean">change date to local TimeZone</param>
    /// <param name="dateDelimiter" type="string">delimiter (default '-')</param>
    /// <param name="timeDelimiter" type="string">delimiter (default ':')</param>
    dateDelimiter = dateDelimiter || '.';
    timeDelimiter = timeDelimiter || ':';
    millisecondsDelimiter = millisecondsDelimiter || '.';
    currentTimeZoneOffset = currentTimeZoneOffset || new Date().getTimezoneOffset();
    showMilliseconds = showMilliseconds || false;
    //currentTimeZoneOffset *= 60;
    if (typeof date == 'string') {
        // only for parsing DOS time format "Mon 01/20/2014  9:45:28.10"
        // from file created by TeamCity: jsVersion.txt
        if (date.contains('.') && date.contains(':') && date.contains(' ')) {
            var raw = date.split(' ');
            var part = '';
            var dt = new Date();
            var dr = 0;
            var tr = '';
            for (var i = 0; i < raw.length; i++) {
                part = raw[i];
                if (part.contains('https://www.icmarkets.com/')) { // date
                    dr += Date.parse(part);
                } else
                    if (part.contains('.') && !part.contains(':')) { // date
                        dr += Date.parse(part);
                    } else
                        if (part.contains('-')) { // date
                            dr += Date.parse(part);
                        }

                if (part.contains(':') && part.contains('.')) { // time
                    tr = part.split('.')[0];
                } else
                    if (part.contains(':') && part.contains(',')) { // time
                        tr = part.split(',')[0];
                    } else
                        if (part.contains(':')) { // time
                            tr = part;
                        }
            }
            dt.setTime(dr);
            var composedDateTime = dt.toDateString() + ' ' + tr;
            var datetime = Date.parse(composedDateTime);
            date = new Date(datetime);
        } else {
            date = new Date(parseInt(date, 10));
        }
    } else if (typeof date == 'undefined' || date === null) {
        date = new Date();
        date.setMinutes(date.getMinutes() - new Date().getTimezoneOffset());    
    } else if (typeof date != 'date') {date = new Date(parseInt(date, 10));}
    var d = date;
    useLocalTimeZone = useLocalTimeZone || true;
    var h = '' + d.getHours(); if(h.length < 2) h = '0' + h;
    var m = '' + d.getMinutes(); if (m.length < 2) m = '0' + m;
    var s = '' + d.getSeconds(); if (s.length < 2) s = '0' + s;
    var ms = '' + d.getMilliseconds(); if (ms.length < 2) ms = '00' + s; if (ms.length < 3) ms = '0' + s;
    var y = '' + d.getFullYear();
    var i_i = (d.getMonth() + 1);
    var ii = '' + i_i; if (ii.length < 2) ii = '0' + ii;
    var a = '' + d.getDate(); if (a.length < 2) a = '0' + a;
    var dxx = a + dateDelimiter + ii + dateDelimiter + y;
    var txx = h + timeDelimiter + m + timeDelimiter + s;
    var res = "";
    if (isTimeFirst) {
        res = txx + (showMilliseconds ? millisecondsDelimiter + ms : '') + " " + dxx;
    } else {
        res = dxx + " " + txx + (showMilliseconds ? millisecondsDelimiter + ms : '');
    }
    return res;
}

if ([].indexOf) {
    exports.iof = function (array, value) {
        /// <summary>Cross-browser [].indexOf</summary>
        if (typeof array != "undefined" && typeof value != "undefined")
            return array.indexOf(value);
        else return -1;
    }
} else {
    exports.iof = function (array, value) {
        /// <summary>Cross-browser [].indexOf</summary>
        if (typeof array != "undefined" && typeof value != "undefined") {
            for (var i = 0, len = array.length; i < len; i++) {
                if (array[i] === value) return i;
            }
        }
        return -1;
    }
}

exports.arrdel = function (array, key) {
    /// <summary>Change array without deleted item by key</summary>
    /// <param name="array" type="array[]/object{}">array or object for DELETE item by key</param>
    /// <param name="key" type="number">key of item to DELETE</param>
    if (typeof array == 'undefined' || typeof key == 'undefined') return false;
    var withoutDeletedItemArray = [];
    for (var i in array) {
        if (array.hasOwnProperty(i)) {
            if (i != key) {
                withoutDeletedItemArray[i] = (array[i]);
            }
        }
    }
    return withoutDeletedItemArray;
}

exports.arrsli = function (array, start, count) {
    /// <summary>Get new Sliced array (range of input array)</summary>
    /// <param name="array" type="array[]/object{}">array or object for SLICE</param>
    /// <param name="start" type="number">index of start element to SLICE</param>
    /// <param name="count" type="number">count of array items for SLICE (delete)</param>
    if (typeof array == 'undefined') return false;
    if (typeof start == 'undefined') start = 0;
    var len = exports.arrlen(array);
    if (typeof count == 'undefined') count = len;
    var i, index = 0, slicedArray = [];
    for (i = 0; i < len; i++) {
        if ((index >= start) && (index < (start + count))) {
            slicedArray.push(array[i]);
        }
        index++;
    }
    return slicedArray;
}

exports.arrkey = function (array, item) {
    /// <summary>Get keyName of array(object) Item (return: from 0 to exports.arrlen(array) or false if absent)</summary>
    /// <param name="array" type="array[]/object{}">array or object for calculate it first childrens count</param>
    /// <param name="item" type="string">key value of item to get this counted index</param>
    var key = false;
    for (var i in array) {
        if (array.hasOwnProperty(i)) {
            if (array[i] === item) {
                key = i;
                break;
            };
        }
    }
    return key;
}


exports.arrlen = function (array) {
    /// <summary>Get Length of Array (return: array[] or object{only first level} length)</summary>
    /// <param name="array" type="array[]/object{}">array or object for calculate it first childrens count</param>
    var len = 0;
    for (var i in array) {
        if (array.hasOwnProperty(i)) {
            len++;
        }
    }
    return len;
}

exports.clone = function (o) {
    /// <summary>Clone Object (return: object copy) Example: var copyObj = cloneObject(sourceObj); Warning: do not try clone DOM-object!</summary>
    /// <param name="o" type="object">object for create it copy</param>
    if (o == null) return o;
    if ('object' !== typeof o) {
        return o;
    }
    var c = 'function' === typeof o.pop ? [] : {};
    var p, v;
    for (p in o) {
        if (o.hasOwnProperty(p)) {
            v = o[p];
            if (typeof v === 'object') {
                if (v) {
                    if (typeof v.getMonth === 'function') {
                        c[p] = v;
                    } else {
                        c[p] = exports.clone(v);
                    }
                } else {
                    c[p] = exports.clone(v);
                }
            } else {
                c[p] = v;
            }
        }
    }
    return c;
}

exports.$$ = function (id) {
    /// <summary>Get DOM element by id</summary>
    /// <param name="id" type="string">return document.getElementById(id);</param>
    if (typeof id == 'string') {
        if (id.contains('#') || id.contains('.') || id.contains(' ') || id.contains('>') || id.contains(':')) {
            return exports.findone(id);
        } else
            return document.getElementById(id);
    } else if (typeof id === 'object') {
        return id;
    } else {
        return null;
    }
}

exports.findall = function (query, base) {
    /// <summary>Get All elements by CSS selector [document|base.querySelectorAll(query)]</summary>
    /// <param name="query" type="string">CSS selector rules</param>
    base = exports.getElement(base) || document;
    if (typeof query == 'string') {
        return base.querySelectorAll(query);
    } else {
        return null;
    }
}

exports.findone = function (query, base) {
    /// <summary>Get first element by CSS selector [document|base.querySelector(query)]</summary>
    /// <param name="query" type="string">CSS selector rules</param>
    base = exports.getElement(base) || document;
    if (typeof query == 'string') {
        return base.querySelector(query);
    } else {
        return null;
    }
}

exports.attr = function (el, attribute_name, attribute_value) {
    /// <summary>GET or SET inline attribute:</summary>
    /// <param name="el" type="string|DOM">string = element id, DOM = DOM element object</param>
    /// <param name="attribute_name" type="string>attribute name (for GET)</param>
    /// <param name="attribute_value" type="string>attribute value (for SET)</param>
    el = arguments[0];
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.getAttribute != 'undefined' && typeof el.setAttribute != 'undefined') {
        if (exports.arrlen(arguments) == 2) { //get
            if (exports.hattr(el, arguments[1])) {
                return el.getAttribute(arguments[1]);
            } else {
                return null;
            }
        }
        if (exports.arrlen(arguments) == 3) { //set
            el.setAttribute(arguments[1], arguments[2]);
            if (arguments[1] == 'title') {
                //exports.tt(true, el); // convert [title] attribute of DOM node to [tooltip] fpr use custom in ToolTips
            }
            return el;
        }
    }
    return false;
}

exports.hattr = function (el, attribute_to_find) {
    /// <summary>Detect is element has inline attribute by name</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="attribute_to_find" type="string">attribute name</param>
    if (typeof attribute_to_find == 'undefined') return false;
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.hasAttribute != 'undefined') {
        return el.hasAttribute(attribute_to_find);
    }
    return false;
}

exports.rattr = function (el, attribute_to_remove) {
    /// <summary>Remove inline attribute by name</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="attribute_to_remove" type="string">attribute name</param>
    if (typeof attribute_to_remove == 'undefined') return false;
    el = exports.getElement(el); if (!el) return false;
        if (typeof el != 'undefined' && typeof el.removeAttribute != 'undefined') {
            el.removeAttribute(attribute_to_remove);
            return el;
        }
    return false;
}

exports.live = function(parameters_object /*tag, id, target, class_name, display, inline_style, inner_html, before*/) {
    /// <summary>Create DOM Element (return successfull created element)</summary>
    /// <param name="tag" type="string">tag name: 'div', 'span' etc.</param>
    /// <param name="id" type="string|null">element id ('?' - autogenerate id; empty - create without id)</param>
    /// <param name="target" type="string|DOM|null">target: id|DOM element|null - document.body</param>
    /// <param name="display" type="boolean|null">show element after create (null - yes)</param>
    /// <param name="cls" type="string|null">add inline className attribute (null - no)</param>
    /// <param name="style" type="string|null">add inline style attribute (null - no)</param>
    /// <param name="attributes" type="objects array">add inline attributes [{key1:value1}, {key2:value2}]</param>
    /// <param name="html" type="string|null">add innerHTML to element (null - nothing)</param>
    /// <param name="insertBefore_target" type="number|string|DOM|null">to insert before this sibling element (number - index of parentElement.children array; strind - id; DOM - element; null - append to end)</param>
    if (typeof parameters_object != 'object') return null;
    var tag, id, target, display, cls, style, attributes, html, insertBefore_target;
    if (typeof parameters_object.tag != 'string')
        tag = 'DIV'; // default
    else
        tag = parameters_object.tag.toUpperCase();
    if (tag.toLowerCase() == 'br') return null;
    id = parameters_object.id || null;
    if (id == '?') id = (tag + exports.id());
    if (typeof parameters_object.target == 'undefined' || parameters_object.target == null) {
        target = document.getElementsByTagName("body")[0];
    } else if (typeof target == 'string') target = document.getElementById(target);
    else target = parameters_object.target;
    if (typeof target == 'undefined' || target == null) {
        target = document.getElementsByTagName("body")[0];
    }
    if (typeof parameters_object.display != 'undefined') {
        display = (parameters_object.display === true);
    } else display = null;
    cls = parameters_object.cls || null;
    style = parameters_object.style || null;
    attributes = parameters_object.attributes || null;
    insertBefore_target = parameters_object.before || null;
    html = parameters_object.html || null;
    //try {
        var d = document.createElement(tag);
        if (id !== null) d.id = id;
        if (cls !== null) d.className = cls;
        if (html !== null) d.innerHTML = html;
        if (style !== null) d.setAttribute("style", style);
        if (display === false) d.style.display = "none";
        if (attributes !== null && exports.arrlen(attributes) > 0) {
            exports.each(attributes, function (idx, item) {
                exports.each(item, function (name, value) {
                    d.setAttribute(name, value);
                });
            });
        }
        if (typeof insertBefore_target != 'undefined') { // insert before element
            if (typeof insertBefore_target == 'number') {
                insertBefore_target = target.children[insertBefore_target];
            } else if (typeof insertBefore_target == 'string') {
                insertBefore_target = exports.$$(insertBefore_target);
            }
            target.insertBefore(d, insertBefore_target);
        } else { // append to end
            target.appendChild(d);
        }
        if (tag.toLowerCase() == 'input') {
            exports.attr(d, 'spellcheck', 'false');
        }
        return d;
    //} catch (e) { }
}

exports.each = function (array, callback){
    /// <summary>Orepate with all Array|Object Items of first level</summary>
    /// <param name="array" type="array|object">source array or object</param>
    /// <param name="callback" type="function">callback returned index and item | or null if error</param>
    if (typeof array == 'undefined' || typeof callback == 'undefined' || typeof callback != 'function') callback();
    for (var i in array){
        if (array.hasOwnProperty(i)) {
            callback(i, array[i]);
        }
    }
}

exports.kill = function (el) {
    /// <summary>Remove DOM Element</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined') {
        var parent = el.parentElement || document.body;
        parent.removeChild(el);
        //if (typeof exports.tt_c != 'undefined' && exports.tt_c.showed) exports.tt_c.hide(); // hide tooltip after element removed
    }
    return true;
}

exports.html = function (el, html) {
    /// <summary>Set or GET innerHTML of DOM element</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="html" type="string">html string to Set (or empty to Get)</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.innerHTML != 'undefined' && typeof html != 'undefined') {
        el.innerHTML = html;
        return el;
    }
    if (typeof el != 'undefined' && typeof el.innerHTML != 'undefined' && typeof html == 'undefined') {
        return el.innerHTML;
    }
    return false;
}

exports.text = function (el) {
    /// <summary>GET innerText of DOM element</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined') {
        return el.innerText || el.textContent;
    }
    return false;
}

exports.scrollup = function (el) {
    /// <summary>Scroll element content to TOP</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.scrollTop != 'undefined') {
        el.scrollTop = 0;
        return el;
    }
    return false;
}

exports.scrolldown = function (el) {
    /// <summary>Scroll element content to BOTTOM</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.scrollTop != 'undefined') {
        el.scrollTop = el.scrollHeight + 20;
        return el;
    }
    return false;
}

exports.show = function (el, value, timeoutToAutoKill) {
    /// <summary>SHOW element</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="value" type="string">value of display attribute (default: 'block')</param>
    /// <param name="timeoutToAutoKill" type="number">timeout to kill after timeoutToAutoKill ms</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el == 'undefined' || typeof el.style == 'undefined') return false;
    if (typeof value == 'undefined' && typeof value != 'string') value = 'block';
    el.style.display = value;
    if (typeof timeoutToAutoKill != 'undefined' && !isNaN(timeoutToAutoKill) && typeof setTimeout != 'undefined') {
        var el_ = el;
        setTimeout(function () { exports.kill(el_); }, timeoutToAutoKill);
    }
    return el;
}

exports.hide = function (el) {
    /// <summary>HIDE element</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.style != 'undefined') {
        el.style.display = 'none';
        return el;
    }
    return false;
}

var me_vendors = ['-webkit-', '-moz-', '-o-', '-ms-', '-khtml-', ''];
exports.toCamelCase = function (str) {
    return str.toLowerCase().replace(/(\-[a-z])/g, function($1){
            return $1.toUpperCase().replace('-', '');
        });
    };
exports.css3 = function (el, property, value){
    /// <summary>Set supported CSS3 style of element</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="property" type="string">property of CSS3 style</param>
    /// <param name="value" type="string">value of CSS3 style property</param>
    for (var i = 0, l = me_vendors.length; i < l; i++) {
        var p = exports.toCamelCase(vendors[i] + property);
        if (el.style.hasOwnProperty(p))
            el.style[p] = value;
    }
};

exports.opacity = function(el, opacity) {
    /// <summary>Set Opacity of element</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="opacity" type="string">value of Opacity</param>
    el = exports.getElement(el); if (!el) return false;
    if (typeof el != 'undefined' && typeof el.style != 'undefined') {
        if (typeof opacity == 'undefined' || typeof opacity != 'string') opacity = '1';
        el.style.opacity = opacity;
    }
    return el;
}

exports.rnd = function (min, max) {
    /// <summary>Get Random number from limitations (return Math.floor(Math.random() * (n - m + 1)) + m;)</summary>
    /// <param name="m" type="number|string">minimal number</param>
    /// <param name="n" type="number|string">maximal number</param>
    min = parseInt(min, 10);
    max = parseInt(max, 10);
    if (!isNaN(min) && !isNaN(max)) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    return false;
}

exports.symbol = function () {
    /// <summary>Get random english symbol (var symBase = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";)</summary>
    var symBase = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_";
    var index = exports.rnd(0, symBase.length - 1);
    return symBase[index];
}

exports.wheel = function (el, callback) {
    /// <summary>Attach cross-browser Mouse Wheel Event to Element</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    el = exports.getElement(el); if (!el) return false;
    if (el.addEventListener) {
        el.addEventListener("mousewheel", mouseWheelHandler, false);//     IE9, Chrome, Safari, Opera
        el.addEventListener("DOMMouseScroll", mouseWheelHandler, false);// Firefox
    } else el.attachEvent("onmousewheel", mouseWheelHandler);//            IE 6/7/8
    function mouseWheelHandler(e) {
        e = window.event || e; //                                               old IE support
        exports.no(e, true);
        var target = e.target || e.srcElement;
        var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));//   cross-browser wheel delta
        //callback(delta, target);
        e.wheelDelta = delta;
        callback(e);
        return false;
    }
    return el;
}

exports.offsetSum = function(el_) {
    /// <summary>Get offset position of Element (by summ offsets of all parent elements)</summary>
    /// <param name="el_" type="DOM">DOM element object</param>
    var left = 0, top = 0;
    while(el_) {
        top = top + parseInt(el_.offsetTop, 10);
        left = left + parseInt(el_.offsetLeft, 10);
        el_ = el_.offsetParent;
    }
    return { left: left, top: top }
}

exports.offsetRect = function (el_) {
    /// <summary>Get offset position of Element (by use getBoundingClientRect of element)</summary>
    /// <param name="el_" type="DOM">DOM element object</param>
    var box = el_.getBoundingClientRect();
    var body = document.body;
    var docElem = document.documentElement;
    var scrollTop = window.pageYOffset || docElem.scrollTop || body.scrollTop;
    var scrollLeft = window.pageXOffset || docElem.scrollLeft || body.scrollLeft;
    var clientTop = docElem.clientTop || body.clientTop || 0;
    var clientLeft = docElem.clientLeft || body.clientLeft || 0;
    var top  = box.top +  scrollTop - clientTop;
    var left = box.left + scrollLeft - clientLeft;
    //return { left: Math.round(left), top: Math.round(top) };
    return { left: left, top: top };
}

exports.offset = function (el) {
    /// <summary>Cross-browser OFFSET position of Element (return object {l:left, t:top})</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    el = exports.getElement(el); if (!el) return false;
    if (el.getBoundingClientRect) {
        return exports.offsetRect(el);
    } else { // for old browsers
        return exports.offsetSum(el);
    }
}

exports.box = function (el, obj_ltwh, noChangePositonToAbsolute) {
    /// <summary>SET|GET one or multiply parameters of Left_Top_Width_Height object of Element (return: DOM element (or false if error))</summary>
    /// <param name="el" type="string|DOM">string - element id; DOM - DOM element object</param>
    /// <param name="obj_ltwh" type="object">to Set { l: left, t: top, w: width, h: height } (or empty to Get)</param>
    /// <param name="noChangePositonToAbsolute" type="boolean">true for not set position of element to Absolute</param>
    el = exports.getElement(el); if (!el) return false;
    if (el == null) return false;
    if (typeof obj_ltwh == 'undefined' || typeof obj_ltwh != 'object') {
        var offset = exports.offset(el);
        var l = offset.left;
        var t = offset.top;
        var w = parseFloat(getComputedStyle(el).width) || el.offsetWidth;
        var h = parseFloat(getComputedStyle(el).height) || el.offsetHeight;
        return { /*short*/ l: l, t: t, w: w, h: h, /*full*/ left: l, top: t, width: w, height: h };
    } else {
        // position
        if (noChangePositonToAbsolute !== true) el.style.position = 'absolute';
        // left
        if (typeof obj_ltwh.l != 'undefined') {
            el.style.left = '' + obj_ltwh.l + 'px';
        } else if (typeof obj_ltwh.left != 'undefined') {
            el.style.left = '' + obj_ltwh.left + 'px';
        }
        // top
        if (typeof obj_ltwh.t != 'undefined') {
            el.style.top = '' + obj_ltwh.t + 'px';
        } else if (typeof obj_ltwh.top != 'undefined') {
            el.style.top = '' + obj_ltwh.top + 'px';
        }
        // width
        if (typeof obj_ltwh.w != 'undefined') {
            el.style.width = '' + obj_ltwh.w + 'px';
        } else if (typeof obj_ltwh.width != 'undefined') {
            el.style.width = '' + obj_ltwh.width + 'px';
        }
        //height
        if (typeof obj_ltwh.h != 'undefined') {
            el.style.height = '' + obj_ltwh.h + 'px';
        } else if (typeof obj_ltwh.height != 'undefined') {
            el.style.height = '' + obj_ltwh.height + 'px';
        }
    }
    return el;
};

exports.browser = function () {
    var searchString = function (b) { for (var a = 0; a < b.length; a++) { var c = b[a].string, d = b[a].prop; exports.versionSearchString = b[a].versionSearch || b[a].identity; if (c) { if (-1 != c.indexOf(b[a].subString)) return b[a].identity } else if (d) return b[a].identity } };
    var searchVersion = function (b) { var a = b.indexOf(exports.versionSearchString); if (-1 != a) return parseFloat(b.substring(a + exports.versionSearchString.length + 1)) };
    var dataBrowser = [
        { string: navigator.userAgent, subString: "OPR", identity: "Opera", versionSearch: "OPR" },
        { string: navigator.userAgent, subString: "Chrome", identity: "Chrome" },
        { string: navigator.userAgent, subString: "OmniWeb", versionSearch: "OmniWeb/", identity: "OmniWeb" },
        { string: navigator.vendor, subString: "Apple", identity: "Safari", versionSearch: "Version" },
        { prop: window.opera, identity: "Opera", versionSearch: "Version" },
        { string: navigator.vendor, subString: "iCab", identity: "iCab" },
        { string: navigator.vendor, subString: "KDE", identity: "Konqueror" },
        { string: navigator.userAgent, subString: "FF", identity: "Firefox" },
        { string: navigator.vendor, subString: "Camino", identity: "Camino" },
        { string: navigator.userAgent, subString: "Netscape", identity: "Netscape" },
        { string: navigator.userAgent, subString: "MSIE", identity: "IE", versionSearch: "MSIE" },
        { string: navigator.userAgent, subString: "Gecko", identity: "Mozilla", versionSearch: "rv" },
        { string: navigator.userAgent, subString: "Mozilla", identity: "Netscape", versionSearch: "Mozilla" }
    ];
    var dataOS = [
        { string: navigator.platform, subString: "Win", identity: "Windows" },
        { string: navigator.platform, subString: "Mac", identity: "Mac" },
        { string: navigator.userAgent, subString: "iPhone", identity: "iPhone/iPod" },
        { string: navigator.platform, subString: "Linux", identity: "Linux" }
    ];
    return {
        name: searchString(dataBrowser) || "an unknown browser",
        version: searchVersion(navigator.userAgent) || searchVersion(navigator.appVersion) || "an unknown version",
        os: searchString(dataOS) || "an unknown OS"
    }
};

// Cross-browser implementation of Attach|Remove Event
if(document.addEventListener) {
    exports.on = function (el, type, handler, capture){
        el = exports.getElement(el); if (!el) return false;
        el.addEventListener(type, handler, !!capture);
        return handler; // ex. for remove
    }
    exports.off = function (el, type, handler, capture){
        el = exports.getElement(el); if (!el) return false;
        el.removeEventListener(type, handler, !!capture);
        return true;
    }
} else if (document.attachEvent) {
    exports.on = function (el, type, handler) {
        el = exports.getElement(el); if (!el) return false;
        type = "on" + type;
        var withHandler = function() {
            return handler.apply(el, arguments);
        };
        el.attachEvent(type, withHandler);
        return withHandler;
    }
    exports.off = function(el, type, handler){
        el = exports.getElement(el); if (!el) return false;
        type = "on" + type;
        el.detachEvent(type, handler);
        return true;
    }
} else {
    exports.on = function(el, type, handler){
        el = exports.getElement(el); if (!el) return false;
        type = "on" + type;
        el.store = el.store || {};
        if(!el.store[type]){
            el.store[type] = { counter: 1 };
            el[type] = function(){
                for(var key in item){
                    if(item.hasOwnProperty(key)){
                        if(typeof item[key] == "function"){
                            item[key].apply(this, arguments);
                        };
                    };
                };
            };
        };
        var item = el.store[type], id = item.counter++;
        item[id] = handler;
        return id;
    };
    exports.off = function(el, type, handlerId){
        el = exports.getElement(el); if (!el) return false;
        type = "on" + type;
        if(el.store && el.store[type] && el.store[type][handlerId]) el.store[type][handlerId] = undefined;
        return true;
    };
};
    
/* Cross-browser AJAX
    * @param string url
    * @param object callback
    * @param mixed data
    * @param null x
    */
exports.net = function (url, callback, data, cache) {
    if(data && typeof(data) === 'object') {
        data = exports.net.uri(data, cache);
    }
    try {
        var x = new(XMLHttpRequest || ActiveXObject)('MSXML2.XMLHTTP.3.0');
        x.open(data ? 'POST' : 'GET', url, 1);
        x.setRequestHeader('X-Requested-With', 'XMLHttpRequest');
        x.setRequestHeader('Content-type', 'application/x-www-form-urlencoded');
        x.onreadystatechange = function () {
            x.readyState > 3 && callback && callback(x.responseText, x);
        };
        x.send(data)
    } catch (e) {}
};

exports.net.uri = function(o, cache) {
    var x, y = '', e = encodeURIComponent;
    for (x in o) {
        y += '&' + e(x) + '=' + e(o[x]);
    }
    return y.slice(1) + (! cache ? '&_t=' + new Date().valueOf() : '');
};

exports.net.collect = function (a, f) {
    var n = [], i, v;
    for (i = 0; i < a.length; i++) {
        v = f(a[i]);
        if (v != null) n.push(v);
    }
    return n;
};
    
exports.net.serialize = function (f) {
    function g(n) {
        return f.getElementsByTagName(n);
    };
    var nv = function (e) {
        if (e.name) { return encodeURIComponent(e.name) + '=' + encodeURIComponent(e.value); } else { return null }
    };
    var i = exports.net.collect(g('input'), function (i) {
        if ((i.type != 'radio' && i.type != 'checkbox') || i.checked) { return nv(i); } else { return null }
    });
    var s = exports.net.collect(g('select'), nv);
    var t = exports.net.collect(g('textarea'), nv);
    return i.concat(s).concat(t).join('&');
};

exports.defined = function (obj) {
    return typeof obj !== 'undefined';
};

exports.pointInBox = function (point, elementLTWH, clipperLTWH) {
    var x = point.x || point.pageX;
    var y = point.y || point.pageY;
    var res = false;
    if (x >= elementLTWH.l && x <= (elementLTWH.l + elementLTWH.w) &&
        y >= elementLTWH.t && y <= (elementLTWH.t + elementLTWH.h)) {
        res = true;
    }
    if (res && typeof clipperLTWH != 'undefined') {
        res = exports.pointInBox(point, clipperLTWH);
    }
    return res;
};

var me = {};
exports.calculateWidth = function (text,  config) {
    if (!me.canvas) {
        me.canvas = $('<canvas />', {
            width: '100',
            height: '100'
        })[0];
        me.ctx = me.canvas.getContext('2d');
        me.fontFamily = 'Tahoma';
        me.fontSize = 12;
        me.paddingLeft = 5;
        me.paddingRight = 5;
        me.ctx.font = me.fontSize + 'px ' + me.fontFamily;
    }
    text = text || '';
    config = config || {};
    var changes = false;
    if (config.fontFamily && (typeof config.fontFamily == 'string')) {
        me.fontFamily = config.fontFamily;
        changes = true;
    }
    if (config.fontSize && (typeof config.fontSize == 'number')) {
        me.fontSize = config.fontSize;
        changes = true;
    }
    if (changes) {
        me.ctx.font = me.fontSize + 'px ' + me.fontFamily;
    }
    if (config.paddingLeft != null && typeof config.paddingLeft == 'number') { me.paddingLeft = config.paddingLeft; }
    if (config.paddingRight != null && typeof config.paddingRight == 'number') { me.paddingRight = config.paddingRight; }

    var measureText = me.ctx.measureText(text);
    return (me.paddingLeft + measureText.width + me.paddingRight);
};

exports.setText = function ($node, text) {

    var node = $node[0];
    var firstChild = node.firstChild;
    if (text == null) {
        text = '';
    }
    if (!firstChild) {
        var currentTextContent = node.textContent;
        if (node.textContent == null) {
            currentTextContent = '';
        }
        if (currentTextContent !== text) {
            node.textContent = text; // first add text node
            return true;
        }
    } else if (firstChild.nodeValue !== text) {
        firstChild.nodeValue = text;  // just change text node
        return true;
    }
    return false;
};

exports.fillTemplate = function (data) {
    if (data && data.length) {
        for (var i = 0, len = data.length, item, $el, val; i < len; i++) {
            item = data[i];
            $el = data[i][0];
            val = data[i][1];
            exports.setText($el, val);
        }
    }
};

exports.getItemFromObjectsArrayByKeyAndValue = function (arr, key, value) {
    if (arr && arr.length) {
        for (var i = 0, len = arr.length, item, key, val; i < len; i++) {
            item = arr[i];
            if (item && item[key] === value) {
                return item;
            }
        }
    }
};

},{}],21:[function(require,module,exports){
'use strict';

var Utils = require('../utils');
var EventDriven = require('../model/event_driven').EventDriven;

var UI = function (params) {
    params = params || {};
    this.$container = params.container == null ? $('<' + (params.nodeType || 'div') + '>') : $(params.container);
    this.container = this.$container.get(0);
    this.$container.addClass(params.className);
    this.parent = params.parent;

    if (app && app.debugMode && this.container) {
        this.$container.attr('_class_type', Utils.getObjectClassName(this));
        this.container.AN_OWNER_UI = this;
    }

    this.appendTo(params.appendTo || this.parent);
};

Utils.extend(UI, EventDriven);

UI.prototype.appendTo = function (parent) {
    if (!parent) {
        parent = $('body');
    };
    if (parent instanceof Element) {
        parent.appendChild(this.$container[0]);
    } else if (parent instanceof jQuery || (parent[0] && parent.context)) {
        parent.append(this.$container);
    } else if (parent instanceof UI) {
        parent.$container.append(this.$container);
    } else {
        console.trace('ERROR: UI want to append to unsupported parent', parent);
    }
};

UI.prototype.show = function (force) {
    if (!this.hidden && !force) {
        return this;
    }
    this.hidden = false;

    this.$container.css('display', '');
    if (!this.$container.parent().is(':hidden') && this.$container.is(':hidden')) {
        this.$container.show();
    }

    return this;
};

UI.prototype.hide = function (force) {
    if (this.hidden && !force) {
        return this;
    }
    this.hidden = true;
    this.$container.hide();
    return this;
};

UI.prototype.unBindEvents = function () {
    //..
};

UI.prototype.destroy = function () {
    this.unBindEvents();

    if (this.container) {
        delete this.container.AN_OWNER_OBJECT;
        $(this.container).remove();
        this.container = null;
    }

    if (this.$container) {
        this.$container.remove();
        this.$container = null;
    }
};

exports.UI = UI;

},{"../model/event_driven":19,"../utils":20}],22:[function(require,module,exports){
'use strict';

var Utils = require('../_/utils');
var EventDriven = require('../_/model/event_driven').EventDriven;
var CONSTANTS = require('../_/constants').CONSTANTS;
var log = require('../_/component/logger').log;
var CalculatorsList = require('../_/component/calculators_list').CalculatorsList;
var ConverterCurrencyList = require('../_/component/converter_currency_list').ConverterCurrencyList;
var TradeSizeInput = require('../_/component/trade_size_input').TradeSizeInput;

function ConverterCalculator (params) {
    params = params || {};
    this.app = params.app;
    this.connection = params.connection;
    this.currencyFrom = CONSTANTS.CALCULATORS.CONVERTER_CALCULATOR.DEFAULT_CURRENCY_FROM;
    this.currencyTo = CONSTANTS.CALCULATORS.CONVERTER_CALCULATOR.DEFAULT_CURRENCY_TO;
    this.amount = CONSTANTS.CALCULATORS.CONVERTER_CALCULATOR.DEFAULT_AMOUNT;
    this.currentConversionPrice = '1';
    this.converterValue = null;
    $(window).resize(function() {
        this.hideAllMenus();
    }.bind(this));
};

Utils.extend(ConverterCalculator, EventDriven);

ConverterCalculator.prototype.hideAllMenus = function () {
    if (this.calculatorsList) this.calculatorsList.hide();
    if (this.currencyFromList) this.currencyFromList.hide();
    if (this.currencyToList) this.currencyToList.hide();
};

ConverterCalculator.prototype.getTemplate = function () {
    var template = '\
        <div class="calculators converter-container">\
            <div class="calculator-top col-md-8">\
                <div class="calc-header">\
                    <div class="calc-selector calc-selector-name">&nbsp;</div>\
                </div>\
                <div class="calc-container">\
                    <div class="calc-section calc-left">\
                        <div class="calc-label calc-from-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-from-value">&nbsp;</div>\
                        <div class="calc-label calc-amount-label">&nbsp;</div>\
                        <div class="calc-value calc-input calc-amount-input"></div>\
                    </div>\
                    <div class="calc-section calc-right">\
                        <div class="calc-label calc-to-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-to-value">&nbsp;</div>\
                        <div class="calc-label calc-price-label">&nbsp;</div>\
                        <div class="calc-value calc-info calc-price-value">&nbsp;</div>\
                    </div>\
                </div>\
                <div class="calc-footer">\
                    <div class="calc-result calc-result-label">&nbsp;</div>\
                </div>\
            </div>\
            <div class="calculator-bottom col-md-4">\
                <div class="info-container info-left">\
                    <span class="info-bold">&laquo;<b class="calc-citation-label">&nbsp;</b>&raquo;</span>\
                    <span class="info-footer calc-author-label">&nbsp;</span>\
                </div>\
                <div class="info-container info-right">\
                    <span class="info-header info-bold calc-formula-label">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain1">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain2">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain3">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain4">&nbsp;</span>\
                    <span class="info-footer calc-formula-result-label">&nbsp;</span>\
                </div>\
            </div>\
                <div class="common-lang-switch">\
                <div class="common-lang-btn" data-option="en">en</div>\
                <div class="common-lang-btn" data-option="ru">ru</div>\
            </div>\
        </div>\
    ';
    return template;
};

ConverterCalculator.prototype.refresh = function (data, options) {
    options = options || {};

    if (!this.currencyFromList || !data)  {
        // refresh only after all components created
        // no sense to refresh without actual data
        return;
    }

    var from = this.currencyFrom;
    var to = this.currencyTo;
    var price = data.rates[to] || 1;
    var symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', from + to);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', from + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + to);
    if (!symbolInfo) {
        symbolInfo = {
            d: 5,
            p: 0.0001
        }
    }
    var digits = symbolInfo.d;
    var pip = symbolInfo.p;
    this.converterValue = (this.amount * price).toFixed(2);
    this.currentConversionPrice = price.toFixed(digits);

    var _this = this;
    $('.common-lang-switch .common-lang-btn').each(function (e) {
        if ($(this).attr('data-option') === _this.app.language) {
            $(this).addClass('active');
        }
    });

    if (options.ignore !== 'amountInput') {
        this.amountInput.setValue(this.amount);
    }

    var conversionPair = this.currencyFrom + '/' + this.currencyTo;
    var amountSize = Utils.formatToThree(this.amount, ',');
    var converterValue = Utils.formatToThree(this.converterValue, ',');

    Utils.fillTemplate([
        [this.$selectorName, L('converter.calc.selector')],
        [this.$fromLabel, L('converter.calc.from.label')],
        [this.$fromValue, this.currencyFromList.getTitleByData(this.currencyFrom)],
        [this.$amountLabel, L('converter.calc.amount.label')],
        [this.$toLabel, L('converter.calc.to.label')],
        [this.$toValue, this.currencyToList.getTitleByData(this.currencyTo)],
        [this.$priceLabel, Utils.sprintf(L('converter.calc.price.label'), conversionPair)],
        [this.$priceValue, this.currentConversionPrice],
        [this.$resultLabel, Utils.sprintf(L('converter.calc.result'), this.currencyTo, converterValue)],
        [this.$citationLabel, L('converter.bottom.citation')],
        [this.$authorLabel, L('converter.bottom.author')],
        [this.$formulaLabel, L('converter.bottom.header')],
        [this.$explain1, Utils.sprintf(L('converter.bottom.explain1'), this.currencyFrom, this.currencyTo)],
        [this.$explain2, Utils.sprintf(L('converter.bottom.explain2'), amountSize)],
        [this.$explain3, Utils.sprintf(L('converter.bottom.explain3'), conversionPair, this.currentConversionPrice)],
        [this.$explain4, Utils.sprintf(L('converter.bottom.explain4'), amountSize, this.currentConversionPrice, converterValue)],
        [this.$formulaResultLabel, Utils.sprintf(L('converter.bottom.footer'), converterValue, this.currencyTo)]
    ]);

};

ConverterCalculator.prototype.bindEvents = function () {
    var _this = this;
    var $target = $('.converter-container');

    this.calculatorsList = new CalculatorsList({parent: $target, active: CONSTANTS.CALCULATORS.CONVERTER_CALCULATOR.NAME});
    this.currencyFromList = new ConverterCurrencyList({parent: $target, active: _this.currencyFrom});
    this.currencyToList = new ConverterCurrencyList({parent: $target, active: _this.currencyTo});
    this.amountInput = new TradeSizeInput();
    this.amountInput.$container.appendTo($('.converter-container .calc-left .calc-input'));

    this.$selectorName = $('.converter-container .calc-selector-name');
    this.$fromLabel = $('.converter-container .calc-from-label');
    this.$fromValue = $('.converter-container .calc-from-value');
    this.$amountLabel = $('.converter-container .calc-amount-label');
    this.$amountInput = $('.converter-container .calc-amount-input');
    this.$toLabel = $('.converter-container .calc-to-label');
    this.$toValue = $('.converter-container .calc-to-value');
    this.$priceLabel = $('.converter-container .calc-price-label');
    this.$priceValue = $('.converter-container .calc-price-value');
    this.$resultLabel = $('.converter-container .calc-result-label');
    this.$citationLabel = $('.converter-container .calc-citation-label');
    this.$authorLabel = $('.converter-container .calc-author-label');
    this.$formulaLabel = $('.converter-container .calc-formula-label');
    this.$explain1 = $('.converter-container .calc-explain1');
    this.$explain2 = $('.converter-container .calc-explain2');
    this.$explain3 = $('.converter-container .calc-explain3');
    this.$explain4 = $('.converter-container .calc-explain4');
    this.$formulaResultLabel = $('.converter-container .calc-formula-result-label');

    this.calculatorsList.on('selected', function (newType) {
        _this.app.setType(newType);
    });

    this.currencyFromList.on('selected', function (newCurrencyFrom) {
        _this.currencyFrom = newCurrencyFrom;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.CONVERTER_CALCULATOR.REQ.ON_CURRENCY_FROM_CHANGED,
                    from: _this.currencyFrom,
                    to: _this.currencyTo,
                    amount: _this.amount
                },
                'success': function(data) {
                    _this.refresh(data);
                }
            });
        });
    });
    this.currencyToList.on('selected', function (newCurrencyTo) {
        _this.currencyTo = newCurrencyTo;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.CONVERTER_CALCULATOR.REQ.ON_CURRENCY_TO_CHANGED,
                    from: _this.currencyFrom,
                    to: _this.currencyTo,
                    amount: _this.amount
                },
                'success': function(data) {
                    _this.refresh(data);
                }
            });
        });
    });

    this.amountInput.on('changed', function (newValue) {
        _this.amount = newValue;
        if (_this.cache && _this.cache.from === _this.currencyFrom && _this.cache.to === _this.currencyTo) {
            _this.refresh(_this.cache.data, {ignore: 'amountInput'});
            return;
        }
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.CONVERTER_CALCULATOR.REQ.ON_AMOUNT_CHANGED,
                    from: _this.currencyFrom,
                    to: _this.currencyTo,
                    amount: _this.amount
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        from: _this.currencyFrom,
                        to: _this.currencyTo
                    };
                    _this.refresh(data, {ignore: 'amountInput'});
                }
            });
        });
    });

    $('.calculators .common-lang-btn').on('click', function (e) {
        var $el = $(e.target);
        var lang = $el.attr('data-option');
        if (lang) {
            _this.app.changeLanguage(lang);
        }
    });

    this.$calculatorsSelector = $('.converter-container .calc-header .calc-selector');
    this.$calculatorsSelector.on('click', function (e) {
        _this.hideAllMenus();
        var b = Utils.box(_this.$calculatorsSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.calculatorsList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.converter-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$currencyFromSelector = $('.converter-container .calc-left .calc-selector');
    this.$currencyFromSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$currencyFromSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.currencyFromList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.converter-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$currencyToSelector = $('.converter-container .calc-right .calc-selector');
    this.$currencyToSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$currencyToSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.currencyToList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.converter-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });
    this.currencyFromList.trigger('selected', this.currencyFrom);
};

ConverterCalculator.prototype.unBindEvents = function () {
    if (this.calculatorsList) this.calculatorsList.destroy();
    if (this.currencyFromList) this.currencyFromList.destroy();
    if (this.currencyToList) this.currencyToList.destroy();

    if (this.$calculatorsSelector) this.$calculatorsSelector.off('click');
    if (this.$currencyFromSelector) this.$currencyFromSelector.off('click');
    if (this.$currencyToSelector) this.$currencyToSelector.off('click');
};

exports.ConverterCalculator = ConverterCalculator;

},{"../_/component/calculators_list":4,"../_/component/converter_currency_list":6,"../_/component/logger":11,"../_/component/trade_size_input":15,"../_/constants":16,"../_/model/event_driven":19,"../_/utils":20}],23:[function(require,module,exports){
'use strict';

var Utils = require('../_/utils');
var EventDriven = require('../_/model/event_driven').EventDriven;
var CONSTANTS = require('../_/constants').CONSTANTS;
var log = require('../_/component/logger').log;
var CalculatorsList = require('../_/component/calculators_list').CalculatorsList;
var AccountCurrencyList = require('../_/component/account_currency_list').AccountCurrencyList;
var CurrencyPairList = require('../_/component/currency_pair_list').CurrencyPairList;
var TradeSizeInput = require('../_/component/trade_size_input').TradeSizeInput;

function CTraderCalculator (params) {
    params = params || {};
    this.app = params.app;
    this.connection = params.connection;
    this.accountCurrency = CONSTANTS.CALCULATORS.CTRADER_CALCULATOR.DEFAULT_ACCOUNT_CURRENCY;
    this.currencyPair = CONSTANTS.CALCULATORS.CTRADER_CALCULATOR.DEFAULT_CURRENCY_PAIR;
    this.positionSize = CONSTANTS.CALCULATORS.CTRADER_CALCULATOR.DEFAULT_TRADE_SIZE;
    this.currentConversionPrice = '1';
    this.ctraderValue = null;
    $(window).resize(function() {
        this.hideAllMenus();
    }.bind(this));
};

Utils.extend(CTraderCalculator, EventDriven);

CTraderCalculator.prototype.hideAllMenus = function () {
    if (this.calculatorsList) this.calculatorsList.hide();
    if (this.accountCurrencyList) this.accountCurrencyList.hide();
    if (this.currencyPairList) this.currencyPairList.hide();
};

CTraderCalculator.prototype.getTemplate = function () {
    var template = '\
        <div class="calculators ctrader-container">\
            <div class="calculator-top col-md-8">\
                <div class="calc-header">\
                    <div class="calc-selector calc-selector-name">&nbsp;</div>\
                </div>\
                <div class="calc-container">\
                    <div class="calc-section calc-left">\
                        <div class="calc-label calc-currency-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-currency-value">&nbsp;</div>\
                        <div class="calc-label calc-volume-label">&nbsp;</div>\
                        <div class="calc-value calc-input calc-volume-input"></div>\
                    </div>\
                    <div class="calc-section calc-right">\
                        <div class="calc-label calc-pair-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-pair-value">&nbsp;</div>\
                        <div class="calc-label calc-price-label">&nbsp;</div>\
                        <div class="calc-value calc-info calc-price-value">&nbsp;</div>\
                    </div>\
                </div>\
                <div class="calc-footer">\
                    <div class="calc-result calc-result-label">&nbsp;</div>\
                </div>\
            </div>\
            <div class="calculator-bottom col-md-4">\
                <div class="info-container info-left">\
                    <span class="info-bold">&laquo;<b class="calc-citation-label">&nbsp;</b>&raquo;</span>\
                    <span class="info-footer calc-author-label">&nbsp;</span>\
                </div>\
                <div class="info-container info-right">\
                    <span class="info-header info-bold calc-formula-label">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain1">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain2">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain3">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain4">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain5">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain6">&nbsp;</span>\
                    <span class="info-footer calc-formula-result-label">&nbsp;</span>\
                </div>\
            </div>\
                <div class="common-lang-switch">\
                <div class="common-lang-btn" data-option="en">en</div>\
                <div class="common-lang-btn" data-option="ru">ru</div>\
            </div>\
        </div>\
    ';
    return template;
};

CTraderCalculator.prototype.refresh = function (data, options) {
    if (!this.accountCurrencyList || !data || data.length != 2)  {
        // refresh only after all components created
        // no sense to refresh without actual data
        return;
    }

    options = options || {};

    // data[0] for calculate digits
    // data[1] for calculate price
    var curs = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)];
    var price = data[1].rates[this.accountCurrency] || 1;
    var symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', this.currencyPair);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', from + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + to);
    if (!symbolInfo) {
        symbolInfo = {
            d: 5,
            p: 0.0001
        }
    }
    var digits = symbolInfo.d;
    var pip = symbolInfo.p;
    this.ctraderValue = ((0.000030 * this.positionSize) * price).toFixed(2);
    this.ctraderValue2 = ((0.000030 * this.positionSize) * price * 2).toFixed(2);
    this.currentConversionPrice = price.toFixed(digits);

    var _this = this;
    $('.common-lang-switch .common-lang-btn').each(function (e) {
        if ($(this).attr('data-option') === _this.app.language) {
            $(this).addClass('active');
        }
    });

    if (options.ignore !== 'tradeSizeInput') {
        this.tradeSizeInput.setValue(this.positionSize);
    }

    var currencyPair = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)].join('https://www.icmarkets.com/');
    var conversionPair = this.currencyPair.slice(0, 3) + '/' + this.accountCurrency;
    var positionSize = Utils.formatToThree(this.positionSize, ',');
    var ctraderValue = Utils.formatToThree(this.ctraderValue, ',');
    var ctraderValue2 = Utils.formatToThree(this.ctraderValue2, ',');

    Utils.fillTemplate([
        [this.$selectorName, L('ctrader.calc.selector')],
        [this.$currencyLabel, L('ctrader.calc.currency.label')],
        [this.$currencyValue, this.accountCurrencyList.getTitleByData(this.accountCurrency)],
        [this.$volumeLabel, L('ctrader.calc.volume.label')],
        [this.$pairLabel, L('ctrader.calc.pair.label')],
        [this.$pairValue, this.currencyPairList.getTitleByData(this.currencyPair)],
        [this.$priceLabel, Utils.sprintf(L('ctrader.calc.price.label'), conversionPair)],
        [this.$priceValue, this.currentConversionPrice],
        [this.$resultLabel, Utils.sprintf(L('ctrader.calc.result'), this.accountCurrency, ctraderValue2)],
        [this.$citationLabel, L('ctrader.bottom.citation')],
        [this.$authorLabel, L('ctrader.bottom.author')],
        [this.$formulaLabel, L('ctrader.bottom.header')],
        [this.$explain1, Utils.sprintf(L('ctrader.bottom.explain1'), this.accountCurrency)],
        [this.$explain2, Utils.sprintf(L('ctrader.bottom.explain2'), currencyPair)],
        [this.$explain3, L('ctrader.bottom.explain3')],
        [this.$explain4, Utils.sprintf(L('ctrader.bottom.explain4'), positionSize)],
        [this.$explain5, Utils.sprintf(L('ctrader.bottom.explain5'), conversionPair, this.currentConversionPrice)],
        [this.$explain6, Utils.sprintf(L('ctrader.bottom.explain6'), positionSize, this.currentConversionPrice, ctraderValue)],
        [this.$formulaResultLabel, Utils.sprintf(L('ctrader.bottom.footer'), ctraderValue, this.accountCurrency)],
    ]);
};

CTraderCalculator.prototype.bindEvents = function () {
    var _this = this;
    var $target = $('.ctrader-container');

    this.calculatorsList = new CalculatorsList({parent: $target, active: CONSTANTS.CALCULATORS.CTRADER_CALCULATOR.NAME});
    this.accountCurrencyList = new AccountCurrencyList({parent: $target, active: _this.accountCurrency});
    this.currencyPairList = new CurrencyPairList({parent: $target, active: _this.currencyPair});
    this.tradeSizeInput = new TradeSizeInput();
    this.tradeSizeInput.$container.appendTo($('.ctrader-container .calc-left .calc-input'));

    this.$selectorName = $('.ctrader-container .calc-selector-name');
    this.$currencyLabel = $('.ctrader-container .calc-currency-label');
    this.$currencyValue = $('.ctrader-container .calc-currency-value');
    this.$volumeLabel = $('.ctrader-container .calc-volume-label');
    this.$volumeInput = $('.ctrader-container .calc-volume-input');
    this.$pairLabel = $('.ctrader-container .calc-pair-label');
    this.$pairValue = $('.ctrader-container .calc-pair-value');
    this.$priceLabel = $('.ctrader-container .calc-price-label');
    this.$priceValue = $('.ctrader-container .calc-price-value');
    this.$resultLabel = $('.ctrader-container .calc-result-label');
    this.$citationLabel = $('.ctrader-container .calc-citation-label');
    this.$authorLabel = $('.ctrader-container .calc-author-label');
    this.$formulaLabel = $('.ctrader-container .calc-formula-label');
    this.$explain1 = $('.ctrader-container .calc-explain1');
    this.$explain2 = $('.ctrader-container .calc-explain2');
    this.$explain3 = $('.ctrader-container .calc-explain3');
    this.$explain4 = $('.ctrader-container .calc-explain4');
    this.$explain5 = $('.ctrader-container .calc-explain5');
    this.$explain6 = $('.ctrader-container .calc-explain6');
    this.$formulaResultLabel = $('.ctrader-container .calc-formula-result-label');

    this.calculatorsList.on('selected', function (newType) {
        _this.app.setType(newType);
    });
    
    this.accountCurrencyList.on('selected', function (newAccountCurrency) {
        _this.accountCurrency = newAccountCurrency;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.CTRADER_CALCULATOR.REQ.ON_ACCOUNT_CURRENCY_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.positionSize
                },
                'success': function(data) {
                    _this.refresh(data);
                }
            });
        });
    });
    this.currencyPairList.on('selected', function (newCurrencyPair) {
        _this.currencyPair = newCurrencyPair;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.CTRADER_CALCULATOR.REQ.ON_CURRENCY_PAIR_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.positionSize
                },
                'success': function(data) {
                    _this.refresh(data);
                }
            });
        });
    });

    this.tradeSizeInput.on('changed', function (newValue) {
        _this.positionSize = newValue;
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data, {ignore: 'tradeSizeInput'});
            return;
        } 
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.CTRADER_CALCULATOR.REQ.ON_TRADE_SIZE_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.positionSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data, {ignore: 'tradeSizeInput'});
                }
            });
        });
    });

    $('.calculators .common-lang-btn').on('click', function (e) {
        var $el = $(e.target);
        var lang = $el.attr('data-option');
        if (lang) {
            _this.app.changeLanguage(lang);
        }
    });

    this.$calculatorsSelector = $('.ctrader-container .calc-header .calc-selector'); 
    this.$calculatorsSelector.on('click', function (e) {
        _this.hideAllMenus();
        var b = Utils.box(_this.$calculatorsSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.calculatorsList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.ctrader-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$accountCurrencySelector = $('.ctrader-container .calc-left .calc-selector'); 
    this.$accountCurrencySelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$accountCurrencySelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.accountCurrencyList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.ctrader-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$currencyPairSelector = $('.ctrader-container .calc-right .calc-selector'); 
    this.$currencyPairSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$currencyPairSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.currencyPairList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.ctrader-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });
    this.accountCurrencyList.trigger('selected', this.accountCurrency);
};

CTraderCalculator.prototype.unBindEvents = function () {
    if (this.calculatorsList) this.calculatorsList.destroy();
    if (this.accountCurrencyList) this.accountCurrencyList.destroy();
    if (this.currencyPairList) this.currencyPairList.destroy();

    if (this.$calculatorsSelector) this.$calculatorsSelector.off('click');
    if (this.$accountCurrencySelector) this.$accountCurrencySelector.off('click');
    if (this.$currencyPairSelector) this.$currencyPairSelector.off('click');
};

exports.CTraderCalculator = CTraderCalculator;

},{"../_/component/account_currency_list":2,"../_/component/calculators_list":4,"../_/component/currency_pair_list":7,"../_/component/logger":11,"../_/component/trade_size_input":15,"../_/constants":16,"../_/model/event_driven":19,"../_/utils":20}],24:[function(require,module,exports){
'use strict';

var Utils = require('../_/utils');
var EventDriven = require('../_/model/event_driven').EventDriven;
var CONSTANTS = require('../_/constants').CONSTANTS;
var log = require('../_/component/logger').log;
var CalculatorsList = require('../_/component/calculators_list').CalculatorsList;
var AccountCurrencyList = require('../_/component/account_currency_list').AccountCurrencyList;
var CurrencyPairList = require('../_/component/currency_pair_list').CurrencyPairList;
var TradeSizeInput = require('../_/component/trade_size_input').TradeSizeInput;
var LeverageList = require('../_/component/leverage_list').LeverageList;

function MarginCalculator (params) {
    params = params || {};
    this.app = params.app;
    this.connection = params.connection;
    this.accountCurrency = CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.DEFAULT_ACCOUNT_CURRENCY;
    this.currencyPair = CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.DEFAULT_CURRENCY_PAIR;
    this.tradeSize = CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.DEFAULT_TRADE_SIZE;
    this.regulator = params.regulator || this.app.regulator || CONSTANTS.DEFAULT_REGULATOR;
    this.leverage = CONSTANTS.LEVERAGE_PER_BRANCH[this.regulator] ? CONSTANTS.LEVERAGE_PER_BRANCH[this.regulator][0].v : CONSTANTS.DEFAULT_LEVERAGE;
    this.currentConversionPrice = '1';
    this.marginValue = null;
    this.cache = null;
    $(window).resize(function() {
        this.hideAllMenus();
    }.bind(this));
};

Utils.extend(MarginCalculator, EventDriven);

MarginCalculator.prototype.hideAllMenus = function () {
    if (this.calculatorsList) this.calculatorsList.hide();
    if (this.accountCurrencyList) this.accountCurrencyList.hide();
    if (this.currencyPairList) this.currencyPairList.hide();
    if (this.leverageList) this.leverageList.hide();
};

MarginCalculator.prototype.getTemplate = function () {
    var template = '\
        <div class="calculators margin-container">\
            <div class="calculator-top col-md-8">\
                <div class="calc-header">\
                    <div class="calc-selector calc-selector-name">&nbsp;</div>\
                </div>\
                <div class="calc-container">\
                    <div class="calc-section calc-left">\
                        <div class="calc-label calc-currency-label">&nbsp;</div>\
                        <div class="calc-value calc-selector currency calc-currency-value">&nbsp;</div>\
                        <div class="calc-label calc-pair-label">&nbsp;</div>\
                        <div class="calc-value calc-selector pair calc-pair-value">&nbsp;</div>\
                        <div class="calc-label calc-price-label">&nbsp;</div>\
                        <div class="calc-value calc-info calc-price-value">&nbsp;</div>\
                    </div>\
                    <div class="calc-section calc-right">\
                        <div class="calc-label calc-leverage-label">&nbsp;</div>\
                        <div class="calc-value calc-selector leverage calc-leverage-value">&nbsp;</div>\
                        <div class="calc-label calc-volume-label">&nbsp;</div>\
                        <div class="calc-value calc-input calc-volume-input"></div>\
                    </div>\
                </div>\
                <div class="calc-footer">\
                    <div class="calc-result calc-result-label">&nbsp;</div>\
                </div>\
            </div>\
            <div class="calculator-bottom col-md-4">\
                <div class="info-container info-left">\
                    <span class="info-bold">&laquo;<b class="calc-citation-label">&nbsp;</b>&raquo;</span>\
                    <span class="info-footer calc-author-label">&nbsp;</span>\
                </div>\
                <div class="info-container info-right">\
                    <span class="info-header info-bold calc-formula-label">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain1">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain2">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain3">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain4">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain5">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain6">&nbsp;</span>\
                    <span class="info-footer calc-formula-result-label">&nbsp;</span>\
                </div>\
            </div>\
                <div class="common-lang-switch">\
                <div class="common-lang-btn" data-option="en">en</div>\
                <div class="common-lang-btn" data-option="ru">ru</div>\
            </div>\
        </div>\
    ';
    return template;
};

MarginCalculator.prototype.refresh = function (data, options) {
    if (!this.accountCurrencyList || !data || data.length != 2)  {
        // refresh only after all components created
        // no sense to refresh without actual data
        return;
    }

    options = options || {};

    // data[0] for calculate digits
    // data[1] for calculate price
    var curs = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)];
    var price = data[1].rates[this.accountCurrency] || 1;
    var symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', this.currencyPair);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', from + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + to);
    if (!symbolInfo) {
        symbolInfo = {
            d: 5,
            p: 0.0001
        }
    }
    var digits = symbolInfo.d;
    var pip = symbolInfo.p;
    this.marginValue = (price * this.tradeSize / this.leverage).toFixed(2);
    this.currentConversionPrice = price.toFixed(digits);

    var _this = this;
    $('.common-lang-switch .common-lang-btn').each(function (e) {
        if ($(this).attr('data-option') === _this.app.language) {
            $(this).addClass('active');
        }
    });

    if (options.ignore !== 'tradeSizeInput') {
        this.tradeSizeInput.setValue(this.tradeSize);
    }

    var currencyPair = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)].join('https://www.icmarkets.com/');
    var conversionPair = this.currencyPair.slice(0, 3) + '/' + this.accountCurrency;
    var tradeSize = Utils.formatToThree(this.tradeSize, ',');
    var marginValue = Utils.formatToThree(this.marginValue, ',');
    var leverage = this.leverageList.getTitleByData(this.leverage);

    Utils.fillTemplate([
        [this.$selectorName, L('margin.calc.selector')],
        [this.$currencyLabel, L('margin.calc.currency.label')],
        [this.$currencyValue, this.accountCurrencyList.getTitleByData(this.accountCurrency)],
        [this.$volumeLabel, L('margin.calc.volume.label')],
        [this.$pairLabel, L('margin.calc.pair.label')],
        [this.$pairValue, this.currencyPairList.getTitleByData(this.currencyPair)],
        [this.$leverageLabel, L('margin.calc.leverage.label')],
        [this.$leverageValue, leverage],
        [this.$priceLabel, Utils.sprintf(L('margin.calc.price.label'), conversionPair)],
        [this.$priceValue, this.currentConversionPrice],
        [this.$resultLabel, Utils.sprintf(L('margin.calc.result'), this.accountCurrency, marginValue)],
        [this.$citationLabel, L('margin.bottom.citation')],
        [this.$authorLabel, L('margin.bottom.author')],
        [this.$formulaLabel, L('margin.bottom.header')],
        [this.$explain1, Utils.sprintf(L('margin.bottom.explain1'), this.accountCurrency)],
        [this.$explain2, Utils.sprintf(L('margin.bottom.explain2'), leverage)],
        [this.$explain3, Utils.sprintf(L('margin.bottom.explain3'), currencyPair)],
        [this.$explain4, Utils.sprintf(L('margin.bottom.explain4'), tradeSize)],
        [this.$explain5, Utils.sprintf(L('margin.bottom.explain5'), conversionPair, this.currentConversionPrice)],
        [this.$explain6, Utils.sprintf(L('margin.bottom.explain6'), tradeSize, this.currentConversionPrice, this.leverage, marginValue)],
        [this.$formulaResultLabel, Utils.sprintf(L('margin.bottom.footer'), marginValue, this.accountCurrency)],
    ]);
};

MarginCalculator.prototype.bindEvents = function () {
    var _this = this;
    var $target = $('.margin-container');

    this.calculatorsList = new CalculatorsList({parent: $target, active: CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.NAME});
    this.accountCurrencyList = new AccountCurrencyList({parent: $target, active: _this.accountCurrency});
    this.currencyPairList = new CurrencyPairList({parent: $target, active: _this.currencyPair});
    this.leverageList = new LeverageList({parent: $target, active: _this.leverage, regulator: _this.regulator});
    this.tradeSizeInput = new TradeSizeInput();
    this.tradeSizeInput.$container.appendTo($('.margin-container .calc-right .calc-input'));

    this.$selectorName = $('.margin-container .calc-selector-name');
    this.$currencyLabel = $('.margin-container .calc-currency-label');
    this.$currencyValue = $('.margin-container .calc-currency-value');
    this.$volumeLabel = $('.margin-container .calc-volume-label');
    this.$volumeInput = $('.margin-container .calc-volume-input');
    this.$pairLabel = $('.margin-container .calc-pair-label');
    this.$pairValue = $('.margin-container .calc-pair-value');
    this.$leverageLabel = $('.margin-container .calc-leverage-label');
    this.$leverageValue = $('.margin-container .calc-leverage-value');
    this.$priceLabel = $('.margin-container .calc-price-label');
    this.$priceValue = $('.margin-container .calc-price-value');
    this.$resultLabel = $('.margin-container .calc-result-label');
    this.$citationLabel = $('.margin-container .calc-citation-label');
    this.$authorLabel = $('.margin-container .calc-author-label');
    this.$formulaLabel = $('.margin-container .calc-formula-label');
    this.$explain1 = $('.margin-container .calc-explain1');
    this.$explain2 = $('.margin-container .calc-explain2');
    this.$explain3 = $('.margin-container .calc-explain3');
    this.$explain4 = $('.margin-container .calc-explain4');
    this.$explain5 = $('.margin-container .calc-explain5');
    this.$explain6 = $('.margin-container .calc-explain6');
    this.$formulaResultLabel = $('.margin-container .calc-formula-result-label');

    this.calculatorsList.on('selected', function (newType) {
        _this.app.setType(newType);
    });

    this.accountCurrencyList.on('selected', function (newAccountCurrency) {
        _this.accountCurrency = newAccountCurrency;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.REQ.ON_ACCOUNT_CURRENCY_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data);
                }
            });
        });
    });
    this.currencyPairList.on('selected', function (newCurrencyPair) {
        _this.currencyPair = newCurrencyPair;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.REQ.ON_CURRENCY_PAIR_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data);
                }
            });
        });
    });
    this.leverageList.on('selected', function (newLeverage) {
        _this.leverage = newLeverage;
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data);
            return;
        }
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.REQ.ON_LEVERAGE_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data);
                }
            });
        });
    });
    this.tradeSizeInput.on('changed', function (newValue) {
        _this.tradeSize = newValue;
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data, {ignore: 'tradeSizeInput'});
            return;
        }
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.MARGIN_CALCULATOR.REQ.ON_TRADE_SIZE_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data, {ignore: 'tradeSizeInput'});
                }
            });
        });
    });

    $('.calculators .common-lang-btn').on('click', function (e) {
        var $el = $(e.target);
        var lang = $el.attr('data-option');
        if (lang) {
            _this.app.changeLanguage(lang);
        }
    });

    this.$calculatorsSelector = $('.margin-container .calc-header .calc-selector');
    this.$calculatorsSelector.on('click', function (e) {
        _this.hideAllMenus();
        var b = Utils.box(_this.$calculatorsSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.calculatorsList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.margin-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$accountCurrencySelector = $('.margin-container .calc-selector.currency');
    this.$accountCurrencySelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$accountCurrencySelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.accountCurrencyList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.margin-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$currencyPairSelector = $('.margin-container .calc-selector.pair');
    this.$currencyPairSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$currencyPairSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.currencyPairList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.margin-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$leverageSelector = $('.margin-container .calc-selector.leverage');
    this.$leverageSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$leverageSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.leverageList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.margin-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.accountCurrencyList.trigger('selected', this.accountCurrency);
};

MarginCalculator.prototype.unBindEvents = function () {
    if (this.calculatorsList) this.calculatorsList.destroy();
    if (this.accountCurrencyList) this.accountCurrencyList.destroy();
    if (this.currencyPairList) this.currencyPairList.destroy();
    if (this.leverageList) this.leverageList.destroy();

    if (this.$calculatorsSelector) this.$calculatorsSelector.off('click');
    if (this.$accountCurrencySelector) this.$accountCurrencySelector.off('click');
    if (this.$currencyPairSelector) this.$currencyPairSelector.off('click');
    if (this.$leverageSelector) this.$leverageSelector.off('click');
};

exports.MarginCalculator = MarginCalculator;

},{"../_/component/account_currency_list":2,"../_/component/calculators_list":4,"../_/component/currency_pair_list":7,"../_/component/leverage_list":10,"../_/component/logger":11,"../_/component/trade_size_input":15,"../_/constants":16,"../_/model/event_driven":19,"../_/utils":20}],25:[function(require,module,exports){
'use strict';

var Utils = require('../_/utils');
var EventDriven = require('../_/model/event_driven').EventDriven;
var CONSTANTS = require('../_/constants').CONSTANTS;
var log = require('../_/component/logger').log;
var CalculatorsList = require('../_/component/calculators_list').CalculatorsList;
var AccountCurrencyList = require('../_/component/account_currency_list').AccountCurrencyList;
var CurrencyPairList = require('../_/component/currency_pair_list').CurrencyPairList;
var TradeSizeInput = require('../_/component/trade_size_input').TradeSizeInput;

function PipCalculator (params) {
    params = params || {};
    this.app = params.app;
    this.connection = params.connection;
    this.accountCurrency = CONSTANTS.CALCULATORS.PIP_CALCULATOR.DEFAULT_ACCOUNT_CURRENCY;
    this.currencyPair = CONSTANTS.CALCULATORS.PIP_CALCULATOR.DEFAULT_CURRENCY_PAIR;
    this.tradeSize = CONSTANTS.CALCULATORS.PIP_CALCULATOR.DEFAULT_TRADE_SIZE;
    this.currentConversionPrice = '1';
    this.pipValue = null;
    this.cache = null;
    $(window).resize(function() {
        this.hideAllMenus();
    }.bind(this));
};

Utils.extend(PipCalculator, EventDriven);

PipCalculator.prototype.hideAllMenus = function () {
    if (this.calculatorsList) this.calculatorsList.hide();
    if (this.accountCurrencyList) this.accountCurrencyList.hide();
    if (this.currencyPairList) this.currencyPairList.hide();
};

PipCalculator.prototype.getTemplate = function () {
    var template = '\
        <div class="calculators pip-container">\
            <div class="calculator-top col-md-8">\
                <div class="calc-header">\
                    <div class="calc-selector calc-selector-name">&nbsp;</div>\
                </div>\
                <div class="calc-container">\
                    <div class="calc-section calc-left">\
                        <div class="calc-label calc-currency-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-currency-value">&nbsp;</div>\
                        <div class="calc-label calc-volume-label">&nbsp;</div>\
                        <div class="calc-value calc-input calc-volume-input"></div>\
                    </div>\
                    <div class="calc-section calc-right">\
                        <div class="calc-label calc-pair-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-pair-value">&nbsp;</div>\
                        <div class="calc-label calc-price-label">&nbsp;</div>\
                        <div class="calc-value calc-info calc-price-value">&nbsp;</div>\
                    </div>\
                </div>\
                <div class="calc-footer">\
                    <div class="calc-result calc-result-label">&nbsp;</div>\
                </div>\
            </div>\
            <div class="calculator-bottom col-md-4">\
                <div class="info-container info-left">\
                    <span class="info-bold">&laquo;<b class="calc-citation-label">&nbsp;</b>&raquo;</span>\
                    <span class="info-footer calc-author-label">&nbsp;</span>\
                </div>\
                <div class="info-container info-right">\
                    <span class="info-header info-bold calc-formula-label">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain1">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain2">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain3">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain4">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain5">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain6">&nbsp;</span>\
                    <span class="info-footer calc-formula-result-label">&nbsp;</span>\
                </div>\
            </div>\
            <div class="common-lang-switch">\
                <div class="common-lang-btn" data-option="en">en</div>\
                <div class="common-lang-btn" data-option="ru">ru</div>\
            </div>\
        </div>\
    ';
    return template;
};

PipCalculator.prototype.refresh = function (data, options) {
    options = options || {};

    if (!this.accountCurrencyList || !data || data.length != 2)  {
        // refresh only after all components created
        // no sense to refresh without actual data
        return;
    }

    // data[0] for calculate digits
    // data[1] for calculate price
    var curs = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)];
    var price = data[1].rates[curs[1]] || 1;
    var symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', this.currencyPair);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', from + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + to);
    if (!symbolInfo) {
        symbolInfo = {
            d: 5,
            p: 0.0001
        }
    }
    var digits = symbolInfo.d;
    var pip = symbolInfo.p;
    this.pipValue = ((pip * this.tradeSize) / price).toFixed(2);
    this.currentConversionPrice = price.toFixed(digits);

    var _this = this;
    $('.common-lang-switch .common-lang-btn').each(function (e) {
        if ($(this).attr('data-option') === _this.app.language) {
            $(this).addClass('active');
        }
    });
    
    if (options.ignore !== 'tradeSizeInput') {
        this.tradeSizeInput.setValue(this.tradeSize);
    }

    var currencyPair = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)].join('https://www.icmarkets.com/');
    var conversionPair = this.accountCurrency + '/' + this.currencyPair.slice(3);
    var tradeSize = Utils.formatToThree(this.tradeSize, ',');
    var pipValue = Utils.formatToThree(this.pipValue, ',');

    Utils.fillTemplate([
        [this.$selectorName, L('pip.calc.selector')],
        [this.$currencyLabel, L('pip.calc.currency.label')],
        [this.$currencyValue, this.accountCurrencyList.getTitleByData(this.accountCurrency)],
        [this.$volumeLabel, L('pip.calc.volume.label')],
        [this.$pairLabel, L('pip.calc.pair.label')],
        [this.$pairValue, this.currencyPairList.getTitleByData(this.currencyPair)],
        [this.$priceLabel, Utils.sprintf(L('pip.calc.price.label'), conversionPair)],
        [this.$priceValue, this.currentConversionPrice],
        [this.$resultLabel, Utils.sprintf(L('pip.calc.result'), this.accountCurrency, pipValue)],
        [this.$citationLabel, L('pip.bottom.citation')],
        [this.$authorLabel, L('pip.bottom.author')],
        [this.$formulaLabel, L('pip.bottom.header')],
        [this.$explain1, Utils.sprintf(L('pip.bottom.explain1'), this.accountCurrency)],
        [this.$explain2, Utils.sprintf(L('pip.bottom.explain2'), currencyPair)],
        [this.$explain3, Utils.sprintf(L('pip.bottom.explain3'), tradeSize)],
        [this.$explain4, Utils.sprintf(L('pip.bottom.explain4'), pip)],
        [this.$explain5, Utils.sprintf(L('pip.bottom.explain5'), conversionPair, this.currentConversionPrice)],
        [this.$explain6, Utils.sprintf(L('pip.bottom.explain6'), pip, tradeSize, this.currentConversionPrice, pipValue)],
        [this.$formulaResultLabel, Utils.sprintf(L('pip.bottom.footer'), pipValue, this.accountCurrency)],
    ]);
};

PipCalculator.prototype.bindEvents = function () {
    var _this = this;
    var $target = $('.pip-container');
    
    this.calculatorsList = new CalculatorsList({parent: $target, active: CONSTANTS.CALCULATORS.PIP_CALCULATOR.NAME});
    this.accountCurrencyList = new AccountCurrencyList({parent: $target, active: _this.accountCurrency});
    this.currencyPairList = new CurrencyPairList({parent: $target, active: _this.currencyPair});
    this.tradeSizeInput = new TradeSizeInput();
    this.tradeSizeInput.$container.appendTo($('.pip-container .calc-left .calc-input'));

    this.$selectorName = $('.pip-container .calc-selector-name');
    this.$currencyLabel = $('.pip-container .calc-currency-label');
    this.$currencyValue = $('.pip-container .calc-currency-value');
    this.$volumeLabel = $('.pip-container .calc-volume-label');
    this.$volumeInput = $('.pip-container .calc-volume-input');
    this.$pairLabel = $('.pip-container .calc-pair-label');
    this.$pairValue = $('.pip-container .calc-pair-value');
    this.$priceLabel = $('.pip-container .calc-price-label');
    this.$priceValue = $('.pip-container .calc-price-value');
    this.$resultLabel = $('.pip-container .calc-result-label');
    this.$citationLabel = $('.pip-container .calc-citation-label');
    this.$authorLabel = $('.pip-container .calc-author-label');
    this.$formulaLabel = $('.pip-container .calc-formula-label');
    this.$explain1 = $('.pip-container .calc-explain1');
    this.$explain2 = $('.pip-container .calc-explain2');
    this.$explain3 = $('.pip-container .calc-explain3');
    this.$explain4 = $('.pip-container .calc-explain4');
    this.$explain5 = $('.pip-container .calc-explain5');
    this.$explain6 = $('.pip-container .calc-explain6');
    this.$formulaResultLabel = $('.pip-container .calc-formula-result-label');

    this.calculatorsList.on('selected', function (newType) {
        _this.app.setType(newType);
    });
    
    this.accountCurrencyList.on('selected', function (newAccountCurrency) {
        _this.accountCurrency = newAccountCurrency;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.PIP_CALCULATOR.REQ.ON_ACCOUNT_CURRENCY_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data);
                }
            });
        });
    });
    this.currencyPairList.on('selected', function (newCurrencyPair) {
        _this.currencyPair = newCurrencyPair;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.PIP_CALCULATOR.REQ.ON_CURRENCY_PAIR_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data);
                }
            });
        });
    });
    this.tradeSizeInput.on('changed', function (newValue) {
        _this.tradeSize = newValue;
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data, {ignore: 'tradeSizeInput'});
            return;
        } 
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.PIP_CALCULATOR.REQ.ON_TRADE_SIZE_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data, {ignore: 'tradeSizeInput'});
                }
            });
        });
    });

    $('.calculators .common-lang-btn').on('click', function (e) {
        var $el = $(e.target);
        var lang = $el.attr('data-option');
        if (lang) {
            _this.app.changeLanguage(lang);
        }
    });

    this.$calculatorsSelector = $('.pip-container .calc-header .calc-selector'); 
    this.$calculatorsSelector.on('click', function (e) {
        _this.hideAllMenus();
        var b = Utils.box(_this.$calculatorsSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.calculatorsList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.pip-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$accountCurrencySelector = $('.pip-container .calc-left .calc-selector'); 
    this.$accountCurrencySelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$accountCurrencySelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.accountCurrencyList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.pip-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$currencyPairSelector = $('.pip-container .calc-right .calc-selector'); 
    this.$currencyPairSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$currencyPairSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.currencyPairList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.pip-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });
    this.accountCurrencyList.trigger('selected', this.accountCurrency);
};

PipCalculator.prototype.unBindEvents = function () {
    if (this.calculatorsList) this.calculatorsList.destroy();
    if (this.accountCurrencyList) this.accountCurrencyList.destroy();
    if (this.currencyPairList) this.currencyPairList.destroy();

    if (this.$calculatorsSelector) this.$calculatorsSelector.off('click');
    if (this.$accountCurrencySelector) this.$accountCurrencySelector.off('click');
    if (this.$currencyPairSelector) this.$currencyPairSelector.off('click');
};

exports.PipCalculator = PipCalculator;

},{"../_/component/account_currency_list":2,"../_/component/calculators_list":4,"../_/component/currency_pair_list":7,"../_/component/logger":11,"../_/component/trade_size_input":15,"../_/constants":16,"../_/model/event_driven":19,"../_/utils":20}],26:[function(require,module,exports){
'use strict';

var Utils = require('../_/utils');
var EventDriven = require('../_/model/event_driven').EventDriven;
var CONSTANTS = require('../_/constants').CONSTANTS;
var log = require('../_/component/logger').log;
var CalculatorsList = require('../_/component/calculators_list').CalculatorsList;
var AccountCurrencyList = require('../_/component/account_currency_list').AccountCurrencyList;
var CurrencyPairList = require('../_/component/currency_pair_list').CurrencyPairList;
var TradeSizeInput = require('../_/component/trade_size_input').TradeSizeInput;

var TradeSideList = require('../_/component/trade_side_list').TradeSideList;
var PriceInput = require('../_/component/price_input').PriceInput;
var PeriodInput = require('../_/component/period_input').PeriodInput;
var AccountTypeList = require('../_/component/account_type_list').AccountTypeList;

function ProfitCalculator (params) {
    params = params || {};
    this.app = params.app;
    this.connection = params.connection;
    this.accountCurrency = CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.DEFAULT_ACCOUNT_CURRENCY;
    this.currencyPair = CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.DEFAULT_CURRENCY_PAIR;
    this.tradeSize = CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.DEFAULT_TRADE_SIZE;
    this.tradeSide = CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.DEFAULT_TRADE_SIDE;
    this.accountType = CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.DEFAULT_ACCOUNT_TYPE;
    this.period = CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.DEFAULT_PERIOD;
    this.openPrice = null;
    this.closePrice = null;
    this.currentConversionPrice = '1';
    this.profitValue = null;
    this.cache = null;
    $(window).resize(function() {
        this.hideAllMenus();
    }.bind(this));
};

Utils.extend(ProfitCalculator, EventDriven);

ProfitCalculator.prototype.hideAllMenus = function () {
    if (this.calculatorsList) this.calculatorsList.hide();
    if (this.accountCurrencyList) this.accountCurrencyList.hide();
    if (this.currencyPairList) this.currencyPairList.hide();
    if (this.tradeSideList) this.tradeSideList.hide();
    if (this.accountTypeList) this.accountTypeList.hide();
};

ProfitCalculator.prototype.getTemplate = function () {
    var template = '\
        <div class="calculators profit-container">\
            <div class="calculator-top col-md-8">\
                <div class="calc-header">\
                    <div class="calc-selector calc-selector-name">&nbsp;</div>\
                </div>\
                <div class="calc-container">\
                    <div class="calc-section calc-left">\
                        <div class="calc-label calc-currency-label">&nbsp;</div>\
                        <div class="calc-value calc-selector currency calc-currency-value">&nbsp;</div>\
                        <div class="calc-label calc-pair-label">&nbsp;</div>\
                        <div class="calc-value calc-selector pair calc-pair-value">&nbsp;</div>\
                        <div class="calc-label calc-volume-label">&nbsp;</div>\
                        <div class="calc-value calc-input calc-volume-input"></div>\
                        <div class="calc-label calc-open-label">&nbsp;</div>\
                        <div class="calc-value calc-input calc-open-input"></div>\
                        <div class="calc-label calc-close-label">&nbsp;</div>\
                        <div class="calc-value calc-input calc-close-input"></div>\
                    </div>\
                    <div class="calc-section calc-right">\
                        <div class="calc-label calc-side-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-side-value">&nbsp;</div>\
                        <div class="calc-label calc-account-type-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-account-type-value">&nbsp;</div>\
                        <div class="calc-label calc-period-label">&nbsp;</div>\
                        <div class="calc-value calc-input calc-period-input"></div>\
                        <div class="calc-label calc-long-label">&nbsp;</div>\
                        <div class="calc-value calc-info calc-long-value"></div>\
                        <div class="calc-label calc-short-label">&nbsp;</div>\
                        <div class="calc-value calc-info calc-short-value"></div>\
                    </div>\
                </div>\
                <div class="calc-footer">\
                    <div class="calc-result calc-result-label">&nbsp;</div>\
                </div>\
            </div>\
            <div class="calculator-bottom col-md-4">\
                <div class="info-container info-left">\
                    <span class="info-bold">&laquo;<b class="calc-citation-label">&nbsp;</b>&raquo;</span>\
                    <span class="info-footer calc-author-label">&nbsp;</span>\
                </div>\
                <div class="info-container info-right">\
                    <span class="info-header info-bold calc-formula-label">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain1">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain2">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain3">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain4">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain5">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain6">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain7">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain8">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain9">&nbsp;</span>\
                    <span class="info-footer calc-formula-result-label">&nbsp;</span>\
                </div>\
            </div>\
                <div class="common-lang-switch">\
                <div class="common-lang-btn" data-option="en">en</div>\
                <div class="common-lang-btn" data-option="ru">ru</div>\
            </div>\
        </div>\
    ';
    return template;
};

ProfitCalculator.prototype.parseSwapsData = function (swapsData) {
    var arr = swapsData;
    var obj = {};
    if (arr && arr.length) {
        for (var i = 0, len = arr.length, s, n, l, r; i < len; i++) {
            s = arr[i];
            n = s['Symbol'];
            l = s['SwapLong'];
            r = s['SwapShort'];
            if (obj[n] == null) {
                obj[n] = {
                    long: parseFloat(l),
                    short: parseFloat(r)
                };
            } else {
                //console.log('ERROR swaps e', e, s, i, arr);
            }
        }
    } else {
        //console.log('ERROR swaps arr:', arr, str, raw);
    }
    return obj;
};

ProfitCalculator.prototype.refresh = function (data, options) {
    if (!this.accountCurrencyList || !data || data.length != 4)  {
        // refresh only after all components created
        // no sense to refresh without actual data
        return;
    }

    options = options || {};

    // data[0] for calculate digits
    // data[1] for calculate swaps
    // data[2] for calculate price
    // data[3] swaps: swapsData, strings separated by ~

    var swaps = {}; 
    if (data[3].swaps) {
        swaps = this.parseSwapsData(data[3].swaps);
    } else {
        swaps[this.currencyPair] = {
            long: 0,
            short: 0
        };
    }
    var curs = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)];
    var price = data[2].rates[this.accountCurrency] || 1;
    var swapPrice = data[1].rates[curs[1]] || 1;
    var pairsPrice = data[0].rates[curs[1]] || price;
    var symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', this.currencyPair);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', from + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + to);
    if (!symbolInfo) {
        symbolInfo = {
            d: 5,
            p: 0.0001
        }
    }
    var digits = symbolInfo.d;
    var pip = symbolInfo.p;
    this.pipValue = ((pip * this.tradeSize) / price);
    var swapPipValue = ((pip * this.tradeSize) / swapPrice);
    this.currentConversionPrice = price.toFixed(digits);
    this.swapLongValue = (swapPipValue * swaps[this.currencyPair].long) / 10;
    this.swapShortValue = (swapPipValue * swaps[this.currencyPair].short) / 10;

    this.openPriceInput.digits = digits;
    this.closePriceInput.digits = digits;

    if (!this.openPrice) {
        this.openPrice = parseFloat(pairsPrice.toFixed(digits));
    }
    if (!this.closePrice) {
        this.closePrice = parseFloat(pairsPrice.toFixed(digits));
    }

    this.openPrice = parseFloat(this.openPrice.toFixed(digits));
    this.closePrice = parseFloat(this.closePrice.toFixed(digits));
    var swapLong = this.swapLongValue.toFixed(2);
    var swapShort = this.swapShortValue.toFixed(2);
    var swap = (this.tradeSide === '0'/*buy*/ ? this.swapLongValue : this.swapShortValue);
    this.profitValue = ((this.closePrice - this.openPrice) * this.tradeSize * price + (this.period * swap)).toFixed(2);
    if (this.tradeSide === '1'/*sell*/) {
        this.profitValue = ((this.openPrice - this.closePrice) * this.tradeSize * price + (this.period * swap)).toFixed(2);
    }

    var _this = this;
    $('.common-lang-switch .common-lang-btn').each(function (e) {
        if ($(this).attr('data-option') === _this.app.language) {
            $(this).addClass('active');
        }
    });

    if (options.ignore !== 'tradeSizeInput') {
        this.tradeSizeInput.setValue(this.tradeSize);
    }

    if (options.ignore !== 'openInput') {
        this.openPriceInput.setValue(this.openPrice);
    }

    if (options.ignore !== 'closeInput') {
        this.closePriceInput.setValue(this.closePrice);
    }

    if (options.ignore !== 'periodInput') {
        this.periodInput.setValue(this.period);
    }

    var accountType = this.accountTypeList.getTitleByData(this.accountType);
    var currencyPair = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)].join('https://www.icmarkets.com/');
    var conversionPair = this.currencyPair.slice(3) + '/' + this.accountCurrency;
    var tradeSize = Utils.formatToThree(this.tradeSize, ',');
    var profitValue = Utils.formatToThree(this.profitValue, ',');
    var side = this.tradeSideList.getTitleByData(this.tradeSide);
    var openPrice = this.openPrice.toFixed(digits);
    var closePrice = this.closePrice.toFixed(digits);

    Utils.fillTemplate([
        [this.$selectorName, L('profit.calc.selector')],

        [this.$currencyLabel, L('profit.calc.currency.label')],
        [this.$currencyValue, this.accountCurrencyList.getTitleByData(this.accountCurrency)],
        [this.$pairLabel, L('profit.calc.pair.label')],
        [this.$pairValue, this.currencyPairList.getTitleByData(this.currencyPair)],
        [this.$volumeLabel, L('profit.calc.volume.label')],
        [this.$openLabel, L('profit.calc.open.label')],
        [this.$closeLabel, L('profit.calc.close.label')],

        [this.$sideLabel, L('profit.calc.side.label')],
        [this.$sideValue, side],
        [this.$typeLabel, L('profit.calc.account.type.label')],
        [this.$typeValue, accountType],
        [this.$periodLabel, L('profit.calc.period.label')],
        [this.$longLabel, L('profit.calc.long.label')],
        [this.$longValue, swapLong],
        [this.$shortLabel, L('profit.calc.short.label')],
        [this.$shortValue, swapShort],

        [this.$resultLabel, Utils.sprintf(L('profit.calc.result'), this.accountCurrency, profitValue)],

        [this.$citationLabel, L('profit.bottom.citation')],
        [this.$authorLabel, L('profit.bottom.author')],
        [this.$formulaLabel, L('profit.bottom.header')],
        [this.$explain1, Utils.sprintf(L('profit.bottom.explain1'), this.accountCurrency)],
        [this.$explain2, Utils.sprintf(L('profit.bottom.explain2'), accountType)],
        [this.$explain3, Utils.sprintf(L('profit.bottom.explain3'), currencyPair)],
        [this.$explain4, Utils.sprintf(L('profit.bottom.explain4'), side)],
        [this.$explain5, Utils.sprintf(L('profit.bottom.explain5'), tradeSize)],
        [this.$explain6, Utils.sprintf(L('profit.bottom.explain6'), this.period)],
        [this.$explain7, Utils.sprintf(L('profit.bottom.explain7'), openPrice)],
        [this.$explain8, Utils.sprintf(L('profit.bottom.explain8'), closePrice)],
        [this.$explain9, Utils.sprintf(L('profit.bottom.explain9'), closePrice, openPrice, tradeSize, this.currentConversionPrice, conversionPair, this.period, swap.toFixed(2), profitValue)],
        [this.$formulaResultLabel, Utils.sprintf(L('profit.bottom.footer'), this.accountCurrency, profitValue)],
    ]);
};

ProfitCalculator.prototype.bindEvents = function () {
    var _this = this;
    var $target = $('.profit-container');

    this.calculatorsList = new CalculatorsList({parent: $target, active: CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.NAME});
    this.accountCurrencyList = new AccountCurrencyList({parent: $target, active: _this.accountCurrency});
    this.currencyPairList = new CurrencyPairList({parent: $target, active: _this.currencyPair});
    this.tradeSizeInput = new TradeSizeInput();
    this.tradeSizeInput.$container.appendTo($('.profit-container .calc-volume-input'));
    this.accountTypeList = new AccountTypeList({parent: $target, active: _this.accountType});
    this.openPriceInput = new PriceInput();
    this.openPriceInput.$container.appendTo($('.profit-container .calc-open-input'));
    this.closePriceInput = new PriceInput();
    this.closePriceInput.$container.appendTo($('.profit-container .calc-close-input'));
    this.tradeSideList = new TradeSideList({parent: $target, active: _this.tradeSide});
    this.periodInput = new PeriodInput();
    this.periodInput.$container.appendTo($('.profit-container .calc-period-input'));

    this.$selectorName = $('.profit-container .calc-selector-name');
    this.$currencyLabel = $('.profit-container .calc-currency-label');
    this.$currencyValue = $('.profit-container .calc-currency-value');
    this.$pairLabel = $('.profit-container .calc-pair-label');
    this.$pairValue = $('.profit-container .calc-pair-value');
    this.$volumeLabel = $('.profit-container .calc-volume-label');
    this.$volumeInput = $('.profit-container .calc-volume-input');
    this.$openLabel = $('.profit-container .calc-open-label');
    this.$openValue = $('.profit-container .calc-open-value');
    this.$closeLabel = $('.profit-container .calc-close-label');
    this.$closeValue = $('.profit-container .calc-close-value');

    this.$sideLabel = $('.profit-container .calc-side-label');
    this.$sideValue = $('.profit-container .calc-side-value');
    this.$typeLabel = $('.profit-container .calc-account-type-label');
    this.$typeValue = $('.profit-container .calc-account-type-value');
    this.$periodLabel = $('.profit-container .calc-period-label');
    this.$periodValue = $('.profit-container .calc-period-value');
    this.$longLabel = $('.profit-container .calc-long-label');
    this.$longValue = $('.profit-container .calc-long-value');
    this.$shortLabel = $('.profit-container .calc-short-label');
    this.$shortValue = $('.profit-container .calc-short-value');

    this.$resultLabel = $('.profit-container .calc-result-label');
    this.$citationLabel = $('.profit-container .calc-citation-label');
    this.$authorLabel = $('.profit-container .calc-author-label');
    this.$formulaLabel = $('.profit-container .calc-formula-label');
    this.$explain1 = $('.profit-container .calc-explain1');
    this.$explain2 = $('.profit-container .calc-explain2');
    this.$explain3 = $('.profit-container .calc-explain3');
    this.$explain4 = $('.profit-container .calc-explain4');
    this.$explain5 = $('.profit-container .calc-explain5');
    this.$explain6 = $('.profit-container .calc-explain6');
    this.$explain7 = $('.profit-container .calc-explain7');
    this.$explain8 = $('.profit-container .calc-explain8');
    this.$explain9 = $('.profit-container .calc-explain9');
    this.$formulaResultLabel = $('.profit-container .calc-formula-result-label');

    this.calculatorsList.on('selected', function (newType) {
        _this.app.setType(newType);
    });
    
    this.accountCurrencyList.on('selected', function (newAccountCurrency) {
        _this.accountCurrency = newAccountCurrency;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.REQ.ON_ACCOUNT_CURRENCY_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data);
                }
            });
        });
    });
    this.currencyPairList.on('selected', function (newCurrencyPair) {
        _this.currencyPair = newCurrencyPair;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.REQ.ON_CURRENCY_PAIR_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data);
                }
            });
        });
    });
    this.tradeSizeInput.on('changed', function (newValue) {
        _this.tradeSize = newValue;
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data, {ignore: 'tradeSizeInput'});
            return;
        } 
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.PROFIT_CALCULATOR.REQ.ON_TRADE_SIZE_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data, {ignore: 'tradeSizeInput'});
                }
            });
        });
    });
    this.openPriceInput.on('changed', function (newValue) {
        _this.openPrice = parseFloat(newValue);
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data, {ignore: 'openInput'});
        } 
    });
    this.closePriceInput.on('changed', function (newValue) {
        _this.closePrice = parseFloat(newValue);
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data, {ignore: 'closeInput'});
        } 
    });
    this.tradeSideList.on('selected', function (newTradeSide) {
        _this.tradeSide = newTradeSide;
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data);
        } 
    });
    this.accountTypeList.on('selected', function (newAccountType) {
        _this.accountType = newAccountType;
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data);
        } 
    });
    this.periodInput.on('changed', function (newValue) {
        _this.period = newValue;
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data, {ignore: 'periodInput'});
        } 
    });

    $('.calculators .common-lang-btn').on('click', function (e) {
        var $el = $(e.target);
        var lang = $el.attr('data-option');
        if (lang) {
            _this.app.changeLanguage(lang);
        }
    });

    this.$calculatorsSelector = $('.profit-container .calc-header .calc-selector'); 
    this.$calculatorsSelector.on('click', function (e) {
        _this.hideAllMenus();
        var b = Utils.box(_this.$calculatorsSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.calculatorsList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.profit-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$accountCurrencySelector = $('.profit-container .calc-selector.currency'); 
    this.$accountCurrencySelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$accountCurrencySelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.accountCurrencyList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.profit-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$currencyPairSelector = $('.profit-container .calc-selector.pair'); 
    this.$currencyPairSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$currencyPairSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.currencyPairList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.profit-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$tradeSideSelector = $('.profit-container .calc-side-value'); 
    this.$tradeSideSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$tradeSideSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.tradeSideList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.profit-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$accountTypeSelector = $('.profit-container .calc-account-type-value'); 
    this.$accountTypeSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$accountTypeSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.accountTypeList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.profit-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.accountCurrencyList.trigger('selected', this.accountCurrency);
};

ProfitCalculator.prototype.unBindEvents = function () {
    if (this.calculatorsList) this.calculatorsList.destroy();
    if (this.accountCurrencyList) this.accountCurrencyList.destroy();
    if (this.currencyPairList) this.currencyPairList.destroy();
    if (this.tradeSideList) this.tradeSideList.destroy();
    if (this.accountTypeList) this.accountTypeList.destroy();

    if (this.$calculatorsSelector) this.$calculatorsSelector.off('click');
    if (this.$accountCurrencySelector) this.$accountCurrencySelector.off('click');
    if (this.$currencyPairSelector) this.$currencyPairSelector.off('click');
    if (this.$tradeSideSelector) this.$tradeSideSelector.off('click');
    if (this.$accountTypeSelector) this.$accountTypeSelector.off('click');
};

exports.ProfitCalculator = ProfitCalculator;

},{"../_/component/account_currency_list":2,"../_/component/account_type_list":3,"../_/component/calculators_list":4,"../_/component/currency_pair_list":7,"../_/component/logger":11,"../_/component/period_input":12,"../_/component/price_input":13,"../_/component/trade_side_list":14,"../_/component/trade_size_input":15,"../_/constants":16,"../_/model/event_driven":19,"../_/utils":20}],27:[function(require,module,exports){
'use strict';

var Utils = require('../_/utils');
var EventDriven = require('../_/model/event_driven').EventDriven;
var CONSTANTS = require('../_/constants').CONSTANTS;
var log = require('../_/component/logger').log;
var CalculatorsList = require('../_/component/calculators_list').CalculatorsList;
var AccountCurrencyList = require('../_/component/account_currency_list').AccountCurrencyList;
var CurrencyPairList = require('../_/component/currency_pair_list').CurrencyPairList;
var TradeSizeInput = require('../_/component/trade_size_input').TradeSizeInput;

function SwapsCalculator (params) {
    params = params || {};
    this.app = params.app;
    this.connection = params.connection;
    this.accountCurrency = CONSTANTS.CALCULATORS.SWAPS_CALCULATOR.DEFAULT_ACCOUNT_CURRENCY;
    this.currencyPair = CONSTANTS.CALCULATORS.SWAPS_CALCULATOR.DEFAULT_CURRENCY_PAIR;
    this.tradeSize = CONSTANTS.CALCULATORS.SWAPS_CALCULATOR.DEFAULT_TRADE_SIZE;
    this.currentConversionPrice = '1';
    this.pipValue = null;
    this.cache = null;
    $(window).resize(function() {
        this.hideAllMenus();
    }.bind(this));
};

Utils.extend(SwapsCalculator, EventDriven);

SwapsCalculator.prototype.hideAllMenus = function () {
    if (this.calculatorsList) this.calculatorsList.hide();
    if (this.accountCurrencyList) this.accountCurrencyList.hide();
    if (this.currencyPairList) this.currencyPairList.hide();
};

SwapsCalculator.prototype.getTemplate = function () {
    var template = '\
        <div class="calculators swaps-container">\
            <div class="calculator-top col-md-8">\
                <div class="calc-header">\
                    <div class="calc-selector calc-selector-name">&nbsp;</div>\
                </div>\
                <div class="calc-container">\
                    <div class="calc-section calc-left">\
                        <div class="calc-label calc-currency-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-currency-value">&nbsp;</div>\
                        <div class="calc-label calc-pair-label">&nbsp;</div>\
                        <div class="calc-value calc-selector calc-pair-value">&nbsp;</div>\
                        <div class="calc-label calc-volume-label">&nbsp;</div>\
                        <div class="calc-value calc-input calc-volume-input"></div>\
                    </div>\
                    <div class="calc-section calc-right">\
                        <div class="calc-label calc-long-label">&nbsp;</div>\
                        <div class="calc-value calc-info calc-long-value">&nbsp;</div>\
                        <div class="calc-label calc-short-label">&nbsp;</div>\
                        <div class="calc-value calc-info calc-short-value">&nbsp;</div>\
                        <div class="calc-label calc-price-label">&nbsp;</div>\
                        <div class="calc-value calc-info calc-price-value">&nbsp;</div>\
                    </div>\
                </div>\
                <div class="calc-footer">\
                    <div class="calc-result calc-result-label">&nbsp;</div>\
                </div>\
            </div>\
            <div class="calculator-bottom col-md-4">\
                <div class="info-container info-left">\
                    <span class="info-bold">&laquo;<b class="calc-citation-label">&nbsp;</b>&raquo;</span>\
                    <span class="info-footer calc-author-label">&nbsp;</span>\
                </div>\
                <div class="info-container info-right">\
                    <span class="info-header info-bold calc-formula-label">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain1">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain2">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain3">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain4">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain5">&nbsp;</span>\
                    <span class="calc-explain-text calc-explain6">&nbsp;</span>\
                    <span class="info-footer calc-formula-result-label">&nbsp;</span>\
                </div>\
            </div>\
            <div class="common-lang-switch">\
                <div class="common-lang-btn" data-option="en">en</div>\
                <div class="common-lang-btn" data-option="ru">ru</div>\
            </div>\
        </div>\
    ';
    return template;
};

SwapsCalculator.prototype.parseSwapsData = function (swapsData) {
    var arr = swapsData;
    var obj = {};
    if (arr && arr.length) {
        for (var i = 0, len = arr.length, s, n, l, r; i < len; i++) {
            s = arr[i];
            n = s['Symbol'];
            l = s['SwapLong'];
            r = s['SwapShort'];
            if (obj[n] == null) {
                obj[n] = {
                    long: parseFloat(l),
                    short: parseFloat(r)
                };
            } else {
                //console.log('ERROR swaps e', e, s, i, arr);
            }
        }
    } else {
        //console.log('ERROR swaps arr:', arr, str, raw);
    }
    return obj;
};

SwapsCalculator.prototype.refresh = function (data, options) {
    options = options || {};

    if (!this.accountCurrencyList || !data || data.length != 3)  {
        // refresh only after all components created
        // no sense to refresh without actual data
        return;
    }

    // data[0] for calculate digits
    // data[1] for calculate price
    // data[2] swaps: swapsData, strings separated by ~

    var swaps = {}; 
    if (data[2].swaps) {
        swaps = this.parseSwapsData(data[2].swaps);
    } else {
        swaps[this.currencyPair] = {
            long: 0,
            short: 0
        };
    }
    var curs = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)];
    var price = data[1].rates[curs[1]] || 1;
    var symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', this.currencyPair);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', from + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + from);
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', to + "USD");
    if (!symbolInfo) symbolInfo = Utils.getItemFromObjectsArrayByKeyAndValue(CONSTANTS.CURRENCY_PAIR, 'n', "USD" + to);
    if (!symbolInfo) {
        symbolInfo = {
            d: 5,
            p: 0.0001
        }
    }
    var digits = symbolInfo.d;
    var pip = symbolInfo.p;
    this.pipValue = ((pip * this.tradeSize) / price);
    this.currentConversionPrice = price.toFixed(digits);
    this.swapLongValue = ((this.pipValue * swaps[this.currencyPair].long) / 10).toFixed(2);
    this.swapShortValue = ((this.pipValue * swaps[this.currencyPair].short) / 10).toFixed(2);

    var _this = this;
    $('.common-lang-switch .common-lang-btn').each(function (e) {
        if ($(this).attr('data-option') === _this.app.language) {
            $(this).addClass('active');
        }
    });
    
    if (options.ignore !== 'tradeSizeInput') {
        this.tradeSizeInput.setValue(this.tradeSize);
    }

    var currencyPair = [this.currencyPair.slice(0, 3), this.currencyPair.slice(3)].join('https://www.icmarkets.com/');
    var conversionPair = this.accountCurrency + '/' + this.currencyPair.slice(3);
    var tradeSize = Utils.formatToThree(this.tradeSize, ',');
    var pipValue = Utils.formatToThree(this.pipValue.toFixed(2), ',');

    Utils.fillTemplate([
        [this.$selectorName, L('swaps.calc.selector')],
        [this.$currencyLabel, L('swaps.calc.currency.label')],
        [this.$currencyValue, this.accountCurrencyList.getTitleByData(this.accountCurrency)],
        [this.$pairLabel, L('swaps.calc.pair.label')],
        [this.$pairValue, this.currencyPairList.getTitleByData(this.currencyPair)],
        [this.$volumeLabel, L('swaps.calc.volume.label')],
        [this.$longLabel, L('swaps.calc.long.label')],
        [this.$longValue, swaps[this.currencyPair].long],
        [this.$shortLabel, L('swaps.calc.short.label')],
        [this.$shortValue, swaps[this.currencyPair].short],
        [this.$priceLabel, Utils.sprintf(L('swaps.calc.price.label'), conversionPair)],
        [this.$priceValue, this.currentConversionPrice],
        [this.$resultLabel, Utils.sprintf(L('swaps.calc.result'), this.accountCurrency, this.swapLongValue, this.swapShortValue)],
        [this.$citationLabel, L('swaps.bottom.citation')],
        [this.$authorLabel, L('swaps.bottom.author')],
        [this.$formulaLabel, L('swaps.bottom.header')],
        [this.$explain1, Utils.sprintf(L('swaps.bottom.explain1'), this.accountCurrency)],
        [this.$explain2, Utils.sprintf(L('swaps.bottom.explain2'), currencyPair)],
        [this.$explain3, Utils.sprintf(L('swaps.bottom.explain3'), tradeSize)],
        [this.$explain4, Utils.sprintf(L('swaps.bottom.explain4'), pipValue)],
        [this.$explain5, Utils.sprintf(L('swaps.bottom.explain5'), conversionPair, this.currentConversionPrice)],
        [this.$explain6, Utils.sprintf(L('swaps.bottom.explain6'), swaps[this.currencyPair].long, pipValue, this.swapLongValue)],
        [this.$formulaResultLabel, Utils.sprintf(L('swaps.bottom.footer'), this.accountCurrency, this.swapLongValue, this.swapShortValue)],
    ]);
};

SwapsCalculator.prototype.bindEvents = function () {
    var _this = this;
    var $target = $('.swaps-container');
    
    this.calculatorsList = new CalculatorsList({parent: $target, active: CONSTANTS.CALCULATORS.SWAPS_CALCULATOR.NAME});
    this.accountCurrencyList = new AccountCurrencyList({parent: $target, active: _this.accountCurrency});
    this.currencyPairList = new CurrencyPairList({parent: $target, active: _this.currencyPair});
    this.tradeSizeInput = new TradeSizeInput();
    this.tradeSizeInput.$container.appendTo($('.swaps-container .calc-left .calc-input'));

    this.$selectorName = $('.swaps-container .calc-selector-name');
    this.$currencyLabel = $('.swaps-container .calc-currency-label');
    this.$currencyValue = $('.swaps-container .calc-currency-value');
    this.$pairLabel = $('.swaps-container .calc-pair-label');
    this.$pairValue = $('.swaps-container .calc-pair-value');
    this.$volumeLabel = $('.swaps-container .calc-volume-label');
    this.$volumeInput = $('.swaps-container .calc-volume-input');
    this.$longLabel = $('.swaps-container .calc-long-label');
    this.$longValue = $('.swaps-container .calc-long-value');
    this.$shortLabel = $('.swaps-container .calc-short-label');
    this.$shortValue = $('.swaps-container .calc-short-value');
    this.$priceLabel = $('.swaps-container .calc-price-label');
    this.$priceValue = $('.swaps-container .calc-price-value');
    this.$resultLabel = $('.swaps-container .calc-result-label');
    this.$citationLabel = $('.swaps-container .calc-citation-label');
    this.$authorLabel = $('.swaps-container .calc-author-label');
    this.$formulaLabel = $('.swaps-container .calc-formula-label');
    this.$explain1 = $('.swaps-container .calc-explain1');
    this.$explain2 = $('.swaps-container .calc-explain2');
    this.$explain3 = $('.swaps-container .calc-explain3');
    this.$explain4 = $('.swaps-container .calc-explain4');
    this.$explain5 = $('.swaps-container .calc-explain5');
    this.$explain6 = $('.swaps-container .calc-explain6');
    this.$formulaResultLabel = $('.swaps-container .calc-formula-result-label');

    this.calculatorsList.on('selected', function (newType) {
        _this.app.setType(newType);
    });
    
    this.accountCurrencyList.on('selected', function (newAccountCurrency) {
        _this.accountCurrency = newAccountCurrency;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.SWAPS_CALCULATOR.REQ.ON_ACCOUNT_CURRENCY_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data);
                }
            });
        });
    });
    this.currencyPairList.on('selected', function (newCurrencyPair) {
        _this.currencyPair = newCurrencyPair;
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.SWAPS_CALCULATOR.REQ.ON_CURRENCY_PAIR_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data);
                }
            });
        });
    });
    this.tradeSizeInput.on('changed', function (newValue) {
        _this.tradeSize = newValue;
        if (_this.cache && _this.cache.account === _this.accountCurrency && _this.cache.pair === _this.currencyPair) {
            _this.refresh(_this.cache.data, {ignore: 'tradeSizeInput'});
            return;
        } 
        $.get(_this.connection.host + '/~get~sign~token~?nocache=' + Date.now() ).done(function (token) {
            $.ajax({
                'type': 'GET',
                'cache': false,
                'dataType': 'json',
                'url': _this.connection.host,
                'data': {
                    getCalc: '1',
                    sign: token,
                    type: CONSTANTS.CALCULATORS.SWAPS_CALCULATOR.REQ.ON_TRADE_SIZE_CHANGED,
                    account: _this.accountCurrency,
                    pair: _this.currencyPair,
                    volume: _this.tradeSize
                },
                'success': function(data) {
                    _this.cache = {
                        data: data,
                        account: _this.accountCurrency,
                        pair: _this.currencyPair
                    };
                    _this.refresh(data, {ignore: 'tradeSizeInput'});
                }
            });
        });
    });

    $('.calculators .common-lang-btn').on('click', function (e) {
        var $el = $(e.target);
        var lang = $el.attr('data-option');
        if (lang) {
            _this.app.changeLanguage(lang);
        }
    });

    this.$calculatorsSelector = $('.swaps-container .calc-header .calc-selector'); 
    this.$calculatorsSelector.on('click', function (e) {
        _this.hideAllMenus();
        var b = Utils.box(_this.$calculatorsSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.calculatorsList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.swaps-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$accountCurrencySelector = $('.swaps-container .calc-selector.calc-currency-value');
    this.$accountCurrencySelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$accountCurrencySelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.accountCurrencyList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.swaps-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });

    this.$currencyPairSelector = $('.swaps-container .calc-selector.calc-pair-value');
    this.$currencyPairSelector.on('click', function () {
        _this.hideAllMenus();
        var b = Utils.box(_this.$currencyPairSelector[0]);
        $(this).addClass('open');
        var el = this;
        _this.currencyPairList.show({
            box: {
                left: b.left,
                top: (b.top + b.height),
                parent: $('.swaps-container'),
                minWidth: b.width
            },
            callbackOnHide: function () {
                $(el).removeClass('open');
            }
        });
    });
    this.accountCurrencyList.trigger('selected', this.accountCurrency);
};

SwapsCalculator.prototype.unBindEvents = function () {
    if (this.calculatorsList) this.calculatorsList.destroy();
    if (this.accountCurrencyList) this.accountCurrencyList.destroy();
    if (this.currencyPairList) this.currencyPairList.destroy();

    if (this.$calculatorsSelector) this.$calculatorsSelector.off('click');
    if (this.$accountCurrencySelector) this.$accountCurrencySelector.off('click');
    if (this.$currencyPairSelector) this.$currencyPairSelector.off('click');
};

exports.SwapsCalculator = SwapsCalculator;

},{"../_/component/account_currency_list":2,"../_/component/calculators_list":4,"../_/component/currency_pair_list":7,"../_/component/logger":11,"../_/component/trade_size_input":15,"../_/constants":16,"../_/model/event_driven":19,"../_/utils":20}],28:[function(require,module,exports){
require('./client/js/_/common');
if (window) window.Application = require('./client/js/_/component/client_app').Application;
module.exports = Application

},{"./client/js/_/common":1,"./client/js/_/component/client_app":5}]},{},[28]);
</script>
<script>window.currentLocale = 'en';</script>
<script>

    $(document).ready(function () {
        var url = 'https://www.icmarkets.com/regapi/';
        if (url.endsWith('https://www.icmarkets.com/')) {
            url = url.substr(0, url.length - 1);
        }
        window.app = new Application({
            regulator: "3",
            host: url // NOTE: here used regservice url without slash at the end!
        });
        var type = 'pip';
        window.app.getActualSymbols().then(function () {
            window.app.setBranch("3");
            window.app.setType(type);
            window.app.changeLanguage(window.currentLocale);
        });
    });
</script>
    </body>

<!-- Mirrored from www.icmarkets.com/global/en/help-resources/forex-calculators by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 31 Oct 2023 18:13:07 GMT -->
</html>
